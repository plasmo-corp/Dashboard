var Pd=Object.defineProperty,Rd=Object.defineProperties;var Fd=Object.getOwnPropertyDescriptors;var _l=Object.getOwnPropertySymbols;var zd=Object.prototype.hasOwnProperty,Ld=Object.prototype.propertyIsEnumerable;var Pl=(e,t,n)=>t in e?Pd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J=(e,t)=>{for(var n in t||(t={}))zd.call(t,n)&&Pl(e,n,t[n]);if(_l)for(var n of _l(t))Ld.call(t,n)&&Pl(e,n,t[n]);return e},cn=(e,t)=>Rd(e,Fd(t));import{h as cf,aj as Bd,i as ff,r as pa,o as Vd,d as li,e as ui,A as ci,D as hf,n as Rl,u as pf,k as $d,K as or,g as da,s as Hd,aa as Wd,p as jd,f as qd,P as Jd}from"./vendor.f6148a0a.js";import{g as Zr,_ as Kd}from"./index.3c0b9368.js";import{l as Ud}from"./color.556e4bcb.js";const Gd=(e,t)=>typeof t=="function"?"[Function]":t,Mr=e=>JSON.stringify(e,Gd),Qd=e=>new Error(`Doc type error, unsupported type: ${Mr(e)}`),Zd=e=>new Error(`Context "${e}" not found, do you forget to inject it?`),Yd=()=>new Error("Timer not found, do you forget to record it?"),Xd=()=>new Error("Should not call a context out of the plugin."),em=(...e)=>{const t=e.reduce((n,r)=>{if(!r)return n;const i=o=>Array.isArray(o)?o.map(a=>i(a)).join(", "):o.toJSON?Mr(o.toJSON()):o.spec?Mr(o.spec):o.toString();return`${n}, ${i(r)}`},"Create prosemirror node from remark failed in parser");return new Error(t)},df=()=>new Error("Stack over flow, cannot pop on an empty stack."),tm=e=>new Error(`Cannot match target parser for node: ${Mr(e)}.`),nm=e=>new Error(`Cannot match target serializer for node: ${Mr(e)}.`),rm=()=>new Error("You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized"),im=()=>new Error("It seems that no theme found in editor, please make sure you have use theme in front of all plugins.\nIf you prefer to use an empty theme, you can use `themeFactory({})`.");var om=Object.defineProperty,Fl=Object.getOwnPropertySymbols,am=Object.prototype.hasOwnProperty,sm=Object.prototype.propertyIsEnumerable,zl=(e,t,n)=>t in e?om(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lm=(e,t)=>{for(var n in t||(t={}))am.call(t,n)&&zl(e,n,t[n]);if(Fl)for(var n of Fl(t))sm.call(t,n)&&zl(e,n,t[n]);return e},mf=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ei=(e,t,n)=>(mf(e,t,"read from private field"),n?n.call(e):t.get(e)),Ti=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ni=(e,t,n,r)=>(mf(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),fi,hi,pi,di;const gf=()=>{const e=new Map;return{getSlice:n=>{const r=e.get(n.id);if(!r)throw Zd(n.sliceName);return r},sliceMap:e}},um=e=>Array.isArray(e)?[...e]:typeof e=="object"?lm({},e):e,X=(e,t)=>{const n=Symbol("Context"),r=(i,o=um(e))=>{let a=o;const s={id:n,set:l=>{a=l},get:()=>a,update:l=>{a=l(a)}};return i.set(n,s),s};return r.sliceName=t,r.id=n,r._typeInfo=()=>{throw Xd()},r};class cm{constructor(t,n){Ti(this,fi,void 0),Ti(this,hi,void 0),this.use=r=>Ei(this,fi).getSlice(r),this.get=r=>this.use(r).get(),this.set=(r,i)=>this.use(r).set(i),this.update=(r,i)=>this.use(r).update(i),this.timing=r=>Ei(this,hi).get(r),this.wait=r=>this.timing(r)(),this.done=r=>this.timing(r).done(),this.waitTimers=async r=>{await Promise.all(this.get(r).map(i=>this.wait(i)))},Ni(this,fi,t),Ni(this,hi,n)}}fi=new WeakMap;hi=new WeakMap;class fm{constructor(t,n){Ti(this,pi,void 0),Ti(this,di,void 0),this.inject=(r,i)=>(r(Ei(this,pi).sliceMap,i),this),this.record=r=>(r(Ei(this,di).store),this),Ni(this,pi,t),Ni(this,di,n)}}pi=new WeakMap;di=new WeakMap;const hm=()=>{const e=new Map;return{store:e,get:n=>{const r=e.get(n.id);if(!r)throw Yd();return r}}},an=(e,t=3e3)=>{const n=Symbol("Timer"),r=i=>{const o=Symbol(e),a=()=>new Promise((s,l)=>{setTimeout(()=>{l(`Timing ${e} timeout.`)},t),addEventListener(e,u=>{u instanceof CustomEvent&&u.detail.id===o&&s(void 0)})});return a.done=()=>{const s=new CustomEvent(e,{detail:{id:o}});dispatchEvent(s)},i.set(n,a),a};return r.id=n,r};function De(e){this.content=e}De.prototype={constructor:De,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return i==-1?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new De(o)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new De(n)},addToStart:function(e,t){return new De([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new De(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(o==-1?i.length:o,0,t,n),new De(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=De.from(e),e.size?new De(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=De.from(e),e.size?new De(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=De.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}};De.from=function(e){if(e instanceof De)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new De(t)};var Ll=De;function vf(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var i=e.child(r),o=t.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var a=0;i.text[a]==o.text[a];a++)n++;return n}if(i.content.size||o.content.size){var s=vf(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function yf(e,t,n,r){for(var i=e.childCount,o=t.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};var a=e.child(--i),s=t.child(--o),l=a.nodeSize;if(a==s){n-=l,r-=l;continue}if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){for(var u=0,c=Math.min(a.text.length,s.text.length);u<c&&a.text[a.text.length-u-1]==s.text[s.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){var f=yf(a.content,s.content,n-1,r-1);if(f)return f}n-=l,r-=l}}var A=function(t,n){if(this.content=t,this.size=n||0,n==null)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize},Qi={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};A.prototype.nodesBetween=function(t,n,r,i,o){i===void 0&&(i=0);for(var a=0,s=0;s<n;a++){var l=this.content[a],u=s+l.nodeSize;if(u>t&&r(l,i+s,o,a)!==!1&&l.content.size){var c=s+1;l.nodesBetween(Math.max(0,t-c),Math.min(l.content.size,n-c),r,i+c)}s=u}};A.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)};A.prototype.textBetween=function(t,n,r,i){var o="",a=!0;return this.nodesBetween(t,n,function(s,l){s.isText?(o+=s.text.slice(Math.max(t,l)-l,n-l),a=!r):s.isLeaf&&i?(o+=typeof i=="function"?i(s):i,a=!r):!a&&s.isBlock&&(o+=r,a=!0)},0),o};A.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,r=t.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new A(i,this.size+t.size)};A.prototype.cut=function(t,n){if(n==null&&(n=this.size),t==0&&n==this.size)return this;var r=[],i=0;if(n>t)for(var o=0,a=0;a<n;o++){var s=this.content[o],l=a+s.nodeSize;l>t&&((a<t||l>n)&&(s.isText?s=s.cut(Math.max(0,t-a),Math.min(s.text.length,n-a)):s=s.cut(Math.max(0,t-a-1),Math.min(s.content.size,n-a-1))),r.push(s),i+=s.nodeSize),a=l}return new A(r,i)};A.prototype.cutByIndex=function(t,n){return t==n?A.empty:t==0&&n==this.content.length?this:new A(this.content.slice(t,n))};A.prototype.replaceChild=function(t,n){var r=this.content[t];if(r==n)return this;var i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new A(i,o)};A.prototype.addToStart=function(t){return new A([t].concat(this.content),this.size+t.nodeSize)};A.prototype.addToEnd=function(t){return new A(this.content.concat(t),this.size+t.nodeSize)};A.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0};Qi.firstChild.get=function(){return this.content.length?this.content[0]:null};Qi.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null};Qi.childCount.get=function(){return this.content.length};A.prototype.child=function(t){var n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n};A.prototype.maybeChild=function(t){return this.content[t]};A.prototype.forEach=function(t){for(var n=0,r=0;n<this.content.length;n++){var i=this.content[n];t(i,r,n),r+=i.nodeSize}};A.prototype.findDiffStart=function(t,n){return n===void 0&&(n=0),vf(this,t,n)};A.prototype.findDiffEnd=function(t,n,r){return n===void 0&&(n=this.size),r===void 0&&(r=t.size),yf(this,t,n,r)};A.prototype.findIndex=function(t,n){if(n===void 0&&(n=-1),t==0)return Yr(0,t);if(t==this.size)return Yr(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var r=0,i=0;;r++){var o=this.child(r),a=i+o.nodeSize;if(a>=t)return a==t||n>0?Yr(r+1,a):Yr(r,i);i=a}};A.prototype.toString=function(){return"<"+this.toStringInner()+">"};A.prototype.toStringInner=function(){return this.content.join(", ")};A.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null};A.fromJSON=function(t,n){if(!n)return A.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new A(n.map(t.nodeFromJSON))};A.fromArray=function(t){if(!t.length)return A.empty;for(var n,r=0,i=0;i<t.length;i++){var o=t[i];r+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(n||(n=t.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new A(n||t,r)};A.from=function(t){if(!t)return A.empty;if(t instanceof A)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new A([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))};Object.defineProperties(A.prototype,Qi);var Oo={index:0,offset:0};function Yr(e,t){return Oo.index=e,Oo.offset=t,Oo}A.empty=new A([],0);function Ii(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!Ii(e[r],t[r]))return!1}else{for(var i in e)if(!(i in t)||!Ii(e[i],t[i]))return!1;for(var o in t)if(!(o in e))return!1}return!0}var H=function(t,n){this.type=t,this.attrs=n};H.prototype.addToSet=function(t){for(var n,r=!1,i=0;i<t.length;i++){var o=t[i];if(this.eq(o))return t;if(this.type.excludes(o.type))n||(n=t.slice(0,i));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=t.slice()),r||n.push(this),n};H.prototype.removeFromSet=function(t){for(var n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t};H.prototype.isInSet=function(t){for(var n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1};H.prototype.eq=function(t){return this==t||this.type==t.type&&Ii(this.attrs,t.attrs)};H.prototype.toJSON=function(){var t={type:this.type.name};for(var n in this.attrs){t.attrs=this.attrs;break}return t};H.fromJSON=function(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");var r=t.marks[n.type];if(!r)throw new RangeError("There is no mark type "+n.type+" in this schema");return r.create(n.attrs)};H.sameSet=function(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0};H.setFrom=function(t){if(!t||t.length==0)return H.none;if(t instanceof H)return[t];var n=t.slice();return n.sort(function(r,i){return r.type.rank-i.type.rank}),n};H.none=[];function It(e){var t=Error.call(this,e);return t.__proto__=It.prototype,t}It.prototype=Object.create(Error.prototype);It.prototype.constructor=It;It.prototype.name="ReplaceError";var I=function(t,n,r){this.content=t,this.openStart=n,this.openEnd=r},kf={size:{configurable:!0}};kf.size.get=function(){return this.content.size-this.openStart-this.openEnd};I.prototype.insertAt=function(t,n){var r=wf(this.content,t+this.openStart,n,null);return r&&new I(r,this.openStart,this.openEnd)};I.prototype.removeBetween=function(t,n){return new I(bf(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)};I.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd};I.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"};I.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t};I.fromJSON=function(t,n){if(!n)return I.empty;var r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new I(A.fromJSON(t,n.content),r,i)};I.maxOpen=function(t,n){n===void 0&&(n=!0);for(var r=0,i=0,o=t.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(var a=t.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)i++;return new I(t,r,i)};Object.defineProperties(I.prototype,kf);function bf(e,t,n){var r=e.findIndex(t),i=r.index,o=r.offset,a=e.maybeChild(i),s=e.findIndex(n),l=s.index,u=s.offset;if(o==t||a.isText){if(u!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(i!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(i,a.copy(bf(a.content,t-o-1,n-o-1)))}function wf(e,t,n,r){var i=e.findIndex(t),o=i.index,a=i.offset,s=e.maybeChild(o);if(a==t||s.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=wf(s.content,t-a-1,n);return l&&e.replaceChild(o,s.copy(l))}I.empty=new I(A.empty,0,0);function pm(e,t,n){if(n.openStart>e.depth)throw new It("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new It("Inconsistent open depths");return Cf(e,t,n,0)}function Cf(e,t,n,r){var i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){var a=Cf(e,t,n,r+1);return o.copy(o.content.replaceChild(i,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){var s=e.parent,l=s.content;return kn(s,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{var u=dm(n,e),c=u.start,f=u.end;return kn(o,Sf(e,c,f,t,r))}else return kn(o,Di(e,t,r))}function xf(e,t){if(!t.type.compatibleContent(e.type))throw new It("Cannot join "+t.type.name+" onto "+e.type.name)}function ma(e,t,n){var r=e.node(n);return xf(r,t.node(n)),r}function yn(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function yr(e,t,n,r){var i=(t||e).node(n),o=0,a=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(yn(e.nodeAfter,r),o++));for(var s=o;s<a;s++)yn(i.child(s),r);t&&t.depth==n&&t.textOffset&&yn(t.nodeBefore,r)}function kn(e,t){if(!e.type.validContent(t))throw new It("Invalid content for node "+e.type.name);return e.copy(t)}function Sf(e,t,n,r,i){var o=e.depth>i&&ma(e,t,i+1),a=r.depth>i&&ma(n,r,i+1),s=[];return yr(null,e,i,s),o&&a&&t.index(i)==n.index(i)?(xf(o,a),yn(kn(o,Sf(e,t,n,r,i+1)),s)):(o&&yn(kn(o,Di(e,t,i+1)),s),yr(t,n,i,s),a&&yn(kn(a,Di(n,r,i+1)),s)),yr(r,null,i,s),new A(s)}function Di(e,t,n){var r=[];if(yr(null,e,n,r),e.depth>n){var i=ma(e,t,n+1);yn(kn(i,Di(e,t,n+1)),r)}return yr(t,null,n,r),new A(r)}function dm(e,t){for(var n=t.depth-e.openStart,r=t.node(n),i=r.copy(e.content),o=n-1;o>=0;o--)i=t.node(o).copy(A.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}var ce=function(t,n,r){this.pos=t,this.path=n,this.depth=n.length/3-1,this.parentOffset=r},Qn={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};ce.prototype.resolveDepth=function(t){return t==null?this.depth:t<0?this.depth+t:t};Qn.parent.get=function(){return this.node(this.depth)};Qn.doc.get=function(){return this.node(0)};ce.prototype.node=function(t){return this.path[this.resolveDepth(t)*3]};ce.prototype.index=function(t){return this.path[this.resolveDepth(t)*3+1]};ce.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)};ce.prototype.start=function(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1};ce.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size};ce.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]};ce.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize};Qn.textOffset.get=function(){return this.pos-this.path[this.path.length-1]};Qn.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r};Qn.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)};ce.prototype.posAtIndex=function(t,n){n=this.resolveDepth(n);for(var r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1,o=0;o<t;o++)i+=r.child(o).nodeSize;return i};ce.prototype.marks=function(){var t=this.parent,n=this.index();if(t.content.size==0)return H.none;if(this.textOffset)return t.child(n).marks;var r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){var o=r;r=i,i=o}for(var a=r.marks,s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!i||!a[s].isInSet(i.marks))&&(a=a[s--].removeFromSet(a));return a};ce.prototype.marksAcross=function(t){var n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;for(var r=n.marks,i=t.parent.maybeChild(t.index()),o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r};ce.prototype.sharedDepth=function(t){for(var n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0};ce.prototype.blockRange=function(t,n){if(t===void 0&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ss(this,t,r)};ce.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset};ce.prototype.max=function(t){return t.pos>this.pos?t:this};ce.prototype.min=function(t){return t.pos<this.pos?t:this};ce.prototype.toString=function(){for(var t="",n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset};ce.resolve=function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],i=0,o=n,a=t;;){var s=a.content.findIndex(o),l=s.index,u=s.offset,c=o-u;if(r.push(a,l,i+u),!c||(a=a.child(l),a.isText))break;o=c-1,i+=u+1}return new ce(n,r,o)};ce.resolveCached=function(t,n){for(var r=0;r<Ao.length;r++){var i=Ao[r];if(i.pos==n&&i.doc==t)return i}var o=Ao[Eo]=ce.resolve(t,n);return Eo=(Eo+1)%mm,o};Object.defineProperties(ce.prototype,Qn);var Ao=[],Eo=0,mm=12,Ss=function(t,n,r){this.$from=t,this.$to=n,this.depth=r},Zn={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Zn.start.get=function(){return this.$from.before(this.depth+1)};Zn.end.get=function(){return this.$to.after(this.depth+1)};Zn.parent.get=function(){return this.$from.node(this.depth)};Zn.startIndex.get=function(){return this.$from.index(this.depth)};Zn.endIndex.get=function(){return this.$to.indexAfter(this.depth)};Object.defineProperties(Ss.prototype,Zn);var gm=Object.create(null),W=function(t,n,r,i){this.type=t,this.attrs=n,this.content=r||A.empty,this.marks=i||H.none},rt={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};rt.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size};rt.childCount.get=function(){return this.content.childCount};W.prototype.child=function(t){return this.content.child(t)};W.prototype.maybeChild=function(t){return this.content.maybeChild(t)};W.prototype.forEach=function(t){this.content.forEach(t)};W.prototype.nodesBetween=function(t,n,r,i){i===void 0&&(i=0),this.content.nodesBetween(t,n,r,i,this)};W.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)};rt.textContent.get=function(){return this.textBetween(0,this.content.size,"")};W.prototype.textBetween=function(t,n,r,i){return this.content.textBetween(t,n,r,i)};rt.firstChild.get=function(){return this.content.firstChild};rt.lastChild.get=function(){return this.content.lastChild};W.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)};W.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)};W.prototype.hasMarkup=function(t,n,r){return this.type==t&&Ii(this.attrs,n||t.defaultAttrs||gm)&&H.sameSet(this.marks,r||H.none)};W.prototype.copy=function(t){return t===void 0&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)};W.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)};W.prototype.cut=function(t,n){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))};W.prototype.slice=function(t,n,r){if(n===void 0&&(n=this.content.size),r===void 0&&(r=!1),t==n)return I.empty;var i=this.resolve(t),o=this.resolve(n),a=r?0:i.sharedDepth(n),s=i.start(a),l=i.node(a),u=l.content.cut(i.pos-s,o.pos-s);return new I(u,i.depth-a,o.depth-a)};W.prototype.replace=function(t,n,r){return pm(this.resolve(t),this.resolve(n),r)};W.prototype.nodeAt=function(t){for(var n=this;;){var r=n.content.findIndex(t),i=r.index,o=r.offset;if(n=n.maybeChild(i),!n)return null;if(o==t||n.isText)return n;t-=o+1}};W.prototype.childAfter=function(t){var n=this.content.findIndex(t),r=n.index,i=n.offset;return{node:this.content.maybeChild(r),index:r,offset:i}};W.prototype.childBefore=function(t){if(t==0)return{node:null,index:0,offset:0};var n=this.content.findIndex(t),r=n.index,i=n.offset;if(i<t)return{node:this.content.child(r),index:r,offset:i};var o=this.content.child(r-1);return{node:o,index:r-1,offset:i-o.nodeSize}};W.prototype.resolve=function(t){return ce.resolveCached(this,t)};W.prototype.resolveNoCache=function(t){return ce.resolve(this,t)};W.prototype.rangeHasMark=function(t,n,r){var i=!1;return n>t&&this.nodesBetween(t,n,function(o){return r.isInSet(o.marks)&&(i=!0),!i}),i};rt.isBlock.get=function(){return this.type.isBlock};rt.isTextblock.get=function(){return this.type.isTextblock};rt.inlineContent.get=function(){return this.type.inlineContent};rt.isInline.get=function(){return this.type.isInline};rt.isText.get=function(){return this.type.isText};rt.isLeaf.get=function(){return this.type.isLeaf};rt.isAtom.get=function(){return this.type.isAtom};W.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Mf(this.marks,t)};W.prototype.contentMatchAt=function(t){var n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n};W.prototype.canReplace=function(t,n,r,i,o){r===void 0&&(r=A.empty),i===void 0&&(i=0),o===void 0&&(o=r.childCount);var a=this.contentMatchAt(t).matchFragment(r,i,o),s=a&&a.matchFragment(this.content,n);if(!s||!s.validEnd)return!1;for(var l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0};W.prototype.canReplaceWith=function(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;var o=this.contentMatchAt(t).matchType(r),a=o&&o.matchFragment(this.content,n);return a?a.validEnd:!1};W.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)};W.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=H.none,n=0;n<this.marks.length;n++)t=this.marks[n].addToSet(t);if(!H.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map(function(r){return r.type.name}));this.content.forEach(function(r){return r.check()})};W.prototype.toJSON=function(){var t={type:this.type.name};for(var n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(r){return r.toJSON()})),t};W.fromJSON=function(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");var r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}var i=A.fromJSON(t,n.content);return t.nodeType(n.type).create(n.attrs,i,r)};Object.defineProperties(W.prototype,rt);var vm=function(e){function t(r,i,o,a){if(e.call(this,r,i,null,a),!o)throw new RangeError("Empty text nodes are not allowed");this.text=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Mf(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(i,o){return this.text.slice(i,o)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(i){return i==this.marks?this:new t(this.type,this.attrs,this.text,i)},t.prototype.withText=function(i){return i==this.text?this:new t(this.type,this.attrs,i,this.marks)},t.prototype.cut=function(i,o){return i===void 0&&(i=0),o===void 0&&(o=this.text.length),i==0&&o==this.text.length?this:this.withText(this.text.slice(i,o))},t.prototype.eq=function(i){return this.sameMarkup(i)&&this.text==i.text},t.prototype.toJSON=function(){var i=e.prototype.toJSON.call(this);return i.text=this.text,i},Object.defineProperties(t.prototype,n),t}(W);function Mf(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var _e=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Zi={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};_e.parse=function(t,n){var r=new Yi(t,n);if(r.next==null)return _e.empty;var i=Af(r);r.next&&r.err("Unexpected trailing text");var o=Sm(xm(i));return Mm(o,r),o};_e.prototype.matchType=function(t){for(var n=0;n<this.next.length;n+=2)if(this.next[n]==t)return this.next[n+1];return null};_e.prototype.matchFragment=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=t.childCount);for(var i=this,o=n;i&&o<r;o++)i=i.matchType(t.child(o).type);return i};Zi.inlineContent.get=function(){var e=this.next[0];return e?e.isInline:!1};Zi.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}};_e.prototype.compatible=function(t){for(var n=0;n<this.next.length;n+=2)for(var r=0;r<t.next.length;r+=2)if(this.next[n]==t.next[r])return!0;return!1};_e.prototype.fillBefore=function(t,n,r){n===void 0&&(n=!1),r===void 0&&(r=0);var i=[this];function o(a,s){var l=a.matchFragment(t,r);if(l&&(!n||l.validEnd))return A.from(s.map(function(p){return p.createAndFill()}));for(var u=0;u<a.next.length;u+=2){var c=a.next[u],f=a.next[u+1];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);var h=o(f,s.concat(c));if(h)return h}}}return o(this,[])};_e.prototype.findWrapping=function(t){for(var n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];var r=this.computeWrapping(t);return this.wrapCache.push(t,r),r};_e.prototype.computeWrapping=function(t){for(var n=Object.create(null),r=[{match:this,type:null,via:null}];r.length;){var i=r.shift(),o=i.match;if(o.matchType(t)){for(var a=[],s=i;s.type;s=s.via)a.push(s.type);return a.reverse()}for(var l=0;l<o.next.length;l+=2){var u=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!i.type||o.next[l+1].validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),n[u.name]=!0)}}};Zi.edgeCount.get=function(){return this.next.length>>1};_e.prototype.edge=function(t){var n=t<<1;if(n>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[n],next:this.next[n+1]}};_e.prototype.toString=function(){var t=[];function n(r){t.push(r);for(var i=1;i<r.next.length;i+=2)t.indexOf(r.next[i])==-1&&n(r.next[i])}return n(this),t.map(function(r,i){for(var o=i+(r.validEnd?"*":" ")+" ",a=0;a<r.next.length;a+=2)o+=(a?", ":"")+r.next[a].name+"->"+t.indexOf(r.next[a+1]);return o}).join(`
`)};Object.defineProperties(_e.prototype,Zi);_e.empty=new _e(!0);var Yi=function(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()},Of={next:{configurable:!0}};Of.next.get=function(){return this.tokens[this.pos]};Yi.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)};Yi.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")};Object.defineProperties(Yi.prototype,Of);function Af(e){var t=[];do t.push(ym(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function ym(e){var t=[];do t.push(km(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function km(e){for(var t=Cm(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=bm(e,t);else break;return t}function Bl(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function bm(e,t){var n=Bl(e),r=n;return e.eat(",")&&(e.next!="}"?r=Bl(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function wm(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var i=[];for(var o in n){var a=n[o];a.groups.indexOf(t)>-1&&i.push(a)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function Cm(e){if(e.eat("(")){var t=Af(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{var n=wm(e,e.next).map(function(r){return e.inline==null?e.inline=r.isInline:e.inline!=r.isInline&&e.err("Mixing inline and block content"),{type:"name",value:r}});return e.pos++,n.length==1?n[0]:{type:"choice",exprs:n}}}function xm(e){var t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(a,s,l){var u={term:l,to:s};return t[a].push(u),u}function i(a,s){a.forEach(function(l){return l.to=s})}function o(a,s){if(a.type=="choice")return a.exprs.reduce(function(g,y){return g.concat(o(y,s))},[]);if(a.type=="seq")for(var l=0;;l++){var u=o(a.exprs[l],s);if(l==a.exprs.length-1)return u;i(u,s=n())}else if(a.type=="star"){var c=n();return r(s,c),i(o(a.expr,c),c),[r(c)]}else if(a.type=="plus"){var f=n();return i(o(a.expr,s),f),i(o(a.expr,f),f),[r(f)]}else{if(a.type=="opt")return[r(s)].concat(o(a.expr,s));if(a.type=="range"){for(var h=s,p=0;p<a.min;p++){var d=n();i(o(a.expr,h),d),h=d}if(a.max==-1)i(o(a.expr,h),h);else for(var m=a.min;m<a.max;m++){var v=n();r(h,v),i(o(a.expr,h),v),h=v}return[r(h)]}else if(a.type=="name")return[r(s,null,a.value)]}}}function Ef(e,t){return t-e}function Vl(e,t){var n=[];return r(t),n.sort(Ef);function r(i){var o=e[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(var a=0;a<o.length;a++){var s=o[a],l=s.term,u=s.to;!l&&n.indexOf(u)==-1&&r(u)}}}function Sm(e){var t=Object.create(null);return n(Vl(e,0));function n(r){var i=[];r.forEach(function(l){e[l].forEach(function(u){var c=u.term,f=u.to;if(!!c){var h=i.indexOf(c),p=h>-1&&i[h+1];Vl(e,f).forEach(function(d){p||i.push(c,p=[]),p.indexOf(d)==-1&&p.push(d)})}})});for(var o=t[r.join(",")]=new _e(r.indexOf(e.length-1)>-1),a=0;a<i.length;a+=2){var s=i[a+1].sort(Ef);o.next.push(i[a],t[s.join(",")]||n(s))}return o}}function Mm(e,t){for(var n=0,r=[e];n<r.length;n++){for(var i=r[n],o=!i.validEnd,a=[],s=0;s<i.next.length;s+=2){var l=i.next[s],u=i.next[s+1];a.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Tf(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Nf(e,t){var n=Object.create(null);for(var r in e){var i=t&&t[r];if(i===void 0){var o=e[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function If(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new Df(e[n]);return t}var Ve=function(t,n,r){this.name=t,this.schema=n,this.spec=r,this.groups=r.group?r.group.split(" "):[],this.attrs=If(r.attrs),this.defaultAttrs=Tf(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"},Yn={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0},whitespace:{configurable:!0}};Yn.isInline.get=function(){return!this.isBlock};Yn.isTextblock.get=function(){return this.isBlock&&this.inlineContent};Yn.isLeaf.get=function(){return this.contentMatch==_e.empty};Yn.isAtom.get=function(){return this.isLeaf||this.spec.atom};Yn.whitespace.get=function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")};Ve.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1};Ve.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)};Ve.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Nf(this.attrs,t)};Ve.prototype.create=function(t,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new W(this,this.computeAttrs(t),A.from(n),H.setFrom(r))};Ve.prototype.createChecked=function(t,n,r){if(n=A.from(n),!this.validContent(n))throw new RangeError("Invalid content for node "+this.name);return new W(this,this.computeAttrs(t),n,H.setFrom(r))};Ve.prototype.createAndFill=function(t,n,r){if(t=this.computeAttrs(t),n=A.from(n),n.size){var i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}var o=this.contentMatch.matchFragment(n).fillBefore(A.empty,!0);return o?new W(this,t,n.append(o),H.setFrom(r)):null};Ve.prototype.validContent=function(t){var n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(var r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0};Ve.prototype.allowsMarkType=function(t){return this.markSet==null||this.markSet.indexOf(t)>-1};Ve.prototype.allowsMarks=function(t){if(this.markSet==null)return!0;for(var n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0};Ve.prototype.allowedMarks=function(t){if(this.markSet==null)return t;for(var n,r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:H.empty:t};Ve.compile=function(t,n){var r=Object.create(null);t.forEach(function(a,s){return r[a]=new Ve(a,n,s)});var i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r};Object.defineProperties(Ve.prototype,Yn);var Df=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},_f={isRequired:{configurable:!0}};_f.isRequired.get=function(){return!this.hasDefault};Object.defineProperties(Df.prototype,_f);var Xt=function(t,n,r,i){this.name=t,this.schema=r,this.spec=i,this.attrs=If(i.attrs),this.rank=n,this.excluded=null;var o=Tf(this.attrs);this.instance=o&&new H(this,o)};Xt.prototype.create=function(t){return!t&&this.instance?this.instance:new H(this,Nf(this.attrs,t))};Xt.compile=function(t,n){var r=Object.create(null),i=0;return t.forEach(function(o,a){return r[o]=new Xt(o,i++,n,a)}),r};Xt.prototype.removeFromSet=function(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t};Xt.prototype.isInSet=function(t){for(var n=0;n<t.length;n++)if(t[n].type==this)return t[n]};Xt.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var xn=function(t){this.spec={};for(var n in t)this.spec[n]=t[n];this.spec.nodes=Ll.from(t.nodes),this.spec.marks=Ll.from(t.marks),this.nodes=Ve.compile(this.spec.nodes,this),this.marks=Xt.compile(this.spec.marks,this);var r=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var o=this.nodes[i],a=o.spec.content||"",s=o.spec.marks;o.contentMatch=r[a]||(r[a]=_e.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet=s=="_"?null:s?$l(this,s.split(" ")):s==""||!o.inlineContent?[]:null}for(var l in this.marks){var u=this.marks[l],c=u.spec.excludes;u.excluded=c==null?[u]:c==""?[]:$l(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};xn.prototype.node=function(t,n,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Ve){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)};xn.prototype.text=function(t,n){var r=this.nodes.text;return new vm(r,r.defaultAttrs,t,H.setFrom(n))};xn.prototype.mark=function(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)};xn.prototype.nodeFromJSON=function(t){return W.fromJSON(this,t)};xn.prototype.markFromJSON=function(t){return H.fromJSON(this,t)};xn.prototype.nodeType=function(t){var n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n};function $l(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=e.marks[i],a=o;if(o)n.push(o);else for(var s in e.marks){var l=e.marks[s];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=l)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}var vt=function(t,n){var r=this;this.schema=t,this.rules=n,this.tags=[],this.styles=[],n.forEach(function(i){i.tag?r.tags.push(i):i.style&&r.styles.push(i)}),this.normalizeLists=!this.tags.some(function(i){if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;var o=t.nodes[i.node];return o.contentMatch.matchType(o)})};vt.prototype.parse=function(t,n){n===void 0&&(n={});var r=new se(this,n,!1);return r.addAll(t,null,n.from,n.to),r.finish()};vt.prototype.parseSlice=function(t,n){n===void 0&&(n={});var r=new se(this,n,!0);return r.addAll(t,null,n.from,n.to),I.maxOpen(r.finish())};vt.prototype.matchTag=function(t,n,r){for(var i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){var o=this.tags[i];if(Em(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){var a=o.getAttrs(t);if(a===!1)continue;o.attrs=a}return o}}};vt.prototype.matchStyle=function(t,n,r,i){for(var o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){var a=this.styles[o];if(!(a.style.indexOf(t)!=0||a.context&&!r.matchesContext(a.context)||a.style.length>t.length&&(a.style.charCodeAt(t.length)!=61||a.style.slice(t.length+1)!=n))){if(a.getAttrs){var s=a.getAttrs(n);if(s===!1)continue;a.attrs=s}return a}}};vt.schemaRules=function(t){var n=[];function r(l){for(var u=l.priority==null?50:l.priority,c=0;c<n.length;c++){var f=n[c],h=f.priority==null?50:f.priority;if(h<u)break}n.splice(c,0,l)}var i=function(l){var u=t.marks[l].spec.parseDOM;u&&u.forEach(function(c){r(c=Hl(c)),c.mark=l})};for(var o in t.marks)i(o);var a=function(l){var u=t.nodes[s].spec.parseDOM;u&&u.forEach(function(c){r(c=Hl(c)),c.node=s})};for(var s in t.nodes)a();return n};vt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new vt(t,vt.schemaRules(t)))};var Ms={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Om={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Pf={ol:!0,ul:!0},_i=1,Pi=2,Or=4;function Rf(e,t,n){return t!=null?(t?_i:0)|(t==="full"?Pi:0):e&&e.whitespace=="pre"?_i|Pi:n&~Or}var Vt=function(t,n,r,i,o,a,s){this.type=t,this.attrs=n,this.solid=o,this.match=a||(s&Or?null:t.contentMatch),this.options=s,this.content=[],this.marks=r,this.activeMarks=H.none,this.pendingMarks=i,this.stashMarks=[]};Vt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var n=this.type.contentMatch.fillBefore(A.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{var r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)};Vt.prototype.finish=function(t){if(!(this.options&_i)){var n=this.content[this.content.length-1],r;n&&n.isText&&(r=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-r[0].length)))}var i=A.from(this.content);return!t&&this.match&&(i=i.append(this.match.fillBefore(A.empty,!0))),this.type?this.type.create(this.attrs,i,this.marks):i};Vt.prototype.popFromStashMark=function(t){for(var n=this.stashMarks.length-1;n>=0;n--)if(t.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]};Vt.prototype.applyPending=function(t){for(var n=0,r=this.pendingMarks;n<r.length;n++){var i=r[n];(this.type?this.type.allowsMarkType(i.type):Nm(i.type,t))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}};Vt.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Ms.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var se=function(t,n,r){this.parser=t,this.options=n,this.isOpen=r;var i=n.topNode,o,a=Rf(null,n.preserveWhitespace,0)|(r?Or:0);i?o=new Vt(i.type,i.attrs,H.none,H.none,!0,n.topMatch||i.type.contentMatch,a):r?o=new Vt(null,null,H.none,H.none,!0,null,a):o=new Vt(t.schema.topNodeType,null,H.none,H.none,!0,null,a),this.nodes=[o],this.open=0,this.find=n.findPositions,this.needsBlock=!1},Os={top:{configurable:!0},currentPos:{configurable:!0}};Os.top.get=function(){return this.nodes[this.open]};se.prototype.addDOM=function(t){if(t.nodeType==3)this.addTextNode(t);else if(t.nodeType==1){var n=t.getAttribute("style"),r=n?this.readStyles(Tm(n)):null,i=this.top;if(r!=null)for(var o=0;o<r.length;o++)this.addPendingMark(r[o]);if(this.addElement(t),r!=null)for(var a=0;a<r.length;a++)this.removePendingMark(r[a],i)}};se.prototype.addTextNode=function(t){var n=t.nodeValue,r=this.top;if(r.options&Pi||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&_i)r.options&Pi?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){var i=r.content[r.content.length-1],o=t.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(t)}else this.findInside(t)};se.prototype.addElement=function(t,n){var r=t.nodeName.toLowerCase(),i;Pf.hasOwnProperty(r)&&this.parser.normalizeLists&&Am(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(i=this.parser.matchTag(t,this,n));if(o?o.ignore:Om.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var a,s=this.top,l=this.needsBlock;if(Ms.hasOwnProperty(r))a=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}this.addAll(t),a&&this.sync(s),this.needsBlock=l}else this.addElementByRule(t,o,o.consuming===!1?i:null)};se.prototype.leafFallback=function(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))};se.prototype.ignoreFallback=function(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))};se.prototype.readStyles=function(t){var n=H.none;e:for(var r=0;r<t.length;r+=2)for(var i=null;;){var o=this.parser.matchStyle(t[r],t[r+1],this,i);if(!o)continue e;if(o.ignore)return null;if(n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)i=o;else break}return n};se.prototype.addElementByRule=function(t,n,r){var i=this,o,a,s,l;n.node?(a=this.parser.schema.nodes[n.node],a.isLeaf?this.insertNode(a.create(n.attrs))||this.leafFallback(t):o=this.enter(a,n.attrs,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark],l=s.create(n.attrs),this.addPendingMark(l));var u=this.top;if(a&&a.isLeaf)this.findInside(t);else if(r)this.addElement(t,r);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(function(f){return i.insertNode(f)});else{var c=n.contentElement;typeof c=="string"?c=t.querySelector(c):typeof c=="function"&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,o)}o&&(this.sync(u),this.open--),l&&this.removePendingMark(l,u)};se.prototype.addAll=function(t,n,r,i){for(var o=r||0,a=r?t.childNodes[r]:t.firstChild,s=i==null?null:t.childNodes[i];a!=s;a=a.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(a),n&&Ms.hasOwnProperty(a.nodeName.toLowerCase())&&this.sync(n);this.findAtPoint(t,o)};se.prototype.findPlace=function(t){for(var n,r,i=this.open;i>=0;i--){var o=this.nodes[i],a=o.findWrapping(t);if(a&&(!n||n.length>a.length)&&(n=a,r=o,!a.length)||o.solid)break}if(!n)return!1;this.sync(r);for(var s=0;s<n.length;s++)this.enterInner(n[s],null,!1);return!0};se.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(t)){this.closeExtra();var r=this.top;r.applyPending(t.type),r.match&&(r.match=r.match.matchType(t.type));for(var i=r.activeMarks,o=0;o<t.marks.length;o++)(!r.type||r.type.allowsMarkType(t.marks[o].type))&&(i=t.marks[o].addToSet(i));return r.content.push(t.mark(i)),!0}return!1};se.prototype.enter=function(t,n,r){var i=this.findPlace(t.create(n));return i&&this.enterInner(t,n,!0,r),i};se.prototype.enterInner=function(t,n,r,i){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,n);var a=Rf(t,i,o.options);o.options&Or&&o.content.length==0&&(a|=Or),this.nodes.push(new Vt(t,n,o.activeMarks,o.pendingMarks,r,null,a)),this.open++};se.prototype.closeExtra=function(t){var n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}};se.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)};se.prototype.sync=function(t){for(var n=this.open;n>=0;n--)if(this.nodes[n]==t){this.open=n;return}};Os.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e};se.prototype.findAtPoint=function(t,n){if(this.find)for(var r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)};se.prototype.findInside=function(t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)};se.prototype.findAround=function(t,n,r){if(t!=n&&this.find){for(var i=0;i<this.find.length;i++)if(this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)){var o=n.compareDocumentPosition(this.find[i].node);o&(r?2:4)&&(this.find[i].pos=this.currentPos)}}};se.prototype.findInText=function(t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))};se.prototype.matchesContext=function(t){var n=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var r=t.split("/"),i=this.options.context,o=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),a=-(i?i.depth+1:0)+(o?0:1),s=function(l,u){for(;l>=0;l--){var c=r[l];if(c==""){if(l==r.length-1||l==0)continue;for(;u>=a;u--)if(s(l-1,u))return!0;return!1}else{var f=u>0||u==0&&o?n.nodes[u].type:i&&u>=a?i.node(u-a).type:null;if(!f||f.name!=c&&f.groups.indexOf(c)==-1)return!1;u--}}return!0};return s(r.length-1,this.open)};se.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var n=t.depth;n>=0;n--){var r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(var i in this.parser.schema.nodes){var o=this.parser.schema.nodes[i];if(o.isTextblock&&o.defaultAttrs)return o}};se.prototype.addPendingMark=function(t){var n=Im(t,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)};se.prototype.removePendingMark=function(t,n){for(var r=this.open;r>=0;r--){var i=this.nodes[r],o=i.pendingMarks.lastIndexOf(t);if(o>-1)i.pendingMarks=t.removeFromSet(i.pendingMarks);else{i.activeMarks=t.removeFromSet(i.activeMarks);var a=i.popFromStashMark(t);a&&i.type&&i.type.allowsMarkType(a.type)&&(i.activeMarks=a.addToSet(i.activeMarks))}if(i==n)break}};Object.defineProperties(se.prototype,Os);function Am(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&Pf.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function Em(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Tm(e){for(var t=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];n=t.exec(e);)r.push(n[1],n[2].trim());return r}function Hl(e){var t={};for(var n in e)t[n]=e[n];return t}function Nm(e,t){var n=t.schema.nodes,r=function(a){var s=n[a];if(!!s.allowsMarkType(e)){var l=[],u=function(c){l.push(c);for(var f=0;f<c.edgeCount;f++){var h=c.edge(f),p=h.type,d=h.next;if(p==t||l.indexOf(d)<0&&u(d))return!0}};if(u(s.contentMatch))return{v:!0}}};for(var i in n){var o=r(i);if(o)return o.v}}function Im(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}var Pe=function(t,n){this.nodes=t||{},this.marks=n||{}};Pe.prototype.serializeFragment=function(t,n,r){var i=this;n===void 0&&(n={}),r||(r=As(n).createDocumentFragment());var o=r,a=null;return t.forEach(function(s){if(a||s.marks.length){a||(a=[]);for(var l=0,u=0;l<a.length&&u<s.marks.length;){var c=s.marks[u];if(!i.marks[c.type.name]){u++;continue}if(!c.eq(a[l])||c.type.spec.spanning===!1)break;l+=2,u++}for(;l<a.length;)o=a.pop(),a.pop();for(;u<s.marks.length;){var f=s.marks[u++],h=i.serializeMark(f,s.isInline,n);h&&(a.push(f,o),o.appendChild(h.dom),o=h.contentDOM||h.dom)}}o.appendChild(i.serializeNodeInner(s,n))}),r};Pe.prototype.serializeNodeInner=function(t,n){n===void 0&&(n={});var r=Pe.renderSpec(As(n),this.nodes[t.type.name](t)),i=r.dom,o=r.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");n.onContent?n.onContent(t,o,n):this.serializeFragment(t.content,n,o)}return i};Pe.prototype.serializeNode=function(t,n){n===void 0&&(n={});for(var r=this.serializeNodeInner(t,n),i=t.marks.length-1;i>=0;i--){var o=this.serializeMark(t.marks[i],t.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r};Pe.prototype.serializeMark=function(t,n,r){r===void 0&&(r={});var i=this.marks[t.type.name];return i&&Pe.renderSpec(As(r),i(t,n))};Pe.renderSpec=function(t,n,r){if(r===void 0&&(r=null),typeof n=="string")return{dom:t.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;var i=n[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));var a=null,s=r?t.createElementNS(r,i):t.createElement(i),l=n[1],u=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){u=2;for(var c in l)if(l[c]!=null){var f=c.indexOf(" ");f>0?s.setAttributeNS(c.slice(0,f),c.slice(f+1),l[c]):s.setAttribute(c,l[c])}}for(var h=u;h<n.length;h++){var p=n[h];if(p===0){if(h<n.length-1||h>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}else{var d=Pe.renderSpec(t,p,r),m=d.dom,v=d.contentDOM;if(s.appendChild(m),v){if(a)throw new RangeError("Multiple content holes");a=v}}}return{dom:s,contentDOM:a}};Pe.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Pe(this.nodesFromSchema(t),this.marksFromSchema(t)))};Pe.nodesFromSchema=function(t){var n=Ff(t.nodes);return n.text||(n.text=function(r){return r.text}),n};Pe.marksFromSchema=function(t){return Ff(t.marks)};function Ff(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function As(e){return e.document||window.document}var zf=65535,Lf=Math.pow(2,16);function Dm(e,t){return e+t*Lf}function Bf(e){return e&zf}function _m(e){return(e-(e&zf))/Lf}var ga=function(t,n,r){n===void 0&&(n=!1),r===void 0&&(r=null),this.pos=t,this.deleted=n,this.recover=r},Oe=function e(t,n){if(n===void 0&&(n=!1),!t.length&&e.empty)return e.empty;this.ranges=t,this.inverted=n};Oe.prototype.recover=function(t){var n=0,r=Bf(t);if(!this.inverted)for(var i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+_m(t)};Oe.prototype.mapResult=function(t,n){return n===void 0&&(n=1),this._map(t,n,!1)};Oe.prototype.map=function(t,n){return n===void 0&&(n=1),this._map(t,n,!0)};Oe.prototype._map=function(t,n,r){for(var i=0,o=this.inverted?2:1,a=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var l=this.ranges[s]-(this.inverted?i:0);if(l>t)break;var u=this.ranges[s+o],c=this.ranges[s+a],f=l+u;if(t<=f){var h=u?t==l?-1:t==f?1:n:n,p=l+i+(h<0?0:c);if(r)return p;var d=t==(n<0?l:f)?null:Dm(s/3,t-l);return new ga(p,n<0?t!=l:t!=f,d)}i+=c-u}return r?t+i:new ga(t+i)};Oe.prototype.touches=function(t,n){for(var r=0,i=Bf(n),o=this.inverted?2:1,a=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var l=this.ranges[s]-(this.inverted?r:0);if(l>t)break;var u=this.ranges[s+o],c=l+u;if(t<=c&&s==i*3)return!0;r+=this.ranges[s+a]-u}return!1};Oe.prototype.forEach=function(t){for(var n=this.inverted?2:1,r=this.inverted?1:2,i=0,o=0;i<this.ranges.length;i+=3){var a=this.ranges[i],s=a-(this.inverted?o:0),l=a+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];t(s,s+u,l,l+c),o+=c-u}};Oe.prototype.invert=function(){return new Oe(this.ranges,!this.inverted)};Oe.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)};Oe.offset=function(t){return t==0?Oe.empty:new Oe(t<0?[0,-t,0]:[0,0,t])};Oe.empty=new Oe([]);var Re=function(t,n,r,i){this.maps=t||[],this.from=r||0,this.to=i==null?this.maps.length:i,this.mirror=n};Re.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.maps.length),new Re(this.maps,this.mirror,t,n)};Re.prototype.copy=function(){return new Re(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)};Re.prototype.appendMap=function(t,n){this.to=this.maps.push(t),n!=null&&this.setMirror(this.maps.length-1,n)};Re.prototype.appendMapping=function(t){for(var n=0,r=this.maps.length;n<t.maps.length;n++){var i=t.getMirror(n);this.appendMap(t.maps[n],i!=null&&i<n?r+i:null)}};Re.prototype.getMirror=function(t){if(this.mirror){for(var n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}};Re.prototype.setMirror=function(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)};Re.prototype.appendMappingInverted=function(t){for(var n=t.maps.length-1,r=this.maps.length+t.maps.length;n>=0;n--){var i=t.getMirror(n);this.appendMap(t.maps[n].invert(),i!=null&&i>n?r-i-1:null)}};Re.prototype.invert=function(){var t=new Re;return t.appendMappingInverted(this),t};Re.prototype.map=function(t,n){if(n===void 0&&(n=1),this.mirror)return this._map(t,n,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,n);return t};Re.prototype.mapResult=function(t,n){return n===void 0&&(n=1),this._map(t,n,!1)};Re.prototype._map=function(t,n,r){for(var i=!1,o=this.from;o<this.to;o++){var a=this.maps[o],s=a.mapResult(t,n);if(s.recover!=null){var l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,t=this.maps[l].recover(s.recover);continue}}s.deleted&&(i=!0),t=s.pos}return r?t:new ga(t,i)};function $n(e){var t=Error.call(this,e);return t.__proto__=$n.prototype,t}$n.prototype=Object.create(Error.prototype);$n.prototype.constructor=$n;$n.prototype.name="TransformError";var he=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Re},Es={before:{configurable:!0},docChanged:{configurable:!0}};Es.before.get=function(){return this.docs.length?this.docs[0]:this.doc};he.prototype.step=function(t){var n=this.maybeStep(t);if(n.failed)throw new $n(n.failed);return this};he.prototype.maybeStep=function(t){var n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n};Es.docChanged.get=function(){return this.steps.length>0};he.prototype.addStep=function(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n};Object.defineProperties(he.prototype,Es);function Xi(){throw new Error("Override me")}var va=Object.create(null),ze=function(){};ze.prototype.apply=function(t){return Xi()};ze.prototype.getMap=function(){return Oe.empty};ze.prototype.invert=function(t){return Xi()};ze.prototype.map=function(t){return Xi()};ze.prototype.merge=function(t){return null};ze.prototype.toJSON=function(){return Xi()};ze.fromJSON=function(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=va[n.stepType];if(!r)throw new RangeError("No step type "+n.stepType+" defined");return r.fromJSON(t,n)};ze.jsonID=function(t,n){if(t in va)throw new RangeError("Duplicate use of step JSON ID "+t);return va[t]=n,n.prototype.jsonID=t,n};var Be=function(t,n){this.doc=t,this.failed=n};Be.ok=function(t){return new Be(t,null)};Be.fail=function(t){return new Be(null,t)};Be.fromReplace=function(t,n,r,i){try{return Be.ok(t.replace(n,r,i))}catch(o){if(o instanceof It)return Be.fail(o.message);throw o}};var Ht=function(e){function t(n,r,i,o){e.call(this),this.from=n,this.to=r,this.slice=i,this.structure=!!o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){return this.structure&&ya(r,this.from,this.to)?Be.fail("Structure replace would overwrite content"):Be.fromReplace(r,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new Oe([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(r){return new t(this.from,this.from+this.slice.size,r.slice(this.from,this.to))},t.prototype.map=function(r){var i=r.mapResult(this.from,1),o=r.mapResult(this.to,-1);return i.deleted&&o.deleted?null:new t(i.pos,Math.max(i.pos,o.pos),this.slice)},t.prototype.merge=function(r){if(!(r instanceof t)||r.structure||this.structure)return null;if(this.from+this.slice.size==r.from&&!this.slice.openEnd&&!r.slice.openStart){var i=this.slice.size+r.slice.size==0?I.empty:new I(this.slice.content.append(r.slice.content),this.slice.openStart,r.slice.openEnd);return new t(this.from,this.to+(r.to-r.from),i,this.structure)}else if(r.to==this.from&&!this.slice.openStart&&!r.slice.openEnd){var o=this.slice.size+r.slice.size==0?I.empty:new I(r.slice.content.append(this.slice.content),r.slice.openStart,this.slice.openEnd);return new t(r.from,this.to,o,this.structure)}else return null},t.prototype.toJSON=function(){var r={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(r.slice=this.slice.toJSON()),this.structure&&(r.structure=!0),r},t.fromJSON=function(r,i){if(typeof i.from!="number"||typeof i.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(i.from,i.to,I.fromJSON(r,i.slice),!!i.structure)},t}(ze);ze.jsonID("replace",Ht);var ft=function(e){function t(n,r,i,o,a,s,l){e.call(this),this.from=n,this.to=r,this.gapFrom=i,this.gapTo=o,this.slice=a,this.insert=s,this.structure=!!l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){if(this.structure&&(ya(r,this.from,this.gapFrom)||ya(r,this.gapTo,this.to)))return Be.fail("Structure gap-replace would overwrite content");var i=r.slice(this.gapFrom,this.gapTo);if(i.openStart||i.openEnd)return Be.fail("Gap is not a flat range");var o=this.slice.insertAt(this.insert,i.content);return o?Be.fromReplace(r,this.from,this.to,o):Be.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new Oe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(r){var i=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+i,this.from+this.insert,this.from+this.insert+i,r.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(r){var i=r.mapResult(this.from,1),o=r.mapResult(this.to,-1),a=r.map(this.gapFrom,-1),s=r.map(this.gapTo,1);return i.deleted&&o.deleted||a<i.pos||s>o.pos?null:new t(i.pos,o.pos,a,s,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var r={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(r.slice=this.slice.toJSON()),this.structure&&(r.structure=!0),r},t.fromJSON=function(r,i){if(typeof i.from!="number"||typeof i.to!="number"||typeof i.gapFrom!="number"||typeof i.gapTo!="number"||typeof i.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(i.from,i.to,i.gapFrom,i.gapTo,I.fromJSON(r,i.slice),i.insert,!!i.structure)},t}(ze);ze.jsonID("replaceAround",ft);function ya(e,t,n){for(var r=e.resolve(t),i=n-t,o=r.depth;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0)for(var a=r.node(o).maybeChild(r.indexAfter(o));i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}return!1}function Pm(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function eo(e){for(var t=e.parent,n=t.content.cutByIndex(e.startIndex,e.endIndex),r=e.depth;;--r){var i=e.$from.node(r),o=e.$from.index(r),a=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(o,a,n))return r;if(r==0||i.type.spec.isolating||!Pm(i,o,a))break}}he.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,i=e.depth,o=n.before(i+1),a=r.after(i+1),s=o,l=a,u=A.empty,c=0,f=i,h=!1;f>t;f--)h||n.index(f)>0?(h=!0,u=A.from(n.node(f).copy(u)),c++):s--;for(var p=A.empty,d=0,m=i,v=!1;m>t;m--)v||r.after(m+1)<r.end(m)?(v=!0,p=A.from(r.node(m).copy(p)),d++):l++;return this.step(new ft(s,l,o,a,new I(u.append(p),c,d),u.size-c,!0))};function Vf(e,t,n,r){r===void 0&&(r=e);var i=Rm(e,t),o=i&&Fm(r,t);return o?i.map(Wl).concat({type:t,attrs:n}).concat(o.map(Wl)):null}function Wl(e){return{type:e,attrs:null}}function Rm(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;var a=o.length?o[0]:t;return n.canReplaceWith(r,i,a)?o:null}function Fm(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.child(r),a=t.contentMatch.findWrapping(o.type);if(!a)return null;for(var s=a.length?a[a.length-1]:t,l=s.contentMatch,u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:a}he.prototype.wrap=function(e,t){for(var n=A.empty,r=t.length-1;r>=0;r--){if(n.size){var i=t[r].type.contentMatch.matchFragment(n);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=A.from(t[r].type.create(t[r].attrs,n))}var o=e.start,a=e.end;return this.step(new ft(o,a,o,a,new I(n,0,0),t.length,!0))};he.prototype.setBlockType=function(e,t,n,r){var i=this;if(t===void 0&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(e,t,function(a,s){if(a.isTextblock&&!a.hasMarkup(n,r)&&zm(i.doc,i.mapping.slice(o).map(s),n)){i.clearIncompatible(i.mapping.slice(o).map(s,1),n);var l=i.mapping.slice(o),u=l.map(s,1),c=l.map(s+a.nodeSize,1);return i.step(new ft(u,c,u+1,c-1,new I(A.from(n.create(r,null,a.marks)),0,0),1,!0)),!1}}),this};function zm(e,t,n){var r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}he.prototype.setNodeMarkup=function(e,t,n,r){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var o=t.create(n,null,r||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,o);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new ft(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new I(A.from(o),0,0),1,!0))};function kr(e,t,n,r){n===void 0&&(n=1);var i=e.resolve(t),o=i.depth-n,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var s=i.depth-1,l=n-2;s>o;s--,l--){var u=i.node(s),c=i.index(s);if(u.type.spec.isolating)return!1;var f=u.content.cutByIndex(c,u.childCount),h=r&&r[l]||u;if(h!=u&&(f=f.replaceChild(0,h.type.create(h.attrs))),!u.canReplace(c+1,u.childCount)||!h.type.validContent(f))return!1}var p=i.indexAfter(o),d=r&&r[0];return i.node(o).canReplaceWith(p,p,d?d.type:i.node(o+1).type)}he.prototype.split=function(e,t,n){t===void 0&&(t=1);for(var r=this.doc.resolve(e),i=A.empty,o=A.empty,a=r.depth,s=r.depth-t,l=t-1;a>s;a--,l--){i=A.from(r.node(a).copy(i));var u=n&&n[l];o=A.from(u?u.type.create(u.attrs,o):r.node(a).copy(o))}return this.step(new Ht(e,e,new I(i.append(o),t,t),!0))};function Ts(e,t){var n=e.resolve(t),r=n.index();return Lm(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Lm(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}he.prototype.join=function(e,t){t===void 0&&(t=1);var n=new Ht(e-t,e+t,I.empty,!0);return this.step(n)};function Bm(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}function Vm(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var i=n.content,o=0;o<n.openStart;o++)i=i.firstChild.content;for(var a=1;a<=(n.openStart==0&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,u=r.index(s)+(l>0?1:0),c=r.node(s),f=!1;if(a==1)f=c.canReplace(u,u,i);else{var h=c.contentMatchAt(u).findWrapping(i.firstChild.type);f=h&&c.canReplaceWith(u,u,h[0])}if(f)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function Ns(e,t,n){for(var r=[],i=0;i<e.childCount;i++){var o=e.child(i);o.content.size&&(o=o.copy(Ns(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return A.fromArray(r)}var to=function(e){function t(n,r,i){e.call(this),this.from=n,this.to=r,this.mark=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){var i=this,o=r.slice(this.from,this.to),a=r.resolve(this.from),s=a.node(a.sharedDepth(this.to)),l=new I(Ns(o.content,function(u,c){return!u.isAtom||!c.type.allowsMarkType(i.mark.type)?u:u.mark(i.mark.addToSet(u.marks))},s),o.openStart,o.openEnd);return Be.fromReplace(r,this.from,this.to,l)},t.prototype.invert=function(){return new Vr(this.from,this.to,this.mark)},t.prototype.map=function(r){var i=r.mapResult(this.from,1),o=r.mapResult(this.to,-1);return i.deleted&&o.deleted||i.pos>=o.pos?null:new t(i.pos,o.pos,this.mark)},t.prototype.merge=function(r){if(r instanceof t&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from)return new t(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(r,i){if(typeof i.from!="number"||typeof i.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(i.from,i.to,r.markFromJSON(i.mark))},t}(ze);ze.jsonID("addMark",to);var Vr=function(e){function t(n,r,i){e.call(this),this.from=n,this.to=r,this.mark=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){var i=this,o=r.slice(this.from,this.to),a=new I(Ns(o.content,function(s){return s.mark(i.mark.removeFromSet(s.marks))}),o.openStart,o.openEnd);return Be.fromReplace(r,this.from,this.to,a)},t.prototype.invert=function(){return new to(this.from,this.to,this.mark)},t.prototype.map=function(r){var i=r.mapResult(this.from,1),o=r.mapResult(this.to,-1);return i.deleted&&o.deleted||i.pos>=o.pos?null:new t(i.pos,o.pos,this.mark)},t.prototype.merge=function(r){if(r instanceof t&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from)return new t(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(r,i){if(typeof i.from!="number"||typeof i.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(i.from,i.to,r.markFromJSON(i.mark))},t}(ze);ze.jsonID("removeMark",Vr);he.prototype.addMark=function(e,t,n){var r=this,i=[],o=[],a=null,s=null;return this.doc.nodesBetween(e,t,function(l,u,c){if(!!l.isInline){var f=l.marks;if(!n.isInSet(f)&&c.type.allowsMarkType(n.type)){for(var h=Math.max(u,e),p=Math.min(u+l.nodeSize,t),d=n.addToSet(f),m=0;m<f.length;m++)f[m].isInSet(d)||(a&&a.to==h&&a.mark.eq(f[m])?a.to=p:i.push(a=new Vr(h,p,f[m])));s&&s.to==h?s.to=p:o.push(s=new to(h,p,n))}}}),i.forEach(function(l){return r.step(l)}),o.forEach(function(l){return r.step(l)}),this};he.prototype.removeMark=function(e,t,n){var r=this;n===void 0&&(n=null);var i=[],o=0;return this.doc.nodesBetween(e,t,function(a,s){if(!!a.isInline){o++;var l=null;if(n instanceof Xt)for(var u=a.marks,c;c=n.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u);else n?n.isInSet(a.marks)&&(l=[n]):l=a.marks;if(l&&l.length)for(var f=Math.min(s+a.nodeSize,t),h=0;h<l.length;h++){for(var p=l[h],d=void 0,m=0;m<i.length;m++){var v=i[m];v.step==o-1&&p.eq(i[m].style)&&(d=v)}d?(d.to=f,d.step=o):i.push({style:p,from:Math.max(s,e),to:f,step:o})}}}),i.forEach(function(a){return r.step(new Vr(a.from,a.to,a.style))}),this};he.prototype.clearIncompatible=function(e,t,n){n===void 0&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),i=[],o=e+1,a=0;a<r.childCount;a++){var s=r.child(a),l=o+s.nodeSize,u=n.matchType(s.type,s.attrs);if(!u)i.push(new Ht(o,l,I.empty));else{n=u;for(var c=0;c<s.marks.length;c++)t.allowsMarkType(s.marks[c].type)||this.step(new Vr(o,l,s.marks[c]))}o=l}if(!n.validEnd){var f=n.fillBefore(A.empty,!0);this.replace(o,o,new I(f,0,0))}for(var h=i.length-1;h>=0;h--)this.step(i[h]);return this};function Is(e,t,n,r){if(n===void 0&&(n=t),r===void 0&&(r=I.empty),t==n&&!r.size)return null;var i=e.resolve(t),o=e.resolve(n);return $f(i,o,r)?new Ht(t,n,r):new pt(i,o,r).fit()}he.prototype.replace=function(e,t,n){t===void 0&&(t=e),n===void 0&&(n=I.empty);var r=Is(this.doc,e,t,n);return r&&this.step(r),this};he.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new I(A.from(n),0,0))};he.prototype.delete=function(e,t){return this.replace(e,t,I.empty)};he.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};function $f(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}var pt=function(t,n,r){this.$to=n,this.$from=t,this.unplaced=r,this.frontier=[];for(var i=0;i<=t.depth;i++){var o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}this.placed=A.empty;for(var a=t.depth;a>0;a--)this.placed=A.from(t.node(a).copy(this.placed))},Hf={depth:{configurable:!0}};Hf.depth.get=function(){return this.frontier.length-1};pt.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var n=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,i=this.$from,o=this.close(n<0?this.$to:i.doc.resolve(n));if(!o)return null;for(var a=this.placed,s=i.depth,l=o.depth;s&&l&&a.childCount==1;)a=a.firstChild.content,s--,l--;var u=new I(a,s,l);if(n>-1)return new ft(i.pos,n,this.$to.pos,this.$to.end(),u,r);if(u.size||i.pos!=this.$to.pos)return new Ht(i.pos,o.pos,u)};pt.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var n=this.unplaced.openStart;n>=0;n--){var r=void 0,i=void 0;n?(i=Ds(this.unplaced.content,n-1).firstChild,r=i.content):r=this.unplaced.content;for(var o=r.firstChild,a=this.depth;a>=0;a--){var s=this.frontier[a],l=s.type,u=s.match,c=void 0,f=void 0;if(t==1&&(o?u.matchType(o.type)||(f=u.fillBefore(A.from(o),!1)):l.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:a,parent:i,inject:f};if(t==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:i,wrap:c};if(i&&u.matchType(i.type))break}}};pt.prototype.openMore=function(){var t=this.unplaced,n=t.content,r=t.openStart,i=t.openEnd,o=Ds(n,r);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new I(n,r+1,Math.max(i,o.size+r>=n.size-i?r+1:0)),!0)};pt.prototype.dropNode=function(){var t=this.unplaced,n=t.content,r=t.openStart,i=t.openEnd,o=Ds(n,r);if(o.childCount<=1&&r>0){var a=n.size-r<=r+o.size;this.unplaced=new I(Ar(n,r-1,1),r-1,a?r-1:i)}else this.unplaced=new I(Ar(n,r,1),r,i)};pt.prototype.placeNodes=function(t){for(var n=t.sliceDepth,r=t.frontierDepth,i=t.parent,o=t.inject,a=t.wrap;this.depth>r;)this.closeFrontierNode();if(a)for(var s=0;s<a.length;s++)this.openFrontierNode(a[s]);var l=this.unplaced,u=i?i.content:l.content,c=l.openStart-n,f=0,h=[],p=this.frontier[r],d=p.match,m=p.type;if(o){for(var v=0;v<o.childCount;v++)h.push(o.child(v));d=d.matchFragment(o)}for(var g=u.size+n-(l.content.size-l.openEnd);f<u.childCount;){var y=u.child(f),C=d.matchType(y.type);if(!C)break;f++,(f>1||c==0||y.content.size)&&(d=C,h.push(Wf(y.mark(m.allowedMarks(y.marks)),f==1?c:0,f==u.childCount?g:-1)))}var S=f==u.childCount;S||(g=-1),this.placed=$r(this.placed,r,A.from(h)),this.frontier[r].match=d,S&&g<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var O=0,w=u;O<g;O++){var E=w.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),w=E.content}this.unplaced=S?n==0?I.empty:new I(Ar(l.content,n-1,1),n-1,g<0?l.openEnd:n-1):new I(Ar(l.content,n,f),l.openStart,l.openEnd)};pt.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t=this.frontier[this.depth],n;if(!t.type.isTextblock||!ka(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;for(var r=this.$to,i=r.depth,o=this.$to.after(i);i>1&&o==this.$to.end(--i);)++o;return o};pt.prototype.findCloseLevel=function(t){e:for(var n=Math.min(this.depth,t.depth);n>=0;n--){var r=this.frontier[n],i=r.match,o=r.type,a=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),s=ka(t,n,o,i,a);if(!!s){for(var l=n-1;l>=0;l--){var u=this.frontier[l],c=u.match,f=u.type,h=ka(t,l,f,c,!0);if(!h||h.childCount)continue e}return{depth:n,fit:s,move:a?t.doc.resolve(t.after(n+1)):t}}}};pt.prototype.close=function(t){var n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=$r(this.placed,n.depth,n.fit)),t=n.move;for(var r=n.depth+1;r<=t.depth;r++){var i=t.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,o)}return t};pt.prototype.openFrontierNode=function(t,n,r){var i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=$r(this.placed,this.depth,A.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})};pt.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),n=t.match.fillBefore(A.empty,!0);n.childCount&&(this.placed=$r(this.placed,this.frontier.length,n))};Object.defineProperties(pt.prototype,Hf);function Ar(e,t,n){return t==0?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(Ar(e.firstChild.content,t-1,n)))}function $r(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy($r(e.lastChild.content,t-1,n)))}function Ds(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function Wf(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,Wf(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(A.empty,!0)))),e.copy(r)}function ka(e,t,n,r,i){var o=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==o.childCount&&!n.compatibleContent(o.type))return null;var s=r.fillBefore(o.content,!0,a);return s&&!$m(n,o.content,a)?s:null}function $m(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}he.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),i=this.doc.resolve(t);if($f(r,i,n))return this.step(new Ht(e,t,n));var o=qf(r,this.doc.resolve(t));o[o.length-1]==0&&o.pop();var a=-(r.depth+1);o.unshift(a);for(var s=r.depth,l=r.pos-1;s>0;s--,l--){var u=r.node(s).type.spec;if(u.defining||u.isolating)break;o.indexOf(s)>-1?a=s:r.before(s)==l&&o.splice(1,0,-s)}for(var c=o.indexOf(a),f=[],h=n.openStart,p=n.content,d=0;;d++){var m=p.firstChild;if(f.push(m),d==n.openStart)break;p=m.content}h>0&&f[h-1].type.spec.defining&&r.node(c).type!=f[h-1].type?h-=1:h>=2&&f[h-1].isTextblock&&f[h-2].type.spec.defining&&r.node(c).type!=f[h-2].type&&(h-=2);for(var v=n.openStart;v>=0;v--){var g=(v+h+1)%(n.openStart+1),y=f[g];if(!!y)for(var C=0;C<o.length;C++){var S=o[(C+c)%o.length],O=!0;S<0&&(O=!1,S=-S);var w=r.node(S-1),E=r.index(S-1);if(w.canReplaceWith(E,E,y.type,y.marks))return this.replace(r.before(S),O?i.after(S):t,new I(jf(n.content,0,n.openStart,g),g,n.openEnd))}}for(var R=this.steps.length,P=o.length-1;P>=0&&(this.replace(e,t,n),!(this.steps.length>R));P--){var F=o[P];F<0||(e=r.before(F),t=i.after(F))}return this};function jf(e,t,n,r,i){if(t<n){var o=e.firstChild;e=e.replaceChild(0,o.copy(jf(o.content,t+1,n,r,o)))}if(t>r){var a=i.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(A.empty,!0))}return e}he.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=Bm(this.doc,e,n.type);r!=null&&(e=t=r)}return this.replaceRange(e,t,new I(A.from(n),0,0))};he.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),i=qf(n,r),o=0;o<i.length;o++){var a=i[o],s=o==i.length-1;if(s&&a==0||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(a>0&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var l=1;l<=n.depth&&l<=r.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l)&&r.end(l)-t!=r.depth-l)return this.delete(n.before(l),t);return this.delete(e,t)};function qf(e,t){for(var n=[],r=Math.min(e.depth,t.depth),i=r;i>=0;i--){var o=e.start(i);if(o<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&n.push(i)}return n}var ba=Object.create(null),B=function(t,n,r){this.ranges=r||[new Jf(t.min(n),t.max(n))],this.$anchor=t,this.$head=n},sn={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};sn.anchor.get=function(){return this.$anchor.pos};sn.head.get=function(){return this.$head.pos};sn.from.get=function(){return this.$from.pos};sn.to.get=function(){return this.$to.pos};sn.$from.get=function(){return this.ranges[0].$from};sn.$to.get=function(){return this.ranges[0].$to};sn.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0};B.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)};B.prototype.replace=function(t,n){n===void 0&&(n=I.empty);for(var r=n.content.lastChild,i=null,o=0;o<n.openEnd;o++)i=r,r=r.lastChild;for(var a=t.steps.length,s=this.ranges,l=0;l<s.length;l++){var u=s[l],c=u.$from,f=u.$to,h=t.mapping.slice(a);t.replaceRange(h.map(c.pos),h.map(f.pos),l?I.empty:n),l==0&&Kf(t,a,(r?r.isInline:i&&i.isTextblock)?-1:1)}};B.prototype.replaceWith=function(t,n){for(var r=t.steps.length,i=this.ranges,o=0;o<i.length;o++){var a=i[o],s=a.$from,l=a.$to,u=t.mapping.slice(r),c=u.map(s.pos),f=u.map(l.pos);o?t.deleteRange(c,f):(t.replaceRangeWith(c,f,n),Kf(t,r,n.isInline?-1:1))}};B.findFrom=function(t,n,r){var i=t.parent.inlineContent?new U(t):zn(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(var o=t.depth-1;o>=0;o--){var a=n<0?zn(t.node(0),t.node(o),t.before(o+1),t.index(o),n,r):zn(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,n,r);if(a)return a}};B.near=function(t,n){return n===void 0&&(n=1),this.findFrom(t,n)||this.findFrom(t,-n)||new Wt(t.node(0))};B.atStart=function(t){return zn(t,t,0,0,1)||new Wt(t)};B.atEnd=function(t){return zn(t,t,t.content.size,t.childCount,-1)||new Wt(t)};B.fromJSON=function(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=ba[n.type];if(!r)throw new RangeError("No selection type "+n.type+" defined");return r.fromJSON(t,n)};B.jsonID=function(t,n){if(t in ba)throw new RangeError("Duplicate use of selection JSON ID "+t);return ba[t]=n,n.prototype.jsonID=t,n};B.prototype.getBookmark=function(){return U.between(this.$anchor,this.$head).getBookmark()};Object.defineProperties(B.prototype,sn);B.prototype.visible=!0;var Jf=function(t,n){this.$from=t,this.$to=n},U=function(e){function t(r,i){i===void 0&&(i=r),e.call(this,r,i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(i,o){var a=i.resolve(o.map(this.head));if(!a.parent.inlineContent)return e.near(a);var s=i.resolve(o.map(this.anchor));return new t(s.parent.inlineContent?s:a,a)},t.prototype.replace=function(i,o){if(o===void 0&&(o=I.empty),e.prototype.replace.call(this,i,o),o==I.empty){var a=this.$from.marksAcross(this.$to);a&&i.ensureMarks(a)}},t.prototype.eq=function(i){return i instanceof t&&i.anchor==this.anchor&&i.head==this.head},t.prototype.getBookmark=function(){return new Er(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(i,o){if(typeof o.anchor!="number"||typeof o.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(i.resolve(o.anchor),i.resolve(o.head))},t.create=function(i,o,a){a===void 0&&(a=o);var s=i.resolve(o);return new this(s,a==o?s:i.resolve(a))},t.between=function(i,o,a){var s=i.pos-o.pos;if((!a||s)&&(a=s>=0?1:-1),!o.parent.inlineContent){var l=e.findFrom(o,a,!0)||e.findFrom(o,-a,!0);if(l)o=l.$head;else return e.near(o,a)}return i.parent.inlineContent||(s==0?i=o:(i=(e.findFrom(i,-a,!0)||e.findFrom(i,a,!0)).$anchor,i.pos<o.pos!=s<0&&(i=o))),new t(i,o)},Object.defineProperties(t.prototype,n),t}(B);B.jsonID("text",U);var Er=function(t,n){this.anchor=t,this.head=n};Er.prototype.map=function(t){return new Er(t.map(this.anchor),t.map(this.head))};Er.prototype.resolve=function(t){return U.between(t.resolve(this.anchor),t.resolve(this.head))};var $=function(e){function t(n){var r=n.nodeAfter,i=n.node(0).resolve(n.pos+r.nodeSize);e.call(this,n,i),this.node=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,i){var o=i.mapResult(this.anchor),a=o.deleted,s=o.pos,l=r.resolve(s);return a?e.near(l):new t(l)},t.prototype.content=function(){return new I(A.from(this.node),0,0)},t.prototype.eq=function(r){return r instanceof t&&r.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new Ri(this.anchor)},t.fromJSON=function(r,i){if(typeof i.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(r.resolve(i.anchor))},t.create=function(r,i){return new this(r.resolve(i))},t.isSelectable=function(r){return!r.isText&&r.type.spec.selectable!==!1},t}(B);$.prototype.visible=!1;B.jsonID("node",$);var Ri=function(t){this.anchor=t};Ri.prototype.map=function(t){var n=t.mapResult(this.anchor),r=n.deleted,i=n.pos;return r?new Er(i,i):new Ri(i)};Ri.prototype.resolve=function(t){var n=t.resolve(this.anchor),r=n.nodeAfter;return r&&$.isSelectable(r)?new $(n):B.near(n)};var Wt=function(e){function t(n){e.call(this,n.resolve(0),n.resolve(n.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(r,i){if(i===void 0&&(i=I.empty),i==I.empty){r.delete(0,r.doc.content.size);var o=e.atStart(r.doc);o.eq(r.selection)||r.setSelection(o)}else e.prototype.replace.call(this,r,i)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(r){return new t(r)},t.prototype.map=function(r){return new t(r)},t.prototype.eq=function(r){return r instanceof t},t.prototype.getBookmark=function(){return Hm},t}(B);B.jsonID("all",Wt);var Hm={map:function(){return this},resolve:function(t){return new Wt(t)}};function zn(e,t,n,r,i,o){if(t.inlineContent)return U.create(e,n);for(var a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){var s=t.child(a);if(s.isAtom){if(!o&&$.isSelectable(s))return $.create(e,n-(i<0?s.nodeSize:0))}else{var l=zn(e,s,n+i,i<0?s.childCount:0,i,o);if(l)return l}n+=s.nodeSize*i}}function Kf(e,t,n){var r=e.steps.length-1;if(!(r<t)){var i=e.steps[r];if(i instanceof Ht||i instanceof ft){var o=e.mapping.maps[r],a;o.forEach(function(s,l,u,c){a==null&&(a=c)}),e.setSelection(B.near(e.doc.resolve(a),n))}}}var jl=1,Xr=2,ql=4,Wm=function(e){function t(r){e.call(this,r.doc),this.time=Date.now(),this.curSelection=r.selection,this.curSelectionFor=0,this.storedMarks=r.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(i){if(i.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=i,this.curSelectionFor=this.steps.length,this.updated=(this.updated|jl)&~Xr,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&jl)>0},t.prototype.setStoredMarks=function(i){return this.storedMarks=i,this.updated|=Xr,this},t.prototype.ensureMarks=function(i){return H.sameSet(this.storedMarks||this.selection.$from.marks(),i)||this.setStoredMarks(i),this},t.prototype.addStoredMark=function(i){return this.ensureMarks(i.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(i){return this.ensureMarks(i.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&Xr)>0},t.prototype.addStep=function(i,o){e.prototype.addStep.call(this,i,o),this.updated=this.updated&~Xr,this.storedMarks=null},t.prototype.setTime=function(i){return this.time=i,this},t.prototype.replaceSelection=function(i){return this.selection.replace(this,i),this},t.prototype.replaceSelectionWith=function(i,o){var a=this.selection;return o!==!1&&(i=i.mark(this.storedMarks||(a.empty?a.$from.marks():a.$from.marksAcross(a.$to)||H.none))),a.replaceWith(this,i),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(i,o,a){a===void 0&&(a=o);var s=this.doc.type.schema;if(o==null)return i?this.replaceSelectionWith(s.text(i),!0):this.deleteSelection();if(!i)return this.deleteRange(o,a);var l=this.storedMarks;if(!l){var u=this.doc.resolve(o);l=a==o?u.marks():u.marksAcross(this.doc.resolve(a))}return this.replaceRangeWith(o,a,s.text(i,l)),this.selection.empty||this.setSelection(B.near(this.selection.$to)),this},t.prototype.setMeta=function(i,o){return this.meta[typeof i=="string"?i:i.key]=o,this},t.prototype.getMeta=function(i){return this.meta[typeof i=="string"?i:i.key]},n.isGeneric.get=function(){for(var r in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=ql,this},n.scrolledIntoView.get=function(){return(this.updated&ql)>0},Object.defineProperties(t.prototype,n),t}(he);function Jl(e,t){return!t||!e?e:e.bind(t)}var fr=function(t,n,r){this.name=t,this.init=Jl(n.init,r),this.apply=Jl(n.apply,r)},jm=[new fr("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new fr("selection",{init:function(t,n){return t.selection||B.atStart(n.doc)},apply:function(t){return t.selection}}),new fr("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,n,r,i){return i.selection.$cursor?t.storedMarks:null}}),new fr("scrollToSelection",{init:function(){return 0},apply:function(t,n){return t.scrolledIntoView?n+1:n}})],_s=function(t,n){var r=this;this.schema=t,this.fields=jm.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),n&&n.forEach(function(i){if(r.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");r.plugins.push(i),r.pluginsByKey[i.key]=i,i.spec.state&&r.fields.push(new fr(i.key,i.spec.state,i))})},Fe=function(t){this.config=t},no={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};no.schema.get=function(){return this.config.schema};no.plugins.get=function(){return this.config.plugins};Fe.prototype.apply=function(t){return this.applyTransaction(t).state};Fe.prototype.filterTransaction=function(t,n){n===void 0&&(n=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=n){var i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0};Fe.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var n=[t],r=this.applyInner(t),i=null;;){for(var o=!1,a=0;a<this.config.plugins.length;a++){var s=this.config.plugins[a];if(s.spec.appendTransaction){var l=i?i[a].n:0,u=i?i[a].state:this,c=l<n.length&&s.spec.appendTransaction.call(s,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,a)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(var f=0;f<this.config.plugins.length;f++)i.push(f<a?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),o=!0}i&&(i[a]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}};Fe.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new Fe(this.config),r=this.config.fields,i=0;i<r.length;i++){var o=r[i];n[o.name]=o.apply(t,this[o.name],this,n)}for(var a=0;a<Tr.length;a++)Tr[a](this,t,n);return n};no.tr.get=function(){return new Wm(this)};Fe.create=function(t){for(var n=new _s(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Fe(n),i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r};Fe.prototype.reconfigure=function(t){for(var n=new _s(this.schema,t.plugins),r=n.fields,i=new Fe(n),o=0;o<r.length;o++){var a=r[o].name;i[a]=this.hasOwnProperty(a)?this[a]:r[o].init(t,i)}return i};Fe.prototype.toJSON=function(t){var n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(function(a){return a.toJSON()})),t&&typeof t=="object")for(var r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");var i=t[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n};Fe.fromJSON=function(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var i=new _s(t.schema,t.plugins),o=new Fe(i);return i.fields.forEach(function(a){if(a.name=="doc")o.doc=W.fromJSON(t.schema,n.doc);else if(a.name=="selection")o.selection=B.fromJSON(o.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var s in r){var l=r[s],u=l.spec.state;if(l.key==a.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,s)){o[a.name]=u.fromJSON.call(l,t,n[s],o);return}}o[a.name]=a.init(t,o)}}),o};Fe.addApplyListener=function(t){Tr.push(t)};Fe.removeApplyListener=function(t){var n=Tr.indexOf(t);n>-1&&Tr.splice(n,1)};Object.defineProperties(Fe.prototype,no);var Tr=[];function Uf(e,t,n){for(var r in e){var i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=Uf(i,t,{})),n[r]=i}return n}var _t=function(t){this.props={},t.props&&Uf(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:Gf("plugin")};_t.prototype.getState=function(t){return t[this.key]};var To=Object.create(null);function Gf(e){return e in To?e+"$"+ ++To[e]:(To[e]=0,e+"$")}var Pt=function(t){t===void 0&&(t="key"),this.key=Gf(t)};Pt.prototype.get=function(t){return t.config.pluginsByKey[this.key]};Pt.prototype.getState=function(t){return t[this.key]};function Qf(e,t){return e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function qm(e,t,n){var r=e.selection,i=r.$cursor;if(!i||(n?!n.endOfTextblock("backward",e):i.parentOffset>0))return!1;var o=Zf(i);if(!o){var a=i.blockRange(),s=a&&eo(a);return s==null?!1:(t&&t(e.tr.lift(a,s).scrollIntoView()),!0)}var l=o.nodeBefore;if(!l.type.spec.isolating&&Xf(e,o,t))return!0;if(i.parent.content.size==0&&(Hn(l,"end")||$.isSelectable(l))){var u=Is(e.doc,i.before(),i.after(),I.empty);if(u.slice.size<u.to-u.from){if(t){var c=e.tr.step(u);c.setSelection(Hn(l,"end")?B.findFrom(c.doc.resolve(c.mapping.map(o.pos,-1)),-1):$.create(c.doc,o.pos-l.nodeSize)),t(c.scrollIntoView())}return!0}}return l.isAtom&&o.depth==i.depth-1?(t&&t(e.tr.delete(o.pos-l.nodeSize,o.pos).scrollIntoView()),!0):!1}function Hn(e,t,n){for(;e;e=t=="start"?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(n&&e.childCount!=1)return!1}return!1}function Jm(e,t,n){var r=e.selection,i=r.$head,o=r.empty,a=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;a=Zf(i)}var s=a&&a.nodeBefore;return!s||!$.isSelectable(s)?!1:(t&&t(e.tr.setSelection($.create(e.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)}function Zf(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Km(e,t,n){var r=e.selection,i=r.$cursor;if(!i||(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size))return!1;var o=Yf(i);if(!o)return!1;var a=o.nodeAfter;if(Xf(e,o,t))return!0;if(i.parent.content.size==0&&(Hn(a,"start")||$.isSelectable(a))){var s=Is(e.doc,i.before(),i.after(),I.empty);if(s.slice.size<s.to-s.from){if(t){var l=e.tr.step(s);l.setSelection(Hn(a,"start")?B.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):$.create(l.doc,l.mapping.map(o.pos))),t(l.scrollIntoView())}return!0}}return a.isAtom&&o.depth==i.depth-1?(t&&t(e.tr.delete(o.pos,o.pos+a.nodeSize).scrollIntoView()),!0):!1}function Um(e,t,n){var r=e.selection,i=r.$head,o=r.empty,a=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;a=Yf(i)}var s=a&&a.nodeAfter;return!s||!$.isSelectable(s)?!1:(t&&t(e.tr.setSelection($.create(e.doc,a.pos)).scrollIntoView()),!0)}function Yf(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function Gm(e,t){var n=e.selection,r=n.$head,i=n.$anchor;return!r.parent.type.spec.code||!r.sameParent(i)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)}function Ps(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function Qm(e,t){var n=e.selection,r=n.$head,i=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(i))return!1;var o=r.node(-1),a=r.indexAfter(-1),s=Ps(o.contentMatchAt(a));if(!o.canReplaceWith(a,a,s))return!1;if(t){var l=r.after(),u=e.tr.replaceWith(l,l,s.createAndFill());u.setSelection(B.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0}function Zm(e,t){var n=e.selection,r=n.$from,i=n.$to;if(n instanceof Wt||r.parent.inlineContent||i.parent.inlineContent)return!1;var o=Ps(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){var a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=e.tr.insert(a,o.createAndFill());s.setSelection(U.create(s.doc,a+1)),t(s.scrollIntoView())}return!0}function Ym(e,t){var n=e.selection,r=n.$cursor;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var i=r.before();if(kr(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}var o=r.blockRange(),a=o&&eo(o);return a==null?!1:(t&&t(e.tr.lift(o,a).scrollIntoView()),!0)}function Xm(e,t){var n=e.selection,r=n.$from,i=n.$to;if(e.selection instanceof $&&e.selection.node.isBlock)return!r.parentOffset||!kr(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var o=i.parentOffset==i.parent.content.size,a=e.tr;(e.selection instanceof U||e.selection instanceof Wt)&&a.deleteSelection();var s=r.depth==0?null:Ps(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=o&&s?[{type:s}]:null,u=kr(a.doc,a.mapping.map(r.pos),1,l);if(!l&&!u&&kr(a.doc,a.mapping.map(r.pos),1,s&&[{type:s}])&&(l=[{type:s}],u=!0),u&&(a.split(a.mapping.map(r.pos),1,l),!o&&!r.parentOffset&&r.parent.type!=s)){var c=a.mapping.map(r.before()),f=a.doc.resolve(c);r.node(-1).canReplaceWith(f.index(),f.index()+1,s)&&a.setNodeMarkup(a.mapping.map(r.before()),s)}t(a.scrollIntoView())}return!0}function eg(e,t){return t&&t(e.tr.setSelection(new Wt(e.doc))),!0}function tg(e,t,n){var r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(i.isTextblock||Ts(e.doc,t.pos))?!1:(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0)}function Xf(e,t,n){var r=t.nodeBefore,i=t.nodeAfter,o,a;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(tg(e,t,n))return!0;var s=t.parent.canReplace(t.index(),t.index()+1);if(s&&(o=(a=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(n){for(var l=t.pos+i.nodeSize,u=A.empty,c=o.length-1;c>=0;c--)u=A.from(o[c].create(null,u));u=A.from(r.copy(u));var f=e.tr.step(new ft(t.pos-1,l,t.pos,l,new I(u,1,0),o.length,!0)),h=l+2*o.length;Ts(f.doc,h)&&f.join(h),n(f.scrollIntoView())}return!0}var p=B.findFrom(t,1),d=p&&p.$from.blockRange(p.$to),m=d&&eo(d);if(m!=null&&m>=t.depth)return n&&n(e.tr.lift(d,m).scrollIntoView()),!0;if(s&&Hn(i,"start",!0)&&Hn(r,"end")){for(var v=r,g=[];g.push(v),!v.isTextblock;)v=v.lastChild;for(var y=i,C=1;!y.isTextblock;y=y.firstChild)C++;if(v.canReplace(v.childCount,v.childCount,y.content)){if(n){for(var S=A.empty,O=g.length-1;O>=0;O--)S=A.from(g[O].copy(S));var w=e.tr.step(new ft(t.pos-g.length,t.pos+i.nodeSize,t.pos+C,t.pos+i.nodeSize-C,new I(S,g.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function eh(e){return function(t,n){for(var r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(t.tr.setSelection(U.create(t.doc,e<0?i.start(o):i.end(o)))),!0):!1}}var th=eh(-1),nh=eh(1);function ro(e,t){return function(n,r){var i=n.selection,o=i.$from,a=i.$to,s=o.blockRange(a),l=s&&Vf(s,e,t);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function Rs(e,t){return function(n,r){var i=n.selection,o=i.from,a=i.to,s=!1;return n.doc.nodesBetween(o,a,function(l,u){if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)s=!0;else{var c=n.doc.resolve(u),f=c.index();s=c.parent.canReplaceWith(f,f+1,e)}}),s?(r&&r(n.tr.setBlockType(o,a,e,t).scrollIntoView()),!0):!1}}function ng(e,t,n){for(var r=function(a){var s=t[a],l=s.$from,u=s.$to,c=l.depth==0?e.type.allowsMarkType(n):!1;if(e.nodesBetween(l.pos,u.pos,function(f){if(c)return!1;c=f.inlineContent&&f.type.allowsMarkType(n)}),c)return{v:!0}},i=0;i<t.length;i++){var o=r(i);if(o)return o.v}return!1}function Hr(e,t){return function(n,r){var i=n.selection,o=i.empty,a=i.$cursor,s=i.ranges;if(o&&!a||!ng(n.doc,s,e))return!1;if(r)if(a)e.isInSet(n.storedMarks||a.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{for(var l=!1,u=n.tr,c=0;!l&&c<s.length;c++){var f=s[c],h=f.$from,p=f.$to;l=n.doc.rangeHasMark(h.pos,p.pos,e)}for(var d=0;d<s.length;d++){var m=s[d],v=m.$from,g=m.$to;if(l)u.removeMark(v.pos,g.pos,e);else{var y=v.pos,C=g.pos,S=v.nodeAfter,O=g.nodeBefore,w=S&&S.isText?/^\s*/.exec(S.text)[0].length:0,E=O&&O.isText?/\s*$/.exec(O.text)[0].length:0;y+w<C&&(y+=w,C-=E),u.addMark(y,C,e.create(t))}}r(u.scrollIntoView())}return!0}}function Fs(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(n,r,i){for(var o=0;o<e.length;o++)if(e[o](n,r,i))return!0;return!1}}var No=Fs(Qf,qm,Jm),Kl=Fs(Qf,Km,Um),gt={Enter:Fs(Gm,Zm,Ym,Xm),"Mod-Enter":Qm,Backspace:No,"Mod-Backspace":No,"Shift-Backspace":No,Delete:Kl,"Mod-Delete":Kl,"Mod-a":eg},rh={"Ctrl-h":gt.Backspace,"Alt-Backspace":gt["Mod-Backspace"],"Ctrl-d":gt.Delete,"Ctrl-Alt-Backspace":gt["Mod-Delete"],"Alt-Delete":gt["Mod-Delete"],"Alt-d":gt["Mod-Delete"],"Ctrl-a":th,"Ctrl-e":nh};for(var Ul in gt)rh[Ul]=gt[Ul];gt.Home=th;gt.End=nh;var rg=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"?os.platform()=="darwin":!1,ig=rg?rh:gt,en={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Fi={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Gl=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),og=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),ag=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),Ql=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),sg=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),lg=Gl&&(Ql||+Gl[1]<57)||ag&&Ql;for(var Me=0;Me<10;Me++)en[48+Me]=en[96+Me]=String(Me);for(var Me=1;Me<=24;Me++)en[Me+111]="F"+Me;for(var Me=65;Me<=90;Me++)en[Me]=String.fromCharCode(Me+32),Fi[Me]=String.fromCharCode(Me);for(var Io in en)Fi.hasOwnProperty(Io)||(Fi[Io]=en[Io]);function ug(e){var t=lg&&(e.ctrlKey||e.altKey||e.metaKey)||(og||sg)&&e.shiftKey&&e.key&&e.key.length==1,n=!t&&e.key||(e.shiftKey?Fi:en)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var cg=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function fg(e){var t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");for(var r,i,o,a,s=0;s<t.length-1;s++){var l=t[s];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))cg?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function hg(e){var t=Object.create(null);for(var n in e)t[fg(n)]=e[n];return t}function Do(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n!==!1&&t.shiftKey&&(e="Shift-"+e),e}function ih(e){return new _t({props:{handleKeyDown:zs(e)}})}function zs(e){var t=hg(e);return function(n,r){var i=ug(r),o=i.length==1&&i!=" ",a,s=t[Do(i,r,!o)];if(s&&s(n.state,n.dispatch,n))return!0;if(o&&(r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(a=en[r.keyCode])&&a!=i){var l=t[Do(a,r,!0)];if(l&&l(n.state,n.dispatch,n))return!0}else if(o&&r.shiftKey){var u=t[Do(i,r,!0)];if(u&&u(n.state,n.dispatch,n))return!0}return!1}}var T={};if(typeof navigator!="undefined"&&typeof document!="undefined"){var _o=/Edge\/(\d+)/.exec(navigator.userAgent),Zl=/MSIE \d/.test(navigator.userAgent),Po=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ro=T.ie=!!(Zl||Po||_o);T.ie_version=Zl?document.documentMode||6:Po?+Po[1]:_o?+_o[1]:null,T.gecko=!Ro&&/gecko\/(\d+)/i.test(navigator.userAgent),T.gecko_version=T.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Fo=!Ro&&/Chrome\/(\d+)/.exec(navigator.userAgent);T.chrome=!!Fo,T.chrome_version=Fo&&+Fo[1],T.safari=!Ro&&/Apple Computer/.test(navigator.vendor),T.ios=T.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),T.mac=T.ios||/Mac/.test(navigator.platform),T.android=/Android \d/.test(navigator.userAgent),T.webkit="webkitFontSmoothing"in document.documentElement.style,T.webkit_version=T.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var tt=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Ls=function(e){var t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t},Yl=null,Bt=function(e,t,n){var r=Yl||(Yl=document.createRange());return r.setEnd(e,n==null?e.nodeValue.length:n),r.setStart(e,t||0),r},Nr=function(e,t,n,r){return n&&(Xl(e,t,n,r,-1)||Xl(e,t,n,r,1))},pg=/^(img|br|input|textarea|hr)$/i;function Xl(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Et(e))){var o=e.parentNode;if(o.nodeType!=1||mg(e)||pg.test(e.nodeName)||e.contentEditable=="false")return!1;t=tt(e)+(i<0?0:1),e=o}else if(e.nodeType==1){if(e=e.childNodes[t+(i<0?-1:0)],e.contentEditable=="false")return!1;t=i<0?Et(e):0}else return!1}}function Et(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function dg(e,t,n){for(var r=t==0,i=t==Et(e);r||i;){if(e==n)return!0;var o=tt(e);if(e=e.parentNode,!e)return!1;r=r&&o==0,i=i&&o==Et(e)}}function mg(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var Bs=function(e){var t=e.isCollapsed;return t&&T.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Rn(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function gg(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function qt(e,t){return typeof e=="number"?e:e[t]}function vg(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function eu(e,t,n){for(var r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,a=n||e.dom;a;a=Ls(a))if(a.nodeType==1){var s=a==o.body||a.nodeType!=1,l=s?gg(o):vg(a),u=0,c=0;if(t.top<l.top+qt(r,"top")?c=-(l.top-t.top+qt(i,"top")):t.bottom>l.bottom-qt(r,"bottom")&&(c=t.bottom-l.bottom+qt(i,"bottom")),t.left<l.left+qt(r,"left")?u=-(l.left-t.left+qt(i,"left")):t.right>l.right-qt(r,"right")&&(u=t.right-l.right+qt(i,"right")),u||c)if(s)o.defaultView.scrollBy(u,c);else{var f=a.scrollLeft,h=a.scrollTop;c&&(a.scrollTop+=c),u&&(a.scrollLeft+=u);var p=a.scrollLeft-f,d=a.scrollTop-h;t={left:t.left-p,top:t.top-d,right:t.right-p,bottom:t.bottom-d}}if(s)break}}function yg(e){for(var t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i,o=(t.left+t.right)/2,a=n+1;a<Math.min(innerHeight,t.bottom);a+=5){var s=e.root.elementFromPoint(o,a);if(!(s==e.dom||!e.dom.contains(s))){var l=s.getBoundingClientRect();if(l.top>=n-20){r=s,i=l.top;break}}}return{refDOM:r,refTop:i,stack:oh(e.dom)}}function oh(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=Ls(e));return t}function kg(e){var t=e.refDOM,n=e.refTop,r=e.stack,i=t?t.getBoundingClientRect().top:0;ah(r,i==0?0:i-n)}function ah(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.dom,o=r.top,a=r.left;i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=a&&(i.scrollLeft=a)}}var Nn=null;function bg(e){if(e.setActive)return e.setActive();if(Nn)return e.focus(Nn);var t=oh(e);e.focus(Nn==null?{get preventScroll(){return Nn={preventScroll:!0},!0}}:void 0),Nn||(Nn=!1,ah(t,0))}function sh(e,t){for(var n,r=2e8,i,o=0,a=t.top,s=t.top,l=e.firstChild,u=0;l;l=l.nextSibling,u++){var c=void 0;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=Bt(l).getClientRects();else continue;for(var f=0;f<c.length;f++){var h=c[f];if(h.top<=a&&h.bottom>=s){a=Math.max(h.bottom,a),s=Math.min(h.top,s);var p=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(p<r){n=l,r=p,i=p&&n.nodeType==3?{left:h.right<t.left?h.right:h.left,top:t.top}:t,l.nodeType==1&&p&&(o=u+(t.left>=(h.left+h.right)/2?1:0));continue}}!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(o=u+1)}}return n&&n.nodeType==3?wg(n,i):!n||r&&n.nodeType==1?{node:e,offset:o}:sh(n,i)}function wg(e,t){for(var n=e.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);var o=Jt(r,1);if(o.top!=o.bottom&&Vs(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}function Vs(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Cg(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function xg(e,t,n){var r=sh(t,n),i=r.node,o=r.offset,a=-1;if(i.nodeType==1&&!i.firstChild){var s=i.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(i,o,a)}function Sg(e,t,n,r){for(var i=-1,o=t;o!=e.dom;){var a=e.docView.nearestDesc(o,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)i=a.posBefore;else if(s.right<r.left||s.bottom<r.top)i=a.posAfter;else break}o=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n)}function lh(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){var a=e.childNodes[o];if(a.nodeType==1)for(var s=a.getClientRects(),l=0;l<s.length;l++){var u=s[l];if(Vs(t,u))return lh(a,t,u)}if((o=(o+1)%r)==i)break}return e}function Mg(e,t){var n,r,i=e.dom.ownerDocument,o,a;if(i.caretPositionFromPoint)try{var s=i.caretPositionFromPoint(t.left,t.top);s&&(n=s,o=n.offsetNode,a=n.offset)}catch{}if(!o&&i.caretRangeFromPoint){var l=i.caretRangeFromPoint(t.left,t.top);l&&(r=l,o=r.startContainer,a=r.startOffset)}var u=(e.root.elementFromPoint?e.root:i).elementFromPoint(t.left,t.top+1),c;if(!u||!e.dom.contains(u.nodeType!=1?u.parentNode:u)){var f=e.dom.getBoundingClientRect();if(!Vs(t,f)||(u=lh(e.dom,t,f),!u))return null}if(T.safari)for(var h=u;o&&h;h=Ls(h))h.draggable&&(o=a=null);if(u=Cg(u,t),o){if(T.gecko&&o.nodeType==1&&(a=Math.min(a,o.childNodes.length),a<o.childNodes.length)){var p=o.childNodes[a],d;p.nodeName=="IMG"&&(d=p.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&a++}o==e.dom&&a==o.childNodes.length-1&&o.lastChild.nodeType==1&&t.top>o.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:(a==0||o.nodeType!=1||o.childNodes[a-1].nodeName!="BR")&&(c=Sg(e,o,a,t))}c==null&&(c=xg(e,u,t));var m=e.docView.nearestDesc(u,!0);return{pos:c,inside:m?m.posAtStart-m.border:-1}}function Jt(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var Og=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function uh(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),i=r.node,o=r.offset,a=T.webkit||T.gecko;if(i.nodeType==3)if(a&&(Og.test(i.nodeValue)||(n<0?!o:o==i.nodeValue.length))){var s=Jt(Bt(i,o,o),n);if(T.gecko&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){var l=Jt(Bt(i,o-1,o-1),-1);if(l.top==s.top){var u=Jt(Bt(i,o,o+1),-1);if(u.top!=s.top)return ar(u,u.left<l.left)}}return s}else{var c=o,f=o,h=n<0?1:-1;return n<0&&!o?(f++,h=-1):n>=0&&o==i.nodeValue.length?(c--,h=1):n<0?c--:f++,ar(Jt(Bt(i,c,f),h),h<0)}if(!e.state.doc.resolve(t).parent.inlineContent){if(o&&(n<0||o==Et(i))){var p=i.childNodes[o-1];if(p.nodeType==1)return zo(p.getBoundingClientRect(),!1)}if(o<Et(i)){var d=i.childNodes[o];if(d.nodeType==1)return zo(d.getBoundingClientRect(),!0)}return zo(i.getBoundingClientRect(),n>=0)}if(o&&(n<0||o==Et(i))){var m=i.childNodes[o-1],v=m.nodeType==3?Bt(m,Et(m)-(a?0:1)):m.nodeType==1&&(m.nodeName!="BR"||!m.nextSibling)?m:null;if(v)return ar(Jt(v,1),!1)}if(o<Et(i)){for(var g=i.childNodes[o];g.pmViewDesc&&g.pmViewDesc.ignoreForCoords;)g=g.nextSibling;var y=g?g.nodeType==3?Bt(g,0,a?0:1):g.nodeType==1?g:null:null;if(y)return ar(Jt(y,-1),!0)}return ar(Jt(i.nodeType==3?Bt(i):i,-n),n>=0)}function ar(e,t){if(e.width==0)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function zo(e,t){if(e.height==0)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function ch(e,t,n){var r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function Ag(e,t,n){var r=t.selection,i=n=="up"?r.$from:r.$to;return ch(e,t,function(){for(var o=e.docView.domFromPos(i.pos,n=="up"?-1:1),a=o.node;;){var s=e.docView.nearestDesc(a,!0);if(!s)break;if(s.node.isBlock){a=s.dom;break}a=s.dom.parentNode}for(var l=uh(e,i.pos,1),u=a.firstChild;u;u=u.nextSibling){var c=void 0;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=Bt(u,0,u.nodeValue.length).getClientRects();else continue;for(var f=0;f<c.length;f++){var h=c[f];if(h.bottom>h.top+1&&(n=="up"?l.top-h.top>(h.bottom-l.top)*2:h.bottom-l.bottom>(l.bottom-h.top)*2))return!1}}return!0})}var Eg=/[\u0590-\u08ac]/;function Tg(e,t,n){var r=t.selection,i=r.$head;if(!i.parent.isTextblock)return!1;var o=i.parentOffset,a=!o,s=o==i.parent.content.size,l=e.root.getSelection();return!Eg.test(i.parent.textContent)||!l.modify?n=="left"||n=="backward"?a:s:ch(e,t,function(){var u=l.getRangeAt(0),c=l.focusNode,f=l.focusOffset,h=l.caretBidiLevel;l.modify("move",n,"character");var p=i.depth?e.docView.domAfterPos(i.before()):e.dom,d=!p.contains(l.focusNode.nodeType==1?l.focusNode:l.focusNode.parentNode)||c==l.focusNode&&f==l.focusOffset;return l.removeAllRanges(),l.addRange(u),h!=null&&(l.caretBidiLevel=h),d})}var tu=null,nu=null,ru=!1;function Ng(e,t,n){return tu==t&&nu==n?ru:(tu=t,nu=n,ru=n=="up"||n=="down"?Ag(e,t,n):Tg(e,t,n))}var yt=0,fh=1,br=2,$t=3,re=function(t,n,r,i){this.parent=t,this.children=n,this.dom=r,r.pmViewDesc=this,this.contentDOM=i,this.dirty=yt},Rt={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};re.prototype.matchesWidget=function(){return!1};re.prototype.matchesMark=function(){return!1};re.prototype.matchesNode=function(){return!1};re.prototype.matchesHack=function(t){return!1};re.prototype.parseRule=function(){return null};re.prototype.stopEvent=function(){return!1};Rt.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e};Rt.border.get=function(){return 0};re.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()};re.prototype.posBeforeChild=function(t){for(var n=0,r=this.posAtStart;n<this.children.length;n++){var i=this.children[n];if(i==t)return r;r+=i.size}};Rt.posBefore.get=function(){return this.parent.posBeforeChild(this)};Rt.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0};Rt.posAfter.get=function(){return this.posBefore+this.size};Rt.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border};re.prototype.localPosFromDOM=function(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){var i,o;if(t==this.contentDOM)i=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{var a,s;if(t==this.contentDOM)a=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}var l;if(t==this.dom&&this.contentDOM)l=n>tt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(var u=t;;u=u.parentNode){if(u==this.dom){l=!1;break}if(u.parentNode.firstChild!=u)break}if(l==null&&n==t.childNodes.length)for(var c=t;;c=c.parentNode){if(c==this.dom){l=!0;break}if(c.parentNode.lastChild!=c)break}}return(l==null?r>0:l)?this.posAtEnd:this.posAtStart};re.prototype.nearestDesc=function(t,n){for(var r=!0,i=t;i;i=i.parentNode){var o=this.getDesc(i);if(o&&(!n||o.node))if(r&&o.nodeDOM&&!(o.nodeDOM.nodeType==1?o.nodeDOM.contains(t.nodeType==1?t:t.parentNode):o.nodeDOM==t))r=!1;else return o}};re.prototype.getDesc=function(t){for(var n=t.pmViewDesc,r=n;r;r=r.parent)if(r==this)return n};re.prototype.posFromDOM=function(t,n,r){for(var i=t;i;i=i.parentNode){var o=this.getDesc(i);if(o)return o.localPosFromDOM(t,n,r)}return-1};re.prototype.descAt=function(t){for(var n=0,r=0;n<this.children.length;n++){var i=this.children[n],o=r+i.size;if(r==t&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(t<o)return i.descAt(t-r-i.border);r=o}};re.prototype.domFromPos=function(t,n){if(!this.contentDOM)return{node:this.dom,offset:0};for(var r=0,i=0,o=0;r<this.children.length;r++){var a=this.children[r],s=o+a.size;if(s>t||a instanceof mh){i=t-o;break}o=s}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(var l=void 0;r&&!(l=this.children[r-1]).size&&l instanceof hh&&l.widget.type.side>=0;r--);if(n<=0){for(var u,c=!0;u=r?this.children[r-1]:null,!(!u||u.dom.parentNode==this.contentDOM);r--,c=!1);return u&&n&&c&&!u.border&&!u.domAtom?u.domFromPos(u.size,n):{node:this.contentDOM,offset:u?tt(u.dom)+1:0}}else{for(var f,h=!0;f=r<this.children.length?this.children[r]:null,!(!f||f.dom.parentNode==this.contentDOM);r++,h=!1);return f&&h&&!f.border&&!f.domAtom?f.domFromPos(0,n):{node:this.contentDOM,offset:f?tt(f.dom):this.contentDOM.childNodes.length}}};re.prototype.parseRange=function(t,n,r){if(r===void 0&&(r=0),this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var i=-1,o=-1,a=r,s=0;;s++){var l=this.children[s],u=a+l.size;if(i==-1&&t<=u){var c=a+l.border;if(t>=c&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,c);t=a;for(var f=s;f>0;f--){var h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=tt(h.dom)+1;break}t-=h.size}i==-1&&(i=0)}if(i>-1&&(u>n||s==this.children.length-1)){n=u;for(var p=s+1;p<this.children.length;p++){var d=this.children[p];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=tt(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=u}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:o}};re.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)};re.prototype.domAfterPos=function(t){var n=this.domFromPos(t,0),r=n.node,i=n.offset;if(r.nodeType!=1||i==r.childNodes.length)throw new RangeError("No node after pos "+t);return r.childNodes[i]};re.prototype.setSelection=function(t,n,r,i){for(var o=Math.min(t,n),a=Math.max(t,n),s=0,l=0;s<this.children.length;s++){var u=this.children[s],c=l+u.size;if(o>l&&a<c)return u.setSelection(t-l-u.border,n-l-u.border,r,i);l=c}var f=this.domFromPos(t,t?-1:1),h=n==t?f:this.domFromPos(n,n?-1:1),p=r.getSelection(),d=!1;if((T.gecko||T.safari)&&t==n){var m=f.node,v=f.offset;if(m.nodeType==3){if(d=v&&m.nodeValue[v-1]==`
`,d&&v==m.nodeValue.length)for(var g=m,y=void 0;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(f=h={node:y.parentNode,offset:tt(y)+1});break}var C=g.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{var S=m.childNodes[v-1];d=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(T.gecko&&p.focusNode&&p.focusNode!=h.node&&p.focusNode.nodeType==1){var O=p.focusNode.childNodes[p.focusOffset];O&&O.contentEditable=="false"&&(i=!0)}if(!(!(i||d&&T.safari)&&Nr(f.node,f.offset,p.anchorNode,p.anchorOffset)&&Nr(h.node,h.offset,p.focusNode,p.focusOffset))){var w=!1;if((p.extend||t==n)&&!d){p.collapse(f.node,f.offset);try{t!=n&&p.extend(h.node,h.offset),w=!0}catch(P){if(!(P instanceof DOMException))throw P}}if(!w){if(t>n){var E=f;f=h,h=E}var R=document.createRange();R.setEnd(h.node,h.offset),R.setStart(f.node,f.offset),p.removeAllRanges(),p.addRange(R)}}};re.prototype.ignoreMutation=function(t){return!this.contentDOM&&t.type!="selection"};Rt.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)};re.prototype.markDirty=function(t,n){for(var r=0,i=0;i<this.children.length;i++){var o=this.children[i],a=r+o.size;if(r==a?t<=a&&n>=r:t<a&&n>r){var s=r+o.border,l=a-o.border;if(t>=s&&n<=l){this.dirty=t==r||n==a?br:fh,t==s&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=$t:o.markDirty(t-s,n-s);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?br:$t}r=a}this.dirty=br};re.prototype.markParentsDirty=function(){for(var t=1,n=this.parent;n;n=n.parent,t++){var r=t==1?br:fh;n.dirty<r&&(n.dirty=r)}};Rt.domAtom.get=function(){return!1};Rt.ignoreForCoords.get=function(){return!1};Object.defineProperties(re.prototype,Rt);var tn=[],hh=function(e){function t(r,i,o,a){var s,l=i.type.toDOM;if(typeof l=="function"&&(l=l(o,function(){if(!s)return a;if(s.parent)return s.parent.posBeforeChild(s)})),!i.type.spec.raw){if(l.nodeType!=1){var u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable=!1,l.classList.add("ProseMirror-widget")}e.call(this,r,tn,l,null),this.widget=i,s=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(i){return this.dirty==yt&&i.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(i){var o=this.widget.spec.stopEvent;return o?o(i):!1},t.prototype.ignoreMutation=function(i){return i.type!="selection"||this.widget.spec.ignoreSelection},t.prototype.destroy=function(){this.widget.type.destroy(this.dom),e.prototype.destroy.call(this)},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(re),Ig=function(e){function t(r,i,o,a){e.call(this,r,tn,i,null),this.textDOM=o,this.text=a}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(i,o){return i!=this.textDOM?this.posAtStart+(o?this.size:0):this.posAtStart+o},t.prototype.domFromPos=function(i){return{node:this.textDOM,offset:i}},t.prototype.ignoreMutation=function(i){return i.type==="characterData"&&i.target.nodeValue==i.oldValue},Object.defineProperties(t.prototype,n),t}(re),io=function(e){function t(n,r,i,o){e.call(this,n,[],i,o),this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(r,i,o,a){var s=a.nodeViews[i.type.name],l=s&&s(i,a,o);return(!l||!l.dom)&&(l=Pe.renderSpec(document,i.type.spec.toDOM(i,o))),new t(r,i,l.dom,l.contentDOM||l.dom)},t.prototype.parseRule=function(){return this.dirty&$t||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(r){return this.dirty!=$t&&this.mark.eq(r)},t.prototype.markDirty=function(r,i){if(e.prototype.markDirty.call(this,r,i),this.dirty!=yt){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=yt}},t.prototype.slice=function(r,i,o){var a=t.create(this.parent,this.mark,!0,o),s=this.children,l=this.size;i<l&&(s=xa(s,i,l,o)),r>0&&(s=xa(s,0,r,o));for(var u=0;u<s.length;u++)s[u].parent=a;return a.children=s,a},t}(re),Wr=function(e){function t(r,i,o,a,s,l,u,c,f){e.call(this,r,i.isLeaf?tn:[],s,l),this.nodeDOM=u,this.node=i,this.outerDeco=o,this.innerDeco=a,l&&this.updateChildren(c,f)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(i,o,a,s,l,u){var c,f=l.nodeViews[o.type.name],h,p=f&&f(o,l,function(){if(!h)return u;if(h.parent)return h.parent.posBeforeChild(h)},a,s),d=p&&p.dom,m=p&&p.contentDOM;if(o.isText){if(!d)d=document.createTextNode(o.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||(c=Pe.renderSpec(document,o.type.spec.toDOM(o)),d=c.dom,m=c.contentDOM);!m&&!o.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable=!1),o.type.spec.draggable&&(d.draggable=!0));var v=d;return d=yh(d,a,o),p?h=new Dg(i,o,a,s,d,m,v,p,l,u+1):o.isText?new dh(i,o,a,s,d,v,l):new t(i,o,a,s,d,m,v,l,u+1)},t.prototype.parseRule=function(){var i=this;if(this.node.type.spec.reparseInView)return null;var o={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.whitespace=="pre"&&(o.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?o.contentElement=this.contentDOM:o.getContent=function(){return i.contentDOM?A.empty:i.node.content},o},t.prototype.matchesNode=function(i,o,a){return this.dirty==yt&&i.eq(this.node)&&Ca(o,this.outerDeco)&&a.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(i,o){var a=this,s=this.node.inlineContent,l=o,u=i.composing&&this.localCompositionInfo(i,o),c=u&&u.pos>-1?u:null,f=u&&u.pos<0,h=new dt(this,c&&c.node);Fg(this.node,this.innerDeco,function(p,d,m){p.spec.marks?h.syncToMarks(p.spec.marks,s,i):p.type.side>=0&&!m&&h.syncToMarks(d==a.node.childCount?H.none:a.node.child(d).marks,s,i),h.placeWidget(p,i,l)},function(p,d,m,v){h.syncToMarks(p.marks,s,i);var g;h.findNodeMatch(p,d,m,v)||f&&i.state.selection.from>l&&i.state.selection.to<l+p.nodeSize&&(g=h.findIndexWithChild(u.node))>-1&&h.updateNodeAt(p,d,m,g,i)||h.updateNextNode(p,d,m,i,v)||h.addNode(p,d,m,i,l),l+=p.nodeSize}),h.syncToMarks(tn,s,i),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==br)&&(c&&this.protectLocalComposition(i,c),gh(this.contentDOM,this.children,i),T.ios&&zg(this.dom))},t.prototype.localCompositionInfo=function(i,o){var a=i.state.selection,s=a.from,l=a.to;if(!(!(i.state.selection instanceof U)||s<o||l>o+this.node.content.size)){var u=i.root.getSelection(),c=Lg(u.focusNode,u.focusOffset);if(!(!c||!this.dom.contains(c.parentNode)))if(this.node.inlineContent){var f=c.nodeValue,h=Bg(this.node.content,f,s-o,l-o);return h<0?null:{node:c,pos:h,text:f}}else return{node:c,pos:-1}}},t.prototype.protectLocalComposition=function(i,o){var a=o.node,s=o.pos,l=o.text;if(!this.getDesc(a)){for(var u=a;u.parentNode!=this.contentDOM;u=u.parentNode){for(;u.previousSibling;)u.parentNode.removeChild(u.previousSibling);for(;u.nextSibling;)u.parentNode.removeChild(u.nextSibling);u.pmViewDesc&&(u.pmViewDesc=null)}var c=new Ig(this,u,a,l);i.compositionNodes.push(c),this.children=xa(this.children,s,s+l.length,i,c)}},t.prototype.update=function(i,o,a,s){return this.dirty==$t||!i.sameMarkup(this.node)?!1:(this.updateInner(i,o,a,s),!0)},t.prototype.updateInner=function(i,o,a,s){this.updateOuterDeco(o),this.node=i,this.innerDeco=a,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=yt},t.prototype.updateOuterDeco=function(i){if(!Ca(i,this.outerDeco)){var o=this.nodeDOM.nodeType!=1,a=this.dom;this.dom=vh(this.dom,this.nodeDOM,wa(this.outerDeco,this.node,o),wa(i,this.node,o)),this.dom!=a&&(a.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=i}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(re);function ph(e,t,n,r,i){return yh(r,t,e),new Wr(null,e,t,n,r,r,r,i,0)}var dh=function(e){function t(r,i,o,a,s,l,u){e.call(this,r,i,o,a,s,null,l,u)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var i=this.nodeDOM.parentNode;i&&i!=this.dom&&!i.pmIsDeco;)i=i.parentNode;return{skip:i||!0}},t.prototype.update=function(i,o,a,s){return this.dirty==$t||this.dirty!=yt&&!this.inParent()||!i.sameMarkup(this.node)?!1:(this.updateOuterDeco(o),(this.dirty!=yt||i.text!=this.node.text)&&i.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=i.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=i,this.dirty=yt,!0)},t.prototype.inParent=function(){for(var i=this.parent.contentDOM,o=this.nodeDOM;o;o=o.parentNode)if(o==i)return!0;return!1},t.prototype.domFromPos=function(i){return{node:this.nodeDOM,offset:i}},t.prototype.localPosFromDOM=function(i,o,a){return i==this.nodeDOM?this.posAtStart+Math.min(o,this.node.text.length):e.prototype.localPosFromDOM.call(this,i,o,a)},t.prototype.ignoreMutation=function(i){return i.type!="characterData"&&i.type!="selection"},t.prototype.slice=function(i,o,a){var s=this.node.cut(i,o),l=document.createTextNode(s.text);return new t(this.parent,s,this.outerDeco,this.innerDeco,l,l,a)},t.prototype.markDirty=function(i,o){e.prototype.markDirty.call(this,i,o),this.dom!=this.nodeDOM&&(i==0||o==this.nodeDOM.nodeValue.length)&&(this.dirty=$t)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}(Wr),mh=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(i){return this.dirty==yt&&this.dom.nodeName==i},n.domAtom.get=function(){return!0},n.ignoreForCoords.get=function(){return this.dom.nodeName=="IMG"},Object.defineProperties(t.prototype,n),t}(re),Dg=function(e){function t(n,r,i,o,a,s,l,u,c,f){e.call(this,n,r,i,o,a,s,l,c,f),this.spec=u}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(r,i,o,a){if(this.dirty==$t)return!1;if(this.spec.update){var s=this.spec.update(r,i,o);return s&&this.updateInner(r,i,o,a),s}else return!this.contentDOM&&!r.isLeaf?!1:e.prototype.update.call(this,r,i,o,a)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(r,i,o,a){this.spec.setSelection?this.spec.setSelection(r,i,o):e.prototype.setSelection.call(this,r,i,o,a)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(r){return this.spec.stopEvent?this.spec.stopEvent(r):!1},t.prototype.ignoreMutation=function(r){return this.spec.ignoreMutation?this.spec.ignoreMutation(r):e.prototype.ignoreMutation.call(this,r)},t}(Wr);function gh(e,t,n){for(var r=e.firstChild,i=!1,o=0;o<t.length;o++){var a=t[o],s=a.dom;if(s.parentNode==e){for(;s!=r;)r=iu(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(s,r);if(a instanceof io){var l=r?r.previousSibling:e.lastChild;gh(a.contentDOM,a.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=iu(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}function wr(e){e&&(this.nodeName=e)}wr.prototype=Object.create(null);var gn=[new wr];function wa(e,t,n){if(e.length==0)return gn;for(var r=n?gn[0]:new wr,i=[r],o=0;o<e.length;o++){var a=e[o].type.attrs;if(!!a){a.nodeName&&i.push(r=new wr(a.nodeName));for(var s in a){var l=a[s];l!=null&&(n&&i.length==1&&i.push(r=new wr(t.isInline?"span":"div")),s=="class"?r.class=(r.class?r.class+" ":"")+l:s=="style"?r.style=(r.style?r.style+";":"")+l:s!="nodeName"&&(r[s]=l))}}}return i}function vh(e,t,n,r){if(n==gn&&r==gn)return t;for(var i=t,o=0;o<r.length;o++){var a=r[o],s=n[o];if(o){var l=void 0;s&&s.nodeName==a.nodeName&&i!=e&&(l=i.parentNode)&&l.tagName.toLowerCase()==a.nodeName||(l=document.createElement(a.nodeName),l.pmIsDeco=!0,l.appendChild(i),s=gn[0]),i=l}_g(i,s||gn[0],a)}return i}function _g(e,t,n){for(var r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(var i in n)i!="class"&&i!="style"&&i!="nodeName"&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){for(var o=t.class?t.class.split(" ").filter(Boolean):tn,a=n.class?n.class.split(" ").filter(Boolean):tn,s=0;s<o.length;s++)a.indexOf(o[s])==-1&&e.classList.remove(o[s]);for(var l=0;l<a.length;l++)o.indexOf(a[l])==-1&&e.classList.add(a[l]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,c;c=u.exec(t.style);)e.style.removeProperty(c[1]);n.style&&(e.style.cssText+=n.style)}}function yh(e,t,n){return vh(e,e,gn,wa(t,n,e.nodeType!=1))}function Ca(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function iu(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var dt=function(t,n){this.top=t,this.lock=n,this.index=0,this.stack=[],this.changed=!1,this.preMatch=Pg(t.node.content,t)};dt.prototype.destroyBetween=function(t,n){if(t!=n){for(var r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}};dt.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)};dt.prototype.syncToMarks=function(t,n,r){for(var i=0,o=this.stack.length>>1,a=Math.min(o,t.length);i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=yt,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,l=this.index;l<Math.min(this.index+3,this.top.children.length);l++)if(this.top.children[l].matchesMark(t[o])){s=l;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var u=io.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,o++}};dt.prototype.findNodeMatch=function(t,n,r,i){var o=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(t,n,r))o=this.top.children.indexOf(a,this.index);else for(var s=this.index,l=Math.min(this.top.children.length,s+5);s<l;s++){var u=this.top.children[s];if(u.matchesNode(t,n,r)&&!this.preMatch.matched.has(u)){o=s;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)};dt.prototype.updateNodeAt=function(t,n,r,i,o){var a=this.top.children[i];return a.update(t,n,r,o)?(this.destroyBetween(this.index,i),this.index=i+1,!0):!1};dt.prototype.findIndexWithChild=function(t){for(;;){var n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){var r=t.pmViewDesc;if(r){for(var i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}};dt.prototype.updateNextNode=function(t,n,r,i,o){for(var a=this.index;a<this.top.children.length;a++){var s=this.top.children[a];if(s instanceof Wr){var l=this.preMatch.matched.get(s);if(l!=null&&l!=o)return!1;var u=s.dom,c=this.lock&&(u==this.lock||u.nodeType==1&&u.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&s.dirty!=$t&&Ca(n,s.outerDeco));if(!c&&s.update(t,n,r,i))return this.destroyBetween(this.index,a),s.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1};dt.prototype.addNode=function(t,n,r,i,o){this.top.children.splice(this.index++,0,Wr.create(this.top,t,n,r,i,o)),this.changed=!0};dt.prototype.placeWidget=function(t,n,r){var i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{var o=new hh(this.top,t,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}};dt.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof io;)t=t.children[t.children.length-1];(!t||!(t instanceof dh)||/\n$/.test(t.node.text))&&((T.safari||T.chrome)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG"),this.addHackNode("BR"))};dt.prototype.addHackNode=function(t){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(t))this.index++;else{var n=document.createElement(t);t=="IMG"&&(n.className="ProseMirror-separator"),t=="BR"&&(n.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new mh(this.top,tn,n,null)),this.changed=!0}};function Pg(e,t){var n=t,r=n.children.length,i=e.childCount,o=new Map,a=[];e:for(;i>0;){for(var s=void 0;;)if(r){var l=n.children[r-1];if(l instanceof io)n=l,r=l.children.length;else{s=l,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var u=s.node;if(!!u){if(u!=e.child(i-1))break;--i,o.set(s,i),a.push(s)}}return{index:i,matched:o,matches:a.reverse()}}function Rg(e,t){return e.type.side-t.type.side}function Fg(e,t,n,r){var i=t.locals(e),o=0;if(i.length==0){for(var a=0;a<e.childCount;a++){var s=e.child(a);r(s,i,t.forChild(o,s),a),o+=s.nodeSize}return}for(var l=0,u=[],c=null,f=0;;){if(l<i.length&&i[l].to==o){for(var h=i[l++],p=void 0;l<i.length&&i[l].to==o;)(p||(p=[h])).push(i[l++]);if(p){p.sort(Rg);for(var d=0;d<p.length;d++)n(p[d],f,!!c)}else n(h,f,!!c)}var m=void 0,v=void 0;if(c)v=-1,m=c,c=null;else if(f<e.childCount)v=f,m=e.child(f++);else break;for(var g=0;g<u.length;g++)u[g].to<=o&&u.splice(g--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)u.push(i[l++]);var y=o+m.nodeSize;if(m.isText){var C=y;l<i.length&&i[l].from<C&&(C=i[l].from);for(var S=0;S<u.length;S++)u[S].to<C&&(C=u[S].to);C<y&&(c=m.cut(C-o),m=m.cut(0,C-o),y=C,v=-1)}var O=u.length?m.isInline&&!m.isLeaf?u.filter(function(w){return!w.inline}):u.slice():tn;r(m,O,t.forChild(o,m),v),o=y}}function zg(e){if(e.nodeName=="UL"||e.nodeName=="OL"){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Lg(e,t){for(;;){if(e.nodeType==3)return e;if(e.nodeType==1&&t>0){if(e.childNodes.length>t&&e.childNodes[t].nodeType==3)return e.childNodes[t];e=e.childNodes[t-1],t=Et(e)}else if(e.nodeType==1&&t<e.childNodes.length)e=e.childNodes[t],t=0;else return null}}function Bg(e,t,n,r){for(var i=0,o=0;i<e.childCount&&o<=r;){var a=e.child(i++),s=o;if(o+=a.nodeSize,!!a.isText){for(var l=a.text;i<e.childCount;){var u=e.child(i++);if(o+=u.nodeSize,!u.isText)break;l+=u.text}if(o>=n&&s<r){var c=l.lastIndexOf(t,r-s-1);if(c>=0&&c+t.length+s>=n)return s+c}}}return-1}function xa(e,t,n,r,i){for(var o=[],a=0,s=0;a<e.length;a++){var l=e[a],u=s,c=s+=l.size;u>=n||c<=t?o.push(l):(u<t&&o.push(l.slice(0,t-u,r)),i&&(o.push(i),i=null),c>n&&o.push(l.slice(n-u,l.size,r)))}return o}function kh(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var i=e.docView.nearestDesc(n.focusNode),o=i&&i.size==0,a=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var s=r.resolve(a),l,u;if(Bs(n)){for(l=s;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&$.isSelectable(i.node)&&i.parent&&!(i.node.isInline&&dg(n.focusNode,n.focusOffset,i.dom))){var c=i.posBefore;u=new $(a==c?s:r.resolve(c))}}else{var f=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;l=r.resolve(f)}if(!u){var h=t=="pointer"||e.state.selection.head<s.pos&&!o?1:-1;u=$s(e,l,s,h)}return u}function bh(e){return e.editable?e.hasFocus():Hs(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function ln(e,t){var n=e.state.selection;if(wh(e,n),!!bh(e)){if(!t&&e.mouseDown&&e.mouseDown.allowDefault&&T.chrome){var r=e.root.getSelection(),i=e.domObserver.currentSelection;if(r.anchorNode&&Nr(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)$g(e);else{var o=n.anchor,a=n.head,s,l;ou&&!(n instanceof U)&&(n.$from.parent.inlineContent||(s=au(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=au(e,n.to))),e.docView.setSelection(o,a,e.root,t),ou&&(s&&su(s),l&&su(l)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Vg(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var ou=T.safari||T.chrome&&T.chrome_version<63;function au(e,t){var n=e.docView.domFromPos(t,0),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,a=i?r.childNodes[i-1]:null;if(T.safari&&o&&o.contentEditable=="false")return Lo(o);if((!o||o.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(o)return Lo(o);if(a)return Lo(a)}}function Lo(e){return e.contentEditable="true",T.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function su(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Vg(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout(function(){(!bh(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function $g(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,tt(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&T.ie&&T.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function wh(e,t){if(t instanceof $){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(lu(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else lu(e)}function lu(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function $s(e,t,n,r){return e.someProp("createSelectionBetween",function(i){return i(e,t,n)})||U.between(t,n,r)}function Hg(e){return e.editable&&e.root.activeElement!=e.dom?!1:Hs(e)}function Hs(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Wg(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.root.getSelection();return Nr(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Sa(e,t){var n=e.selection,r=n.$anchor,i=n.$head,o=t>0?r.max(i):r.min(i),a=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return a&&B.findFrom(a,t)}function mn(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function uu(e,t,n){var r=e.state.selection;if(r instanceof U){if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var i=Sa(e.state,t);return i&&i instanceof $?mn(e,i):!1}else if(!(T.mac&&n.indexOf("m")>-1)){var o=r.$head,a=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter,s;if(!a||a.isText)return!1;var l=t<0?o.pos-a.nodeSize:o.pos;return a.isAtom||(s=e.docView.descAt(l))&&!s.contentDOM?$.isSelectable(a)?mn(e,new $(t<0?e.state.doc.resolve(o.pos-a.nodeSize):o)):T.webkit?mn(e,new U(e.state.doc.resolve(t<0?l:l+a.nodeSize))):!1:!1}}else{if(r instanceof $&&r.node.isInline)return mn(e,new U(t>0?r.$to:r.$from));var u=Sa(e.state,t);return u?mn(e,u):!1}}function zi(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Cr(e){var t=e.pmViewDesc;return t&&t.size==0&&(e.nextSibling||e.nodeName!="BR")}function Bo(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(!!n){var i,o,a=!1;for(T.gecko&&n.nodeType==1&&r<zi(n)&&Cr(n.childNodes[r])&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;var s=n.childNodes[r-1];if(Cr(s))i=n,o=--r;else if(s.nodeType==3)n=s,r=n.nodeValue.length;else break}else{if(Ch(n))break;for(var l=n.previousSibling;l&&Cr(l);)i=n.parentNode,o=tt(l),l=l.previousSibling;if(l)n=l,r=zi(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}a?Ma(e,t,n,r):i&&Ma(e,t,i,o)}}function Vo(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(!!n){for(var i=zi(n),o,a;;)if(r<i){if(n.nodeType!=1)break;var s=n.childNodes[r];if(Cr(s))o=n,a=++r;else break}else{if(Ch(n))break;for(var l=n.nextSibling;l&&Cr(l);)o=l.parentNode,a=tt(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=zi(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}o&&Ma(e,t,o,a)}}function Ch(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Ma(e,t,n,r){if(Bs(t)){var i=document.createRange();i.setEnd(n,r),i.setStart(n,r),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var o=e.state;setTimeout(function(){e.state==o&&ln(e)},50)}function cu(e,t,n){var r=e.state.selection;if(r instanceof U&&!r.empty||n.indexOf("s")>-1||T.mac&&n.indexOf("m")>-1)return!1;var i=r.$from,o=r.$to;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=Sa(e.state,t);if(a&&a instanceof $)return mn(e,a)}if(!i.parent.inlineContent){var s=t<0?i:o,l=r instanceof Wt?B.near(s,t):B.findFrom(s,t);return l?mn(e,l):!1}return!1}function fu(e,t){if(!(e.state.selection instanceof U))return!0;var n=e.state.selection,r=n.$head,i=n.$anchor,o=n.empty;if(!r.sameParent(i))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function hu(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function jg(e){if(!(!T.safari||e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&n.nodeType==1&&r==0&&n.firstChild&&n.firstChild.contentEditable=="false"){var i=n.firstChild;hu(e,i,!0),setTimeout(function(){return hu(e,i,!1)},20)}}}function qg(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Jg(e,t){var n=t.keyCode,r=qg(t);return n==8||T.mac&&n==72&&r=="c"?fu(e,-1)||Bo(e):n==46||T.mac&&n==68&&r=="c"?fu(e,1)||Vo(e):n==13||n==27?!0:n==37?uu(e,-1,r)||Bo(e):n==39?uu(e,1,r)||Vo(e):n==38?cu(e,-1,r)||Bo(e):n==40?jg(e)||cu(e,1,r)||Vo(e):r==(T.mac?"m":"c")&&(n==66||n==73||n==89||n==90)}function Kg(e,t,n){var r=e.docView.parseRange(t,n),i=r.node,o=r.fromOffset,a=r.toOffset,s=r.from,l=r.to,u=e.root.getSelection(),c=null,f=u.anchorNode;if(f&&e.dom.contains(f.nodeType==1?f:f.parentNode)&&(c=[{node:f,offset:u.anchorOffset}],Bs(u)||c.push({node:u.focusNode,offset:u.focusOffset})),T.chrome&&e.lastKeyCode===8)for(var h=a;h>o;h--){var p=i.childNodes[h-1],d=p.pmViewDesc;if(p.nodeName=="BR"&&!d){a=h;break}if(!d||d.size)break}var m=e.state.doc,v=e.someProp("domParser")||vt.fromSchema(e.state.schema),g=m.resolve(s),y=null,C=v.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:o,to:a,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,editableContent:!0,findPositions:c,ruleFromNode:Ug,context:g});if(c&&c[0].pos!=null){var S=c[0].pos,O=c[1]&&c[1].pos;O==null&&(O=S),y={anchor:S+s,head:O+s}}return{doc:C,sel:y,from:s,to:l}}function Ug(e){var t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(T.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||T.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Gg(e,t,n,r,i){if(t<0){var o=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,a=kh(e,o);if(a&&!e.state.selection.eq(a)){var s=e.state.tr.setSelection(a);o=="pointer"?s.setMeta("pointer",!0):o=="key"&&s.scrollIntoView(),e.dispatch(s)}return}var l=e.state.doc.resolve(t),u=l.sharedDepth(n);t=l.before(u+1),n=e.state.doc.resolve(n).after(u+1);var c=e.state.selection,f=Kg(e,t,n);if(T.chrome&&e.cursorWrapper&&f.sel&&f.sel.anchor==e.cursorWrapper.deco.from){var h=e.cursorWrapper.deco.type.toDOM.nextSibling,p=h&&h.nodeValue?h.nodeValue.length:1;f.sel={anchor:f.sel.anchor+p,head:f.sel.anchor+p}}var d=e.state.doc,m=d.slice(f.from,f.to),v,g;e.lastKeyCode===8&&Date.now()-100<e.lastKeyCodeTime?(v=e.state.selection.to,g="end"):(v=e.state.selection.from,g="start"),e.lastKeyCode=null;var y=Yg(m.content,f.doc.content,f.from,v,g);if(!y)if(r&&c instanceof U&&!c.empty&&c.$head.sameParent(c.$anchor)&&!e.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))y={start:c.from,endA:c.to,endB:c.to};else if((T.ios&&e.lastIOSEnter>Date.now()-225||T.android)&&i.some(function(x){return x.nodeName=="DIV"||x.nodeName=="P"})&&e.someProp("handleKeyDown",function(x){return x(e,Rn(13,"Enter"))})){e.lastIOSEnter=0;return}else{if(f.sel){var C=pu(e,e.state.doc,f.sel);C&&!C.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(C))}return}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof U&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),T.ie&&T.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>f.from&&f.doc.textBetween(y.start-f.from-1,y.start-f.from+1)==" \xA0"&&(y.start--,y.endA--,y.endB--);var S=f.doc.resolveNoCache(y.start-f.from),O=f.doc.resolveNoCache(y.endB-f.from),w=S.sameParent(O)&&S.parent.inlineContent,E;if((T.ios&&e.lastIOSEnter>Date.now()-225&&(!w||i.some(function(x){return x.nodeName=="DIV"||x.nodeName=="P"}))||!w&&S.pos<f.doc.content.size&&(E=B.findFrom(f.doc.resolve(S.pos+1),1,!0))&&E.head==O.pos)&&e.someProp("handleKeyDown",function(x){return x(e,Rn(13,"Enter"))})){e.lastIOSEnter=0;return}if(e.state.selection.anchor>y.start&&Zg(d,y.start,y.endA,S,O)&&e.someProp("handleKeyDown",function(x){return x(e,Rn(8,"Backspace"))})){T.android&&T.chrome&&e.domObserver.suppressSelectionUpdates();return}T.chrome&&T.android&&y.toB==y.from&&(e.lastAndroidDelete=Date.now()),T.android&&!w&&S.start()!=O.start()&&O.parentOffset==0&&S.depth==O.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==y.endA&&(y.endB-=2,O=f.doc.resolveNoCache(y.endB-f.from),setTimeout(function(){e.someProp("handleKeyDown",function(x){return x(e,Rn(13,"Enter"))})},20));var R=y.start,P=y.endA,F,N,_,L;if(w){if(S.pos==O.pos)T.ie&&T.ie_version<=11&&S.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(function(){return ln(e)},20)),F=e.state.tr.delete(R,P),N=d.resolve(y.start).marksAcross(d.resolve(y.endA));else if(y.endA==y.endB&&(L=d.resolve(y.start))&&(_=Qg(S.parent.content.cut(S.parentOffset,O.parentOffset),L.parent.content.cut(L.parentOffset,y.endA-L.start()))))F=e.state.tr,_.type=="add"?F.addMark(R,P,_.mark):F.removeMark(R,P,_.mark);else if(S.parent.child(S.index()).isText&&S.index()==O.index()-(O.textOffset?0:1)){var ee=S.parent.textBetween(S.parentOffset,O.parentOffset);if(e.someProp("handleTextInput",function(x){return x(e,R,P,ee)}))return;F=e.state.tr.insertText(ee,R,P)}}if(F||(F=e.state.tr.replace(R,P,f.doc.slice(y.start-f.from,y.endB-f.from))),f.sel){var j=pu(e,F.doc,f.sel);j&&!(T.chrome&&T.android&&e.composing&&j.empty&&(y.start!=y.endB||e.lastAndroidDelete<Date.now()-100)&&(j.head==R||j.head==F.mapping.map(P)-1)||T.ie&&j.empty&&j.head==R)&&F.setSelection(j)}N&&F.ensureMarks(N),e.dispatch(F.scrollIntoView())}function pu(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:$s(e,t.resolve(n.anchor),t.resolve(n.head))}function Qg(e,t){for(var n=e.firstChild.marks,r=t.firstChild.marks,i=n,o=r,a,s,l,u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(var c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(i.length==1&&o.length==0)s=i[0],a="add",l=function(p){return p.mark(s.addToSet(p.marks))};else if(i.length==0&&o.length==1)s=o[0],a="remove",l=function(p){return p.mark(s.removeFromSet(p.marks))};else return null;for(var f=[],h=0;h<t.childCount;h++)f.push(l(t.child(h)));if(A.from(f).eq(e))return{mark:s,type:a}}function Zg(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||$o(r,!0,!1)<i.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var a=e.resolve($o(o,!0,!0));return!a.parent.isTextblock||a.pos>n||$o(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function $o(e,t,n){for(var r=e.depth,i=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n)for(var o=e.node(r).maybeChild(e.indexAfter(r));o&&!o.isLeaf;)o=o.firstChild,i++;return i}function Yg(e,t,n,r,i){var o=e.findDiffStart(t,n);if(o==null)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,l=a.b;if(i=="end"){var u=Math.max(0,o-Math.min(s,l));r-=s+u-o}if(s<o&&e.size<t.size){var c=r<=o&&r>=s?o-r:0;o-=c,l=o+(l-s),s=o}else if(l<o){var f=r<=o&&r>=l?o-r:0;o-=f,s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function xh(e,t){for(var n=[],r=t.content,i=t.openStart,o=t.openEnd;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var s=e.someProp("clipboardSerializer")||Pe.fromSchema(e.state.schema),l=Th(),u=l.createElement("div");u.appendChild(s.serializeFragment(r,{document:l}));for(var c=u.firstChild,f;c&&c.nodeType==1&&(f=Eh[c.nodeName.toLowerCase()]);){for(var h=f.length-1;h>=0;h--){for(var p=l.createElement(f[h]);u.firstChild;)p.appendChild(u.firstChild);u.appendChild(p),f[h]!="tbody"&&(i++,o++)}c=u.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",i+" "+o+" "+JSON.stringify(n));var d=e.someProp("clipboardTextSerializer",function(m){return m(t)})||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:d}}function Sh(e,t,n,r,i){var o,a=i.parent.type.spec.code,s;if(!n&&!t)return null;var l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",function(O){t=O(t,a||r)}),a)return t?new I(A.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):I.empty;var u=e.someProp("clipboardTextParser",function(O){return O(t,i,r)});if(u)s=u;else{var c=i.marks(),f=e.state,h=f.schema,p=Pe.fromSchema(h);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(function(O){var w=o.appendChild(document.createElement("p"));O&&w.appendChild(p.serializeNode(h.text(O,c)))})}}else e.someProp("transformPastedHTML",function(O){n=O(n)}),o=tv(n),T.webkit&&nv(o);var d=o&&o.querySelector("[data-pm-slice]"),m=d&&/^(\d+) (\d+) (.*)/.exec(d.getAttribute("data-pm-slice"));if(!s){var v=e.someProp("clipboardParser")||e.someProp("domParser")||vt.fromSchema(e.state.schema);s=v.parseSlice(o,{preserveWhitespace:!!(l||m),context:i,ruleFromNode:function(w){if(w.nodeName=="BR"&&!w.nextSibling&&w.parentNode&&!Xg.test(w.parentNode.nodeName))return{ignore:!0}}})}if(m)s=rv(du(s,+m[1],+m[2]),m[3]);else if(s=I.maxOpen(ev(s.content,i),!0),s.openStart||s.openEnd){for(var g=0,y=0,C=s.content.firstChild;g<s.openStart&&!C.type.spec.isolating;g++,C=C.firstChild);for(var S=s.content.lastChild;y<s.openEnd&&!S.type.spec.isolating;y++,S=S.lastChild);s=du(s,g,y)}return e.someProp("transformPasted",function(O){s=O(s)}),s}var Xg=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function ev(e,t){if(e.childCount<2)return e;for(var n=function(o){var a=t.node(o),s=a.contentMatchAt(t.index(o)),l=void 0,u=[];if(e.forEach(function(c){if(!!u){var f=s.findWrapping(c.type),h;if(!f)return u=null;if(h=u.length&&l.length&&Oh(f,l,c,u[u.length-1],0))u[u.length-1]=h;else{u.length&&(u[u.length-1]=Ah(u[u.length-1],l.length));var p=Mh(c,f);u.push(p),s=s.matchType(p.type,p.attrs),l=f}}}),u)return{v:A.from(u)}},r=t.depth;r>=0;r--){var i=n(r);if(i)return i.v}return e}function Mh(e,t,n){n===void 0&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,A.from(e));return e}function Oh(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){var o=Oh(e,t,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));var a=r.contentMatchAt(r.childCount);if(a.matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(A.from(Mh(n,e,i+1))))}}function Ah(e,t){if(t==0)return e;var n=e.content.replaceChild(e.childCount-1,Ah(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(A.empty,!0);return e.copy(n.append(r))}function Oa(e,t,n,r,i,o){var a=t<0?e.firstChild:e.lastChild,s=a.content;return i<r-1&&(s=Oa(s,t,n,r,i+1,o)),i>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,e.childCount>1||o<=i).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(A.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function du(e,t,n){return t<e.openStart&&(e=new I(Oa(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new I(Oa(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Eh={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},mu=null;function Th(){return mu||(mu=document.implementation.createHTMLDocument("title"))}function tv(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n=Th().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&Eh[r[1].toLowerCase()])&&(e=i.map(function(a){return"<"+a+">"}).join("")+e+i.map(function(a){return"</"+a+">"}).reverse().join("")),n.innerHTML=e,i)for(var o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function nv(e){for(var t=e.querySelectorAll(T.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function rv(e,t){if(!e.size)return e;var n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}for(var i=e.content,o=e.openStart,a=e.openEnd,s=r.length-2;s>=0;s-=2){var l=n.nodes[r[s]];if(!l||l.hasRequiredAttrs())break;i=A.from(l.create(r[s+1],i)),o++,a++}return new I(i,o,a)}var iv={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ws=T.ie&&T.ie_version<=11,js=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};js.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset};js.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var it=function(t,n){var r=this;this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver(function(i){for(var o=0;o<i.length;o++)r.queue.push(i[o]);T.ie&&T.ie_version<=11&&i.some(function(a){return a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length})?r.flushSoon():r.flush()}),this.currentSelection=new js,Ws&&(this.onCharData=function(i){r.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};it.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){t.flushingSoon=-1,t.flush()},20))};it.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())};it.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,iv),Ws&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()};it.prototype.stop=function(){var t=this;if(this.observer){var n=this.observer.takeRecords();if(n.length){for(var r=0;r<n.length;r++)this.queue.push(n[r]);window.setTimeout(function(){return t.flush()},20)}this.observer.disconnect()}Ws&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()};it.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)};it.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)};it.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return t.suppressingSelectionUpdates=!1},50)};it.prototype.onSelectionChange=function(){if(!!Hg(this.view)){if(this.suppressingSelectionUpdates)return ln(this.view);if(T.ie&&T.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&Nr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}};it.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())};it.prototype.ignoreSelectionChange=function(t){if(t.rangeCount==0)return!0;var n=t.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(n);if(r&&r.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0};it.prototype.flush=function(){if(!(!this.view.docView||this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var n=this.view.root.getSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Hs(this.view)&&!this.ignoreSelectionChange(n),i=-1,o=-1,a=!1,s=[];if(this.view.editable)for(var l=0;l<t.length;l++){var u=this.registerMutation(t[l],s);u&&(i=i<0?u.from:Math.min(u.from,i),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(a=!0))}if(T.gecko&&s.length>1){var c=s.filter(function(p){return p.nodeName=="BR"});if(c.length==2){var f=c[0],h=c[1];f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}}(i>-1||r)&&(i>-1&&(this.view.docView.markDirty(i,o),ov(this.view)),this.handleDOMChange(i,o,a,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(n)||ln(this.view),this.currentSelection.set(n))}};it.prototype.registerMutation=function(t,n){if(n.indexOf(t.target)>-1)return null;var r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(var i=0;i<t.addedNodes.length;i++)n.push(t.addedNodes[i]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};var o=t.previousSibling,a=t.nextSibling;if(T.ie&&T.ie_version<=11&&t.addedNodes.length)for(var s=0;s<t.addedNodes.length;s++){var l=t.addedNodes[s],u=l.previousSibling,c=l.nextSibling;(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(o=u),(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(a=c)}var f=o&&o.parentNode==t.target?tt(o)+1:0,h=r.localPosFromDOM(t.target,f,-1),p=a&&a.parentNode==t.target?tt(a):t.target.childNodes.length,d=r.localPosFromDOM(t.target,p,1);return{from:h,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var gu=!1;function ov(e){gu||(gu=!0,getComputedStyle(e.dom).whiteSpace=="normal"&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var qe={},$e={};function av(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new it(e,function(r,i,o,a){return Gg(e,r,i,o,a)}),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(r){var i=qe[r];e.dom.addEventListener(r,e.eventHandlers[r]=function(o){lv(e,o)&&!Js(e,o)&&(e.editable||!(o.type in $e))&&i(e,o)})};for(var n in qe)t(n);T.safari&&e.dom.addEventListener("input",function(){return null}),qs(e)}function bn(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function sv(e){e.domObserver.stop();for(var t in e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}function qs(e){e.someProp("handleDOMEvents",function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(r){return Js(e,r)})})}function Js(e,t){return e.someProp("handleDOMEvents",function(n){var r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function lv(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function uv(e,t){!Js(e,t)&&qe[t.type]&&(e.editable||!(t.type in $e))&&qe[t.type](e,t)}$e.keydown=function(e,t){if(e.shiftKey=t.keyCode==16||t.shiftKey,!Ih(e,t)&&(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!(T.android&&T.chrome&&t.keyCode==13)))if(t.keyCode!=229&&e.domObserver.forceFlush(),T.ios&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout(function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",function(r){return r(e,Rn(13,"Enter"))}),e.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",function(r){return r(e,t)})||Jg(e,t)?t.preventDefault():bn(e,"key")};$e.keyup=function(e,t){t.keyCode==16&&(e.shiftKey=!1)};$e.keypress=function(e,t){if(!(Ih(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||T.mac&&t.metaKey)){if(e.someProp("handleKeyPress",function(i){return i(e,t)})){t.preventDefault();return}var n=e.state.selection;if(!(n instanceof U)||!n.$from.sameParent(n.$to)){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",function(i){return i(e,n.$from.pos,n.$to.pos,r)})||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};function oo(e){return{left:e.clientX,top:e.clientY}}function cv(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function Ks(e,t,n,r,i){if(r==-1)return!1;for(var o=e.state.doc.resolve(r),a=function(u){if(e.someProp(t,function(c){return u>o.depth?c(e,n,o.nodeAfter,o.before(u),i,!0):c(e,n,o.node(u),o.before(u),i,!1)}))return{v:!0}},s=o.depth+1;s>0;s--){var l=a(s);if(l)return l.v}return!1}function Ln(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);n=="pointer"&&r.setMeta("pointer",!0),e.dispatch(r)}function fv(e,t){if(t==-1)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&$.isSelectable(r)?(Ln(e,new $(n),"pointer"),!0):!1}function hv(e,t){if(t==-1)return!1;var n=e.state.selection,r,i;n instanceof $&&(r=n.node);for(var o=e.state.doc.resolve(t),a=o.depth+1;a>0;a--){var s=a>o.depth?o.nodeAfter:o.node(a);if($.isSelectable(s)){r&&n.$from.depth>0&&a>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(a);break}}return i!=null?(Ln(e,$.create(e.state.doc,i),"pointer"),!0):!1}function pv(e,t,n,r,i){return Ks(e,"handleClickOn",t,n,r)||e.someProp("handleClick",function(o){return o(e,t,r)})||(i?hv(e,n):fv(e,n))}function dv(e,t,n,r){return Ks(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",function(i){return i(e,t,r)})}function mv(e,t,n,r){return Ks(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",function(i){return i(e,t,r)})||gv(e,n,r)}function gv(e,t,n){if(n.button!=0)return!1;var r=e.state.doc;if(t==-1)return r.inlineContent?(Ln(e,U.create(r,0,r.content.size),"pointer"),!0):!1;for(var i=r.resolve(t),o=i.depth+1;o>0;o--){var a=o>i.depth?i.nodeAfter:i.node(o),s=i.before(o);if(a.inlineContent)Ln(e,U.create(r,s+1,s+1+a.content.size),"pointer");else if($.isSelectable(a))Ln(e,$.create(r,s),"pointer");else continue;return!0}}function Us(e){return Li(e)}var Nh=T.mac?"metaKey":"ctrlKey";qe.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=Us(e),r=Date.now(),i="singleClick";r-e.lastClick.time<500&&cv(t,e.lastClick)&&!t[Nh]&&(e.lastClick.type=="singleClick"?i="doubleClick":e.lastClick.type=="doubleClick"&&(i="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(oo(t));!o||(i=="singleClick"?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new ao(e,o,t,n)):(i=="doubleClick"?dv:mv)(e,o.pos,o.inside,t)?t.preventDefault():bn(e,"pointer"))};var ao=function(t,n,r,i){var o=this;this.view=t,this.startDoc=t.state.doc,this.pos=n,this.event=r,this.flushed=i,this.selectNode=r[Nh],this.allowDefault=r.shiftKey,this.delayedSelectionSync=!1;var a,s;if(n.inside>-1)a=t.state.doc.nodeAt(n.inside),s=n.inside;else{var l=t.state.doc.resolve(n.pos);a=l.parent,s=l.depth?l.before():0}this.mightDrag=null;var u=i?null:r.target,c=u?t.docView.nearestDesc(u,!0):null;this.target=c?c.dom:null;var f=t.state,h=f.selection;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||h instanceof $&&h.from<=s&&h.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&T.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){o.view.mouseDown==o&&o.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),bn(t,"pointer")};ao.prototype.done=function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(function(){return ln(t.view)}),this.view.mouseDown=null};ao.prototype.up=function(t){if(this.done(),!!this.view.dom.contains(t.target.nodeType==3?t.target.parentNode:t.target)){var n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(oo(t))),this.allowDefault||!n?bn(this.view,"pointer"):pv(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||T.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||T.chrome&&!(this.view.state.selection instanceof U)&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ln(this.view,B.near(this.view.state.doc.resolve(n.pos)),"pointer"),t.preventDefault()):bn(this.view,"pointer")}};ao.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),bn(this.view,"pointer"),t.buttons==0&&this.done()};qe.touchdown=function(e){Us(e),bn(e,"pointer")};qe.contextmenu=function(e){return Us(e)};function Ih(e,t){return e.composing?!0:T.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500?(e.compositionEndedAt=-2e8,!0):!1}var vv=T.android?5e3:-1;$e.compositionstart=$e.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(function(s){return s.type.spec.inclusive===!1})))e.markCursor=e.state.storedMarks||n.marks(),Li(e,!0),e.markCursor=null;else if(Li(e),T.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){var a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(a.nodeType==3){r.collapse(a,a.nodeValue.length);break}else i=a,o=-1}e.composing=!0}Dh(e,vv)};$e.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Dh(e,20))};function Dh(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout(function(){return Li(e)},t))}function _h(e){for(e.composing&&(e.composing=!1,e.compositionEndedAt=yv());e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function yv(){var e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Li(e,t){if(!(T.android&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),_h(e),t||e.docView.dirty){var n=kh(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}}function kv(e,t){if(!!e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}}var Wn=T.ie&&T.ie_version<15||T.ios&&T.webkit_version<604;qe.copy=$e.cut=function(e,t){var n=e.state.selection,r=t.type=="cut";if(!n.empty){var i=Wn?null:t.clipboardData,o=n.content(),a=xh(e,o),s=a.dom,l=a.text;i?(t.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",l)):kv(e,s),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}};function bv(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function wv(e,t){if(!!e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Aa(e,r.value,null,t):Aa(e,r.textContent,r.innerHTML,t)},50)}}function Aa(e,t,n,r){var i=Sh(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",function(s){return s(e,r,i||I.empty)}))return!0;if(!i)return!1;var o=bv(i),a=o?e.state.tr.replaceSelectionWith(o,e.shiftKey):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}$e.paste=function(e,t){if(!(e.composing&&!T.android)){var n=Wn?null:t.clipboardData;n&&Aa(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():wv(e,t)}};var Cv=function(t,n){this.slice=t,this.move=n},Ph=T.mac?"altKey":"ctrlKey";qe.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),!!t.dataTransfer){var r=e.state.selection,i=r.empty?null:e.posAtCoords(oo(t));if(!(i&&i.pos>=r.from&&i.pos<=(r instanceof $?r.to-1:r.to))){if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection($.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){var o=e.docView.nearestDesc(t.target,!0);o&&o.node.type.spec.draggable&&o!=e.docView&&e.dispatch(e.state.tr.setSelection($.create(e.state.doc,o.posBefore)))}}var a=e.state.selection.content(),s=xh(e,a),l=s.dom,u=s.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Wn?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Wn||t.dataTransfer.setData("text/plain",u),e.dragging=new Cv(a,!t[Ph])}};qe.dragend=function(e){var t=e.dragging;window.setTimeout(function(){e.dragging==t&&(e.dragging=null)},50)};$e.dragover=$e.dragenter=function(e,t){return t.preventDefault()};$e.drop=function(e,t){var n=e.dragging;if(e.dragging=null,!!t.dataTransfer){var r=e.posAtCoords(oo(t));if(!!r){var i=e.state.doc.resolve(r.pos);if(!!i){var o=n&&n.slice;o?e.someProp("transformPasted",function(d){o=d(o)}):o=Sh(e,t.dataTransfer.getData(Wn?"Text":"text/plain"),Wn?null:t.dataTransfer.getData("text/html"),!1,i);var a=n&&!t[Ph];if(e.someProp("handleDrop",function(d){return d(e,t,o||I.empty,a)})){t.preventDefault();return}if(!!o){t.preventDefault();var s=o?Vm(e.state.doc,i.pos,o):i.pos;s==null&&(s=i.pos);var l=e.state.tr;a&&l.deleteSelection();var u=l.mapping.map(s),c=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=l.doc;if(c?l.replaceRangeWith(u,u,o.content.firstChild):l.replaceRange(u,u,o),!l.doc.eq(f)){var h=l.doc.resolve(u);if(c&&$.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new $(h));else{var p=l.mapping.map(s);l.mapping.maps[l.mapping.maps.length-1].forEach(function(d,m,v,g){return p=g}),l.setSelection($s(e,h,l.doc.resolve(p)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}};qe.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&ln(e)},20))};qe.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.set({}),e.focused=!1)};qe.beforeinput=function(e,t){if(T.chrome&&T.android&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();var n=e.domChangeCount;setTimeout(function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",function(o){return o(e,Rn(8,"Backspace"))}))){var r=e.state.selection,i=r.$cursor;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())}},50)}};for(var vu in $e)qe[vu]=$e[vu];function Ir(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var jn=function(t,n){this.spec=n||Sn,this.side=this.spec.side||0,this.toDOM=t};jn.prototype.map=function(t,n,r,i){var o=t.mapResult(n.from+i,this.side<0?-1:1),a=o.pos,s=o.deleted;return s?null:new ye(a-r,a-r,this)};jn.prototype.valid=function(){return!0};jn.prototype.eq=function(t){return this==t||t instanceof jn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Ir(this.spec,t.spec))};jn.prototype.destroy=function(t){this.spec.destroy&&this.spec.destroy(t)};var bt=function(t,n){this.spec=n||Sn,this.attrs=t};bt.prototype.map=function(t,n,r,i){var o=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,a=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=a?null:new ye(o,a,this)};bt.prototype.valid=function(t,n){return n.from<n.to};bt.prototype.eq=function(t){return this==t||t instanceof bt&&Ir(this.attrs,t.attrs)&&Ir(this.spec,t.spec)};bt.is=function(t){return t.type instanceof bt};var Dr=function(t,n){this.spec=n||Sn,this.attrs=t};Dr.prototype.map=function(t,n,r,i){var o=t.mapResult(n.from+i,1);if(o.deleted)return null;var a=t.mapResult(n.to+i,-1);return a.deleted||a.pos<=o.pos?null:new ye(o.pos-r,a.pos-r,this)};Dr.prototype.valid=function(t,n){var r=t.content.findIndex(n.from),i=r.index,o=r.offset,a;return o==n.from&&!(a=t.child(i)).isText&&o+a.nodeSize==n.to};Dr.prototype.eq=function(t){return this==t||t instanceof Dr&&Ir(this.attrs,t.attrs)&&Ir(this.spec,t.spec)};var ye=function(t,n,r){this.from=t,this.to=n,this.type=r},Gs={spec:{configurable:!0},inline:{configurable:!0}};ye.prototype.copy=function(t,n){return new ye(t,n,this.type)};ye.prototype.eq=function(t,n){return n===void 0&&(n=0),this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to};ye.prototype.map=function(t,n,r){return this.type.map(t,this,n,r)};ye.widget=function(t,n,r){return new ye(t,t,new jn(n,r))};ye.inline=function(t,n,r,i){return new ye(t,n,new bt(r,i))};ye.node=function(t,n,r,i){return new ye(t,n,new Dr(r,i))};Gs.spec.get=function(){return this.type.spec};Gs.inline.get=function(){return this.type instanceof bt};Object.defineProperties(ye.prototype,Gs);var Bi=[],Sn={},Z=function(t,n){this.local=t&&t.length?t:Bi,this.children=n&&n.length?n:Bi};Z.create=function(t,n){return n.length?so(n,t,0,Sn):Ee};Z.prototype.find=function(t,n,r){var i=[];return this.findInner(t==null?0:t,n==null?1e9:n,i,0,r),i};Z.prototype.findInner=function(t,n,r,i,o){for(var a=0;a<this.local.length;a++){var s=this.local[a];s.from<=n&&s.to>=t&&(!o||o(s.spec))&&r.push(s.copy(s.from+i,s.to+i))}for(var l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>t){var u=this.children[l]+1;this.children[l+2].findInner(t-u,n-u,r,i+u,o)}};Z.prototype.map=function(t,n,r){return this==Ee||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Sn)};Z.prototype.mapInner=function(t,n,r,i,o){for(var a,s=0;s<this.local.length;s++){var l=this.local[s].map(t,r,i);l&&l.type.valid(n,l)?(a||(a=[])).push(l):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?xv(this.children,a,t,n,r,i,o):a?new Z(a.sort(Mn)):Ee};Z.prototype.add=function(t,n){return n.length?this==Ee?Z.create(t,n):this.addInner(t,n,0):this};Z.prototype.addInner=function(t,n,r){var i=this,o,a=0;t.forEach(function(u,c){var f=c+r,h;if(!!(h=Fh(n,u,f))){for(o||(o=i.children.slice());a<o.length&&o[a]<c;)a+=3;o[a]==c?o[a+2]=o[a+2].addInner(u,h,f+1):o.splice(a,0,c,c+u.nodeSize,so(h,u,f+1,Sn)),a+=3}});for(var s=Rh(a?zh(n):n,-r),l=0;l<s.length;l++)s[l].type.valid(t,s[l])||s.splice(l--,1);return new Z(s.length?this.local.concat(s).sort(Mn):this.local,o||this.children)};Z.prototype.remove=function(t){return t.length==0||this==Ee?this:this.removeInner(t,0)};Z.prototype.removeInner=function(t,n){for(var r=this.children,i=this.local,o=0;o<r.length;o+=3){for(var a=void 0,s=r[o]+n,l=r[o+1]+n,u=0,c=void 0;u<t.length;u++)(c=t[u])&&c.from>s&&c.to<l&&(t[u]=null,(a||(a=[])).push(c));if(!!a){r==this.children&&(r=this.children.slice());var f=r[o+2].removeInner(a,s+1);f!=Ee?r[o+2]=f:(r.splice(o,3),o-=3)}}if(i.length){for(var h=0,p=void 0;h<t.length;h++)if(p=t[h])for(var d=0;d<i.length;d++)i[d].eq(p,n)&&(i==this.local&&(i=this.local.slice()),i.splice(d--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Z(i,r):Ee};Z.prototype.forChild=function(t,n){if(this==Ee)return this;if(n.isLeaf)return Z.empty;for(var r,i,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(r=this.children[o+2]);break}for(var a=t+1,s=a+n.content.size,l=0;l<this.local.length;l++){var u=this.local[l];if(u.from<s&&u.to>a&&u.type instanceof bt){var c=Math.max(a,u.from)-a,f=Math.min(s,u.to)-a;c<f&&(i||(i=[])).push(u.copy(c,f))}}if(i){var h=new Z(i.sort(Mn));return r?new ct([h,r]):h}return r||Ee};Z.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Z)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0};Z.prototype.locals=function(t){return Qs(this.localsInner(t))};Z.prototype.localsInner=function(t){if(this==Ee)return Bi;if(t.inlineContent||!this.local.some(bt.is))return this.local;for(var n=[],r=0;r<this.local.length;r++)this.local[r].type instanceof bt||n.push(this.local[r]);return n};var Ee=new Z;Z.empty=Ee;Z.removeOverlap=Qs;var ct=function(t){this.members=t};ct.prototype.map=function(t,n){var r=this.members.map(function(i){return i.map(t,n,Sn)});return ct.from(r)};ct.prototype.forChild=function(t,n){if(n.isLeaf)return Z.empty;for(var r=[],i=0;i<this.members.length;i++){var o=this.members[i].forChild(t,n);o!=Ee&&(o instanceof ct?r=r.concat(o.members):r.push(o))}return ct.from(r)};ct.prototype.eq=function(t){if(!(t instanceof ct)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0};ct.prototype.locals=function(t){for(var n,r=!0,i=0;i<this.members.length;i++){var o=this.members[i].localsInner(t);if(!!o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(var a=0;a<o.length;a++)n.push(o[a])}}return n?Qs(r?n:n.sort(Mn)):Bi};ct.from=function(t){switch(t.length){case 0:return Ee;case 1:return t[0];default:return new ct(t)}};function xv(e,t,n,r,i,o,a){for(var s=e.slice(),l=function(N,_,L,ee){for(var j=0;j<s.length;j+=3){var x=s[j+1],me=void 0;x==-1||N>x+o||(_>=s[j]+o?s[j+1]=-1:L>=i&&(me=ee-L-(_-N))&&(s[j]+=me,s[j+1]+=me))}},u=0;u<n.maps.length;u++)n.maps[u].forEach(l);for(var c=!1,f=0;f<s.length;f+=3)if(s[f+1]==-1){var h=n.map(e[f]+o),p=h-i;if(p<0||p>=r.content.size){c=!0;continue}var d=n.map(e[f+1]+o,-1),m=d-i,v=r.content.findIndex(p),g=v.index,y=v.offset,C=r.maybeChild(g);if(C&&y==p&&y+C.nodeSize==m){var S=s[f+2].mapInner(n,C,h+1,e[f]+o+1,a);S!=Ee?(s[f]=p,s[f+1]=m,s[f+2]=S):(s[f+1]=-2,c=!0)}else c=!0}if(c){var O=Sv(s,e,t||[],n,i,o,a),w=so(O,r,0,a);t=w.local;for(var E=0;E<s.length;E+=3)s[E+1]<0&&(s.splice(E,3),E-=3);for(var R=0,P=0;R<w.children.length;R+=3){for(var F=w.children[R];P<s.length&&s[P]<F;)P+=3;s.splice(P,0,w.children[R],w.children[R+1],w.children[R+2])}}return new Z(t&&t.sort(Mn),s)}function Rh(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(new ye(i.from+t,i.to+t,i.type))}return n}function Sv(e,t,n,r,i,o,a){function s(u,c){for(var f=0;f<u.local.length;f++){var h=u.local[f].map(r,i,c);h?n.push(h):a.onRemove&&a.onRemove(u.local[f].spec)}for(var p=0;p<u.children.length;p+=3)s(u.children[p+2],u.children[p]+c+1)}for(var l=0;l<e.length;l+=3)e[l+1]==-1&&s(e[l+2],t[l]+o+1);return n}function Fh(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,i=null,o=0,a=void 0;o<e.length;o++)(a=e[o])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),e[o]=null);return i}function zh(e){for(var t=[],n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function so(e,t,n,r){var i=[],o=!1;t.forEach(function(l,u){var c=Fh(e,l,u+n);if(c){o=!0;var f=so(c,l,n+u+1,r);f!=Ee&&i.push(u,u+l.nodeSize,f)}});for(var a=Rh(o?zh(e):e,-n).sort(Mn),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||i.length?new Z(a,i):Ee}function Mn(e,t){return e.from-t.from||e.to-t.to}function Qs(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var i=n+1;i<t.length;i++){var o=t[i];if(o.from==r.from){o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),yu(t,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),yu(t,i,r.copy(o.from,r.to)));break}}}return t}function yu(e,t,n){for(;t<e.length&&Mn(n,e[t])>0;)t++;e.splice(t,0,n)}function Zs(e){var t=[];return e.someProp("decorations",function(n){var r=n(e.state);r&&r!=Ee&&t.push(r)}),e.cursorWrapper&&t.push(Z.create(e.state.doc,[e.cursorWrapper.deco])),ct.from(t)}var ke=function(t,n){this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Hh),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Vh(this),this.markCursor=null,this.cursorWrapper=null,Bh(this),this.nodeViews=$h(this),this.docView=ph(this.state.doc,Lh(this),Zs(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,av(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},lo={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};lo.props.get=function(){if(this._props.state!=this.state){var e=this._props;this._props={};for(var t in e)this._props[t]=e[t];this._props.state=this.state}return this._props};ke.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&qs(this),this._props=t,t.plugins&&(t.plugins.forEach(Hh),this.directPlugins=t.plugins),this.updateStateInner(t.state,!0)};ke.prototype.setProps=function(t){var n={};for(var r in this._props)n[r]=this._props[r];n.state=this.state;for(var i in t)n[i]=t[i];this.update(n)};ke.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)};ke.prototype.updateStateInner=function(t,n){var r=this,i=this.state,o=!1,a=!1;if(t.storedMarks&&this.composing&&(_h(this),a=!0),this.state=t,n){var s=$h(this);Ov(s,this.nodeViews)&&(this.nodeViews=s,o=!0),qs(this)}this.editable=Vh(this),Bh(this);var l=Zs(this),u=Lh(this),c=n?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(t.doc,u,l);(f||!t.selection.eq(i.selection))&&(a=!0);var h=c=="preserve"&&a&&this.dom.style.overflowAnchor==null&&yg(this);if(a){this.domObserver.stop();var p=f&&(T.ie||T.chrome)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&Mv(i.selection,t.selection);if(f){var d=T.chrome?this.trackWrites=this.root.getSelection().focusNode:null;(o||!this.docView.update(t.doc,u,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ph(t.doc,u,l,this.dom,this)),d&&!this.trackWrites&&(p=!0)}p||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&Wg(this))?ln(this,p):(wh(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),c=="reset")this.dom.scrollTop=0;else if(c=="to selection"){var m=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(v){return v(r)})||(t.selection instanceof $?eu(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),m):eu(this,this.coordsAtPos(t.selection.head,1),m))}else h&&kg(h)};ke.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()};ke.prototype.updatePluginViews=function(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var n=0;n<this.directPlugins.length;n++){var r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var o=this.state.plugins[i];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}else for(var a=0;a<this.pluginViews.length;a++){var s=this.pluginViews[a];s.update&&s.update(this,t)}};ke.prototype.someProp=function(t,n){var r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(var o=0;o<this.directPlugins.length;o++){var a=this.directPlugins[o].props[t];if(a!=null&&(i=n?n(a):a))return i}var s=this.state.plugins;if(s)for(var l=0;l<s.length;l++){var u=s[l].props[t];if(u!=null&&(i=n?n(u):u))return i}};ke.prototype.hasFocus=function(){return this.root.activeElement==this.dom};ke.prototype.focus=function(){this.domObserver.stop(),this.editable&&bg(this.dom),ln(this),this.domObserver.start()};lo.root.get=function(){var e=this._root;if(e==null){for(var t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t}return e||document};ke.prototype.posAtCoords=function(t){return Mg(this,t)};ke.prototype.coordsAtPos=function(t,n){return n===void 0&&(n=1),uh(this,t,n)};ke.prototype.domAtPos=function(t,n){return n===void 0&&(n=0),this.docView.domFromPos(t,n)};ke.prototype.nodeDOM=function(t){var n=this.docView.descAt(t);return n?n.nodeDOM:null};ke.prototype.posAtDOM=function(t,n,r){r===void 0&&(r=-1);var i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i};ke.prototype.endOfTextblock=function(t,n){return Ng(this,n||this.state,t)};ke.prototype.destroy=function(){!this.docView||(sv(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Zs(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)};lo.isDestroyed.get=function(){return this.docView==null};ke.prototype.dispatchEvent=function(t){return uv(this,t)};ke.prototype.dispatch=function(t){var n=this._props.dispatchTransaction;n?n.call(this,t):this.updateState(this.state.apply(t))};Object.defineProperties(ke.prototype,lo);function Lh(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",function(n){if(typeof n=="function"&&(n=n(e.state)),n)for(var r in n)r=="class"&&(t.class+=" "+n[r]),r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),[ye.node(0,e.state.doc.content.size,t)]}function Bh(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:ye.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Vh(e){return!e.someProp("editable",function(t){return t(e.state)===!1})}function Mv(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function $h(e){var t={};return e.someProp("nodeViews",function(n){for(var r in n)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=n[r])}),t}function Ov(e,t){var n=0,r=0;for(var i in e){if(e[i]!=t[i])return!0;n++}for(var o in t)r++;return n!=r}function Hh(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var qn=function(e){function t(n){e.call(this,n,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,i){var o=r.resolve(i.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return I.empty},t.prototype.eq=function(r){return r instanceof t&&r.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(r,i){if(typeof i.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(r.resolve(i.pos))},t.prototype.getBookmark=function(){return new Vi(this.anchor)},t.valid=function(r){var i=r.parent;if(i.isTextblock||!Av(r)||!Ev(r))return!1;var o=i.type.spec.allowGapCursor;if(o!=null)return o;var a=i.contentMatchAt(r.index()).defaultType;return a&&a.isTextblock},t.findFrom=function(r,i,o){e:for(;;){if(!o&&t.valid(r))return r;for(var a=r.pos,s=null,l=r.depth;;l--){var u=r.node(l);if(i>0?r.indexAfter(l)<u.childCount:r.index(l)>0){s=u.child(i>0?r.indexAfter(l):r.index(l)-1);break}else if(l==0)return null;a+=i;var c=r.doc.resolve(a);if(t.valid(c))return c}for(;;){var f=i>0?s.firstChild:s.lastChild;if(!f){if(s.isAtom&&!s.isText&&!$.isSelectable(s)){r=r.doc.resolve(a+s.nodeSize*i),o=!1;continue e}break}s=f,a+=i;var h=r.doc.resolve(a);if(t.valid(h))return h}return null}},t}(B);qn.prototype.visible=!1;B.jsonID("gapcursor",qn);var Vi=function(t){this.pos=t};Vi.prototype.map=function(t){return new Vi(t.map(this.pos))};Vi.prototype.resolve=function(t){var n=t.resolve(this.pos);return qn.valid(n)?new qn(n):B.near(n)};function Av(e){for(var t=e.depth;t>=0;t--){var n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(var i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Ev(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(var i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}zs({ArrowLeft:ei("horiz",-1),ArrowRight:ei("horiz",1),ArrowUp:ei("vert",-1),ArrowDown:ei("vert",1)});function ei(e,t){var n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,o){var a=r.selection,s=t>0?a.$to:a.$from,l=a.empty;if(a instanceof U){if(!o.endOfTextblock(n)||s.depth==0)return!1;l=!1,s=r.doc.resolve(t>0?s.after():s.before())}var u=qn.findFrom(s,t,l);return u?(i&&i(r.tr.setSelection(new qn(u))),!0):!1}}var $i=200,Ae=function(){};Ae.prototype.append=function(t){return t.length?(t=Ae.from(t),!this.length&&t||t.length<$i&&this.leafAppend(t)||this.length<$i&&t.leafPrepend(this)||this.appendInner(t)):this};Ae.prototype.prepend=function(t){return t.length?Ae.from(t).append(this):this};Ae.prototype.appendInner=function(t){return new Tv(this,t)};Ae.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Ae.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Ae.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ae.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Ae.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,a){return i.push(t(o,a))},n,r),i};Ae.from=function(t){return t instanceof Ae?t:t&&t.length?new Wh(t):Ae.empty};var Wh=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new t(this.values.slice(i,o))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,o,a,s){for(var l=o;l<a;l++)if(i(this.values[l],s+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,o,a,s){for(var l=o-1;l>=a;l--)if(i(this.values[l],s+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=$i)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=$i)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Ae);Ae.empty=new Wh([]);var Tv=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,o,a){var s=this.left.length;if(i<s&&this.left.forEachInner(r,i,Math.min(o,s),a)===!1||o>s&&this.right.forEachInner(r,Math.max(i-s,0),Math.min(this.length,o)-s,a+s)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,o,a){var s=this.left.length;if(i>s&&this.right.forEachInvertedInner(r,i-s,Math.max(o,s)-s,a+s)===!1||o<s&&this.left.forEachInvertedInner(r,Math.min(i,s),o,a)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Ae),jh=Ae,Nv=500,Te=function(t,n){this.items=t,this.eventCount=n};Te.prototype.popEvent=function(t,n){var r=this;if(this.eventCount==0)return null;for(var i=this.items.length;;i--){var o=this.items.get(i-1);if(o.selection){--i;break}}var a,s;n&&(a=this.remapping(i,this.items.length),s=a.maps.length);var l=t.tr,u,c,f=[],h=[];return this.items.forEach(function(p,d){if(!p.step){a||(a=r.remapping(i,d+1),s=a.maps.length),s--,h.push(p);return}if(a){h.push(new Tt(p.map));var m=p.step.map(a.slice(s)),v;m&&l.maybeStep(m).doc&&(v=l.mapping.maps[l.mapping.maps.length-1],f.push(new Tt(v,null,null,f.length+h.length))),s--,v&&a.appendMap(v,s)}else l.maybeStep(p.step);if(p.selection)return u=a?p.selection.map(a.slice(s)):p.selection,c=new Te(r.items.slice(0,i).append(h.reverse().concat(f)),r.eventCount-1),!1},this.items.length,0),{remaining:c,transform:l,selection:u}};Te.prototype.addTransform=function(t,n,r,i){for(var o=[],a=this.eventCount,s=this.items,l=!i&&s.length?s.get(s.length-1):null,u=0;u<t.steps.length;u++){var c=t.steps[u].invert(t.docs[u]),f=new Tt(t.mapping.maps[u],c,n),h=void 0;(h=l&&l.merge(f))&&(f=h,u?o.pop():s=s.slice(0,s.length-1)),o.push(f),n&&(a++,n=null),i||(l=f)}var p=a-r.depth;return p>Dv&&(s=Iv(s,p),a-=p),new Te(s.append(o),a)};Te.prototype.remapping=function(t,n){var r=new Re;return this.items.forEach(function(i,o){var a=i.mirrorOffset!=null&&o-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:null;r.appendMap(i.map,a)},t,n),r};Te.prototype.addMaps=function(t){return this.eventCount==0?this:new Te(this.items.append(t.map(function(n){return new Tt(n)})),this.eventCount)};Te.prototype.rebased=function(t,n){if(!this.eventCount)return this;var r=[],i=Math.max(0,this.items.length-n),o=t.mapping,a=t.steps.length,s=this.eventCount;this.items.forEach(function(p){p.selection&&s--},i);var l=n;this.items.forEach(function(p){var d=o.getMirror(--l);if(d!=null){a=Math.min(a,d);var m=o.maps[d];if(p.step){var v=t.steps[d].invert(t.docs[d]),g=p.selection&&p.selection.map(o.slice(l+1,d));g&&s++,r.push(new Tt(m,v,g))}else r.push(new Tt(m))}},i);for(var u=[],c=n;c<a;c++)u.push(new Tt(o.maps[c]));var f=this.items.slice(0,i).append(u).append(r),h=new Te(f,s);return h.emptyItemCount()>Nv&&(h=h.compress(this.items.length-r.length)),h};Te.prototype.emptyItemCount=function(){var t=0;return this.items.forEach(function(n){n.step||t++}),t};Te.prototype.compress=function(t){t===void 0&&(t=this.items.length);var n=this.remapping(0,t),r=n.maps.length,i=[],o=0;return this.items.forEach(function(a,s){if(s>=t)i.push(a),a.selection&&o++;else if(a.step){var l=a.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){var c=a.selection&&a.selection.map(n.slice(r));c&&o++;var f=new Tt(u.invert(),l,c),h,p=i.length-1;(h=i.length&&i[p].merge(f))?i[p]=h:i.push(f)}}else a.map&&r--},this.items.length,0),new Te(jh.from(i.reverse()),o)};Te.empty=new Te(jh.empty,0);function Iv(e,t){var n;return e.forEach(function(r,i){if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}var Tt=function(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i};Tt.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new Tt(n.getMap().invert(),n,this.selection)}};var Ut=function(t,n,r,i){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i},Dv=20;function _v(e,t,n,r){var i=n.getMeta(Yt),o;if(i)return i.historyState;n.getMeta(Rv)&&(e=new Ut(e.done,e.undone,null,0));var a=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(a&&a.getMeta(Yt))return a.getMeta(Yt).redo?new Ut(e.done.addTransform(n,null,r,mi(t)),e.undone,ku(n.mapping.maps[n.steps.length-1]),e.prevTime):new Ut(e.done,e.undone.addTransform(n,null,r,mi(t)),null,e.prevTime);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){var s=e.prevTime==0||!a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Pv(n,e.prevRanges)),l=a?Ho(e.prevRanges,n.mapping):ku(n.mapping.maps[n.steps.length-1]);return new Ut(e.done.addTransform(n,s?t.selection.getBookmark():null,r,mi(t)),Te.empty,l,n.time)}else return(o=n.getMeta("rebased"))?new Ut(e.done.rebased(n,o),e.undone.rebased(n,o),Ho(e.prevRanges,n.mapping),e.prevTime):new Ut(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Ho(e.prevRanges,n.mapping),e.prevTime)}function Pv(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach(function(r,i){for(var o=0;o<t.length;o+=2)r<=t[o+1]&&i>=t[o]&&(n=!0)}),n}function ku(e){var t=[];return e.forEach(function(n,r,i,o){return t.push(i,o)}),t}function Ho(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function qh(e,t,n,r){var i=mi(t),o=Yt.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,i);if(!!a){var s=a.selection.resolve(a.transform.doc),l=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),o,i),u=new Ut(r?l:a.remaining,r?a.remaining:l,null,0);n(a.transform.setSelection(s).setMeta(Yt,{redo:r,historyState:u}).scrollIntoView())}}var Wo=!1,bu=null;function mi(e){var t=e.plugins;if(bu!=t){Wo=!1,bu=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Wo=!0;break}}return Wo}var Yt=new Pt("history"),Rv=new Pt("closeHistory");function GS(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new _t({key:Yt,state:{init:function(){return new Ut(Te.empty,Te.empty,null,0)},apply:function(n,r,i){return _v(r,i,n,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(n,r){var i=r.inputType=="historyUndo"?Fv(n.state,n.dispatch):r.inputType=="historyRedo"?zv(n.state,n.dispatch):!1;return i&&r.preventDefault(),i}}}})}function Fv(e,t){var n=Yt.getState(e);return!n||n.done.eventCount==0?!1:(t&&qh(n,e,t,!1),!0)}function zv(e,t){var n=Yt.getState(e);return!n||n.undone.eventCount==0?!1:(t&&qh(n,e,t,!0),!0)}var Ue=function(t,n){this.match=t,this.handler=typeof n=="string"?Lv(n):n};function Lv(e){return function(t,n,r,i){var o=e;if(n[1]){var a=n[0].lastIndexOf(n[1]);o+=n[0].slice(a+n[1].length),r+=a;var s=r-i;s>0&&(o=n[0].slice(a-s,a)+o,r=i)}return t.tr.insertText(o,r,i)}}var Bv=500;function Vv(e){var t=e.rules,n=new _t({state:{init:function(){return null},apply:function(i,o){var a=i.getMeta(this);return a||(i.selectionSet||i.docChanged?null:o)}},props:{handleTextInput:function(i,o,a,s){return wu(i,o,a,s,t,n)},handleDOMEvents:{compositionend:function(r){setTimeout(function(){var i=r.state.selection,o=i.$cursor;o&&wu(r,o.pos,o.pos,"",t,n)})}}},isInputRules:!0});return n}function wu(e,t,n,r,i,o){if(e.composing)return!1;var a=e.state,s=a.doc.resolve(t);if(s.parent.type.spec.code)return!1;for(var l=s.parent.textBetween(Math.max(0,s.parentOffset-Bv),s.parentOffset,null,"\uFFFC")+r,u=0;u<i.length;u++){var c=i[u].match.exec(l),f=c&&i[u].handler(a,c,t-(c[0].length-r.length),n);if(!!f)return e.dispatch(f.setMeta(o,{transform:f,from:t,to:n,text:r})),!0}return!1}new Ue(/--$/,"\u2014");new Ue(/\.\.\.$/,"\u2026");new Ue(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C");new Ue(/"$/,"\u201D");new Ue(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018");new Ue(/'$/,"\u2019");function jr(e,t,n,r){return new Ue(e,function(i,o,a,s){var l=n instanceof Function?n(o):n,u=i.tr.delete(a,s),c=u.doc.resolve(a),f=c.blockRange(),h=f&&Vf(f,t,l);if(!h)return null;u.wrap(f,h);var p=u.doc.resolve(a-1).nodeBefore;return p&&p.type==t&&Ts(u.doc,a-1)&&(!r||r(o,p))&&u.join(a-1),u})}function Ea(e,t,n){return new Ue(e,function(r,i,o,a){var s=r.doc.resolve(o),l=n instanceof Function?n(i):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?r.tr.delete(o,a).setBlockType(o,o,t,l):null})}function Jh(e){return function(t,n){var r=t.selection,i=r.$from,o=r.$to,a=r.node;if(a&&a.isBlock||i.depth<2||!i.sameParent(o))return!1;var s=i.node(-1);if(s.type!=e)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==2||i.node(-3).type!=e||i.index(-2)!=i.node(-2).childCount-1)return!1;if(n){for(var l=A.empty,u=i.index(-1)?1:i.index(-2)?2:3,c=i.depth-u;c>=i.depth-3;c--)l=A.from(i.node(c).copy(l));var f=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;l=l.append(A.from(e.createAndFill()));var h=i.before(i.depth-(u-1)),p=t.tr.replace(h,i.after(-f),new I(l,4-u,0)),d=-1;p.doc.nodesBetween(h,p.doc.content.size,function(y,C){if(d>-1)return!1;y.isTextblock&&y.content.size==0&&(d=C+1)}),d>-1&&p.setSelection(t.selection.constructor.near(p.doc.resolve(d))),n(p.scrollIntoView())}return!0}var m=o.pos==i.end()?s.contentMatchAt(0).defaultType:null,v=t.tr.delete(i.pos,o.pos),g=m&&[null,{type:m}];return kr(v.doc,i.pos,2,g)?(n&&n(v.split(i.pos,2,g).scrollIntoView()),!0):!1}}function Kh(e){return function(t,n){var r=t.selection,i=r.$from,o=r.$to,a=i.blockRange(o,function(s){return s.childCount&&s.firstChild.type==e});return a?n?i.node(a.depth-1).type==e?$v(t,n,e,a):Hv(t,n,a):!0:!1}}function $v(e,t,n,r){var i=e.tr,o=r.end,a=r.$to.end(r.depth);return o<a&&(i.step(new ft(o-1,a,o,a,new I(A.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ss(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth)),t(i.lift(r,eo(r)).scrollIntoView()),!0}function Hv(e,t,n){for(var r=e.tr,i=n.parent,o=n.end,a=n.endIndex-1,s=n.startIndex;a>s;a--)o-=i.child(a).nodeSize,r.delete(o-1,o+1);var l=r.doc.resolve(n.start),u=l.nodeAfter;if(r.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;var c=n.startIndex==0,f=n.endIndex==i.childCount,h=l.node(-1),p=l.index(-1);if(!h.canReplace(p+(c?0:1),p+1,u.content.append(f?A.empty:A.from(i))))return!1;var d=l.pos,m=d+u.nodeSize;return r.step(new ft(d-(c?1:0),m+(f?1:0),d+1,m-1,new I((c?A.empty:A.from(i.copy(A.empty))).append(f?A.empty:A.from(i.copy(A.empty))),c?0:1,f?0:1),c?0:1)),t(r.scrollIntoView()),!0}function Uh(e){return function(t,n){var r=t.selection,i=r.$from,o=r.$to,a=i.blockRange(o,function(m){return m.childCount&&m.firstChild.type==e});if(!a)return!1;var s=a.startIndex;if(s==0)return!1;var l=a.parent,u=l.child(s-1);if(u.type!=e)return!1;if(n){var c=u.lastChild&&u.lastChild.type==l.type,f=A.from(c?e.create():null),h=new I(A.from(e.create(null,A.from(l.type.create(null,f)))),c?3:1,0),p=a.start,d=a.end;n(t.tr.step(new ft(p-(c?3:1),d,p,d,h,1,!0)).scrollIntoView())}return!0}}var Ta,Na;if(typeof WeakMap!="undefined"){var Cu=new WeakMap;Ta=function(e){return Cu.get(e)},Na=function(e,t){return Cu.set(e,t),t}}else{var sr=[],Wv=10,ti=0;Ta=function(e){for(var t=0;t<sr.length;t+=2)if(sr[t]==e)return sr[t+1]},Na=function(e,t){return ti==Wv&&(ti=0),sr[ti++]=e,sr[ti++]=t}}var Jn=function(t,n,r,i){this.left=t,this.top=n,this.right=r,this.bottom=i},q=function(t,n,r,i){this.width=t,this.height=n,this.map=r,this.problems=i};q.prototype.findCell=function(t){for(var n=0;n<this.map.length;n++){var r=this.map[n];if(r==t){for(var i=n%this.width,o=n/this.width|0,a=i+1,s=o+1,l=1;a<this.width&&this.map[n+l]==r;l++)a++;for(var u=1;s<this.height&&this.map[n+this.width*u]==r;u++)s++;return new Jn(i,o,a,s)}}throw new RangeError("No cell with offset "+t+" found")};q.prototype.colCount=function(t){for(var n=0;n<this.map.length;n++)if(this.map[n]==t)return n%this.width;throw new RangeError("No cell with offset "+t+" found")};q.prototype.nextCell=function(t,n,r){var i=this.findCell(t),o=i.left,a=i.right,s=i.top,l=i.bottom;return n=="horiz"?(r<0?o==0:a==this.width)?null:this.map[s*this.width+(r<0?o-1:a)]:(r<0?s==0:l==this.height)?null:this.map[o+this.width*(r<0?s-1:l)]};q.prototype.rectBetween=function(t,n){var r=this.findCell(t),i=r.left,o=r.right,a=r.top,s=r.bottom,l=this.findCell(n),u=l.left,c=l.right,f=l.top,h=l.bottom;return new Jn(Math.min(i,u),Math.min(a,f),Math.max(o,c),Math.max(s,h))};q.prototype.cellsInRect=function(t){for(var n=[],r={},i=t.top;i<t.bottom;i++)for(var o=t.left;o<t.right;o++){var a=i*this.width+o,s=this.map[a];r[s]||(r[s]=!0,(o!=t.left||!o||this.map[a-1]!=s)&&(i!=t.top||!i||this.map[a-this.width]!=s)&&n.push(s))}return n};q.prototype.positionAt=function(t,n,r){for(var i=0,o=0;;i++){var a=o+r.child(i).nodeSize;if(i==t){for(var s=n+t*this.width,l=(t+1)*this.width;s<l&&this.map[s]<o;)s++;return s==l?a-1:this.map[s]}o=a}};q.get=function(t){return Ta(t)||Na(t,jv(t))};function jv(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);for(var t=qv(e),n=e.childCount,r=[],i=0,o=null,a=[],s=0,l=t*n;s<l;s++)r[s]=0;for(var u=0,c=0;u<n;u++){var f=e.child(u);c++;for(var h=0;;h++){for(;i<r.length&&r[i]!=0;)i++;if(h==f.childCount)break;for(var p=f.child(h),d=p.attrs,m=d.colspan,v=d.rowspan,g=d.colwidth,y=0;y<v;y++){if(y+u>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:c,n:v-y});break}for(var C=i+y*t,S=0;S<m;S++){r[C+S]==0?r[C+S]=c:(o||(o=[])).push({type:"collision",row:u,pos:c,n:m-S});var O=g&&g[S];if(O){var w=(C+S)%t*2,E=a[w];E==null||E!=O&&a[w+1]==1?(a[w]=O,a[w+1]=1):E==O&&a[w+1]++}}}i+=m,c+=p.nodeSize}for(var R=(u+1)*t,P=0;i<R;)r[i++]==0&&P++;P&&(o||(o=[])).push({type:"missing",row:u,n:P}),c++}for(var F=new q(t,n,r,o),N=!1,_=0;!N&&_<a.length;_+=2)a[_]!=null&&a[_+1]<n&&(N=!0);return N&&Jv(F,a,e),F}function qv(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var i=e.child(r),o=0;if(n)for(var a=0;a<r;a++)for(var s=e.child(a),l=0;l<s.childCount;l++){var u=s.child(l);a+u.attrs.rowspan>r&&(o+=u.attrs.colspan)}for(var c=0;c<i.childCount;c++){var f=i.child(c);o+=f.attrs.colspan,f.attrs.rowspan>1&&(n=!0)}t==-1?t=o:t!=o&&(t=Math.max(t,o))}return t}function Jv(e,t,n){e.problems||(e.problems=[]);for(var r=0,i={};r<e.map.length;r++){var o=e.map[r];if(!i[o]){i[o]=!0;for(var a=n.nodeAt(o),s=null,l=0;l<a.attrs.colspan;l++){var u=(r+l)%e.width,c=t[u*2];c!=null&&(!a.attrs.colwidth||a.attrs.colwidth[l]!=c)&&((s||(s=Kv(a.attrs)))[l]=c)}s&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:s})}}}function Kv(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}function xu(e,t){var n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(function(u){return Number(u)}):null,i=Number(e.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(var a in t){var s=t[a].getFromDOM,l=s&&s(e);l!=null&&(o[a]=l)}return o}function Su(e,t){var n={};e.attrs.colspan!=1&&(n.colspan=e.attrs.colspan),e.attrs.rowspan!=1&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(","));for(var r in t){var i=t[r].setDOMAttr;i&&i(e.attrs[r],n)}return n}function Uv(e){var t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(i){return xu(i,t)}}],toDOM:function(o){return["td",Su(o,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(i){return xu(i,t)}}],toDOM:function(o){return["th",Su(o,t),0]}}}}function Je(e){var t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(var n in e.nodes){var r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}}return t}var Gt=new Pt("selectingCells");function qr(e){for(var t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function ht(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function uo(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&t.node.type.spec.tableRole=="cell"?t.$anchor:qr(t.$head)||Gv(t.$head)}function Gv(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(var i=e.nodeBefore,o=e.pos;i;i=i.lastChild,o--){var a=i.type.spec.tableRole;if(a=="cell"||a=="header_cell")return e.doc.resolve(o-i.nodeSize)}}function Ia(e){return e.parent.type.spec.tableRole=="row"&&e.nodeAfter}function Qv(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function Ys(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Gh(e,t,n){var r=e.start(-1),i=q.get(e.node(-1)),o=i.nextCell(e.pos-r,t,n);return o==null?null:e.node(0).resolve(r+o)}function nt(e,t,n){var r={};for(var i in e)r[i]=e[i];return r[t]=n,r}function wn(e,t,n){n===void 0&&(n=1);var r=nt(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(function(i){return i>0})||(r.colwidth=null)),r}function Zv(e,t,n){n===void 0&&(n=1);var r=nt(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var i=0;i<n;i++)r.colwidth.splice(t,0,0)}return r}function Yv(e,t,n){for(var r=Je(t.type.schema).header_cell,i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0}var fe=function(e){function t(n,r){r===void 0&&(r=n);var i=n.node(-1),o=q.get(i),a=n.start(-1),s=o.rectBetween(n.pos-a,r.pos-a),l=n.node(0),u=o.cellsInRect(s).filter(function(f){return f!=r.pos-a});u.unshift(r.pos-a);var c=u.map(function(f){var h=i.nodeAt(f),p=f+a+1;return new Jf(l.resolve(p),l.resolve(p+h.content.size))});e.call(this,c[0].$from,c[0].$to,c),this.$anchorCell=n,this.$headCell=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,i){var o=r.resolve(i.map(this.$anchorCell.pos)),a=r.resolve(i.map(this.$headCell.pos));if(Ia(o)&&Ia(a)&&Ys(o,a)){var s=this.$anchorCell.node(-1)!=o.node(-1);return s&&this.isRowSelection()?t.rowSelection(o,a):s&&this.isColSelection()?t.colSelection(o,a):new t(o,a)}return U.between(o,a)},t.prototype.content=function(){for(var r=this.$anchorCell.node(-1),i=q.get(r),o=this.$anchorCell.start(-1),a=i.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o),s={},l=[],u=a.top;u<a.bottom;u++){for(var c=[],f=u*i.width+a.left,h=a.left;h<a.right;h++,f++){var p=i.map[f];if(!s[p]){s[p]=!0;var d=i.findCell(p),m=r.nodeAt(p),v=a.left-d.left,g=d.right-a.right;if(v>0||g>0){var y=m.attrs;v>0&&(y=wn(y,0,v)),g>0&&(y=wn(y,y.colspan-g,g)),d.left<a.left?m=m.type.createAndFill(y):m=m.type.create(y,m.content)}if(d.top<a.top||d.bottom>a.bottom){var C=nt(m.attrs,"rowspan",Math.min(d.bottom,a.bottom)-Math.max(d.top,a.top));d.top<a.top?m=m.type.createAndFill(C):m=m.type.create(C,m.content)}c.push(m)}}l.push(r.child(u).copy(A.from(c)))}var S=this.isColSelection()&&this.isRowSelection()?r:l;return new I(A.from(S),1,1)},t.prototype.replace=function(r,i){i===void 0&&(i=I.empty);for(var o=r.steps.length,a=this.ranges,s=0;s<a.length;s++){var l=a[s],u=l.$from,c=l.$to,f=r.mapping.slice(o);r.replace(f.map(u.pos),f.map(c.pos),s?I.empty:i)}var h=e.findFrom(r.doc.resolve(r.mapping.slice(o).map(this.to)),-1);h&&r.setSelection(h)},t.prototype.replaceWith=function(r,i){this.replace(r,new I(A.from(i),0,0))},t.prototype.forEachCell=function(r){for(var i=this.$anchorCell.node(-1),o=q.get(i),a=this.$anchorCell.start(-1),s=o.cellsInRect(o.rectBetween(this.$anchorCell.pos-a,this.$headCell.pos-a)),l=0;l<s.length;l++)r(i.nodeAt(s[l]),a+s[l])},t.prototype.isColSelection=function(){var r=this.$anchorCell.index(-1),i=this.$headCell.index(-1);if(Math.min(r,i)>0)return!1;var o=r+this.$anchorCell.nodeAfter.attrs.rowspan,a=i+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(o,a)==this.$headCell.node(-1).childCount},t.colSelection=function(r,i){i===void 0&&(i=r);var o=q.get(r.node(-1)),a=r.start(-1),s=o.findCell(r.pos-a),l=o.findCell(i.pos-a),u=r.node(0);return s.top<=l.top?(s.top>0&&(r=u.resolve(a+o.map[s.left])),l.bottom<o.height&&(i=u.resolve(a+o.map[o.width*(o.height-1)+l.right-1]))):(l.top>0&&(i=u.resolve(a+o.map[l.left])),s.bottom<o.height&&(r=u.resolve(a+o.map[o.width*(o.height-1)+s.right-1]))),new t(r,i)},t.prototype.isRowSelection=function(){var r=q.get(this.$anchorCell.node(-1)),i=this.$anchorCell.start(-1),o=r.colCount(this.$anchorCell.pos-i),a=r.colCount(this.$headCell.pos-i);if(Math.min(o,a)>0)return!1;var s=o+this.$anchorCell.nodeAfter.attrs.colspan,l=a+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,l)==r.width},t.prototype.eq=function(r){return r instanceof t&&r.$anchorCell.pos==this.$anchorCell.pos&&r.$headCell.pos==this.$headCell.pos},t.rowSelection=function(r,i){i===void 0&&(i=r);var o=q.get(r.node(-1)),a=r.start(-1),s=o.findCell(r.pos-a),l=o.findCell(i.pos-a),u=r.node(0);return s.left<=l.left?(s.left>0&&(r=u.resolve(a+o.map[s.top*o.width])),l.right<o.width&&(i=u.resolve(a+o.map[o.width*(l.top+1)-1]))):(l.left>0&&(i=u.resolve(a+o.map[l.top*o.width])),s.right<o.width&&(r=u.resolve(a+o.map[o.width*(s.top+1)-1]))),new t(r,i)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(r,i){return new t(r.resolve(i.anchor),r.resolve(i.head))},t.create=function(r,i,o){return o===void 0&&(o=i),new t(r.resolve(i),r.resolve(o))},t.prototype.getBookmark=function(){return new Hi(this.$anchorCell.pos,this.$headCell.pos)},t}(B);fe.prototype.visible=!1;B.jsonID("cell",fe);var Hi=function(t,n){this.anchor=t,this.head=n};Hi.prototype.map=function(t){return new Hi(t.map(this.anchor),t.map(this.head))};Hi.prototype.resolve=function(t){var n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&Ys(n,r)?new fe(n,r):B.near(r,1)};function Xv(e){if(!(e.selection instanceof fe))return null;var t=[];return e.selection.forEachCell(function(n,r){t.push(ye.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Z.create(e.doc,t)}function ey(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,i=n.pos,o=t.depth;o>=0&&!(t.after(o+1)<t.end(o));o--,r++);for(var a=n.depth;a>=0&&!(n.before(a+1)>n.start(a));a--,i--);return r==i&&/row|table/.test(t.node(o).type.spec.tableRole)}function ty(e){for(var t=e.$from,n=e.$to,r,i,o=t.depth;o>0;o--){var a=t.node(o);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){r=a;break}}for(var s=n.depth;s>0;s--){var l=n.node(s);if(l.type.spec.tableRole==="cell"||l.type.spec.tableRole==="header_cell"){i=l;break}}return r!==i&&n.parentOffset===0}function ny(e,t,n){var r=(t||e).selection,i=(t||e).doc,o,a;if(r instanceof $&&(a=r.node.type.spec.tableRole)){if(a=="cell"||a=="header_cell")o=fe.create(i,r.from);else if(a=="row"){var s=i.resolve(r.from+1);o=fe.rowSelection(s,s)}else if(!n){var l=q.get(r.node),u=r.from+1,c=u+l.map[l.width*l.height-1];o=fe.create(i,u+1,c)}}else r instanceof U&&ey(r)?o=U.create(i,r.from):r instanceof U&&ty(r)&&(o=U.create(i,r.$from.start(),r.$from.end()));return o&&(t||(t=e.tr)).setSelection(o),t}function ry(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;t.childCount==1&&(n>0&&r>0||t.firstChild.type.spec.tableRole=="table");)n--,r--,t=t.firstChild.content;var i=t.firstChild,o=i.type.spec.tableRole,a=i.type.schema,s=[];if(o=="row")for(var l=0;l<t.childCount;l++){var u=t.child(l).content,c=l?0:Math.max(0,n-1),f=l<t.childCount-1?0:Math.max(0,r-1);(c||f)&&(u=Da(Je(a).row,new I(u,c,f)).content),s.push(u)}else if(o=="cell"||o=="header_cell")s.push(n||r?Da(Je(a).row,new I(t,n,r)).content:t);else return null;return iy(a,s)}function iy(e,t){for(var n=[],r=0;r<t.length;r++)for(var i=t[r],o=i.childCount-1;o>=0;o--)for(var a=i.child(o).attrs,s=a.rowspan,l=a.colspan,u=r;u<r+s;u++)n[u]=(n[u]||0)+l;for(var c=0,f=0;f<n.length;f++)c=Math.max(c,n[f]);for(var h=0;h<n.length;h++)if(h>=t.length&&t.push(A.empty),n[h]<c){for(var p=Je(e).cell.createAndFill(),d=[],m=n[h];m<c;m++)d.push(p);t[h]=t[h].append(A.from(d))}return{height:t.length,width:c,rows:t}}function Da(e,t){var n=e.createAndFill(),r=new he(n).replace(0,n.content.size,t);return r.doc}function oy(e,t,n){var r=e.width,i=e.height,o=e.rows;if(r!=t){for(var a=[],s=[],l=0;l<o.length;l++){for(var u=o[l],c=[],f=a[l]||0,h=0;f<t;h++){var p=u.child(h%u.childCount);f+p.attrs.colspan>t&&(p=p.type.create(wn(p.attrs,p.attrs.colspan,f+p.attrs.colspan-t),p.content)),c.push(p),f+=p.attrs.colspan;for(var d=1;d<p.attrs.rowspan;d++)a[l+d]=(a[l+d]||0)+p.attrs.colspan}s.push(A.from(c))}o=s,r=t}if(i!=n){for(var m=[],v=0,g=0;v<n;v++,g++){for(var y=[],C=o[g%i],S=0;S<C.childCount;S++){var O=C.child(S);v+O.attrs.rowspan>n&&(O=O.type.create(nt(O.attrs,"rowspan",Math.max(1,n-O.attrs.rowspan)),O.content)),y.push(O)}m.push(A.from(y))}o=m,i=n}return{width:r,height:i,rows:o}}function ay(e,t,n,r,i,o,a){var s=e.doc.type.schema,l=Je(s),u,c;if(i>t.width)for(var f=0,h=0;f<t.height;f++){var p=n.child(f);h+=p.nodeSize;var d=[],m=void 0;p.lastChild==null||p.lastChild.type==l.cell?m=u||(u=l.cell.createAndFill()):m=c||(c=l.header_cell.createAndFill());for(var v=t.width;v<i;v++)d.push(m);e.insert(e.mapping.slice(a).map(h-1+r),d)}if(o>t.height){for(var g=[],y=0,C=(t.height-1)*t.width;y<Math.max(t.width,i);y++){var S=y>=t.width?!1:n.nodeAt(t.map[C+y]).type==l.header_cell;g.push(S?c||(c=l.header_cell.createAndFill()):u||(u=l.cell.createAndFill()))}for(var O=l.row.create(null,A.from(g)),w=[],E=t.height;E<o;E++)w.push(O);e.insert(e.mapping.slice(a).map(r+n.nodeSize-2),w)}return!!(u||c)}function Mu(e,t,n,r,i,o,a,s){if(a==0||a==t.height)return!1;for(var l=!1,u=i;u<o;u++){var c=a*t.width+u,f=t.map[c];if(t.map[c-t.width]==f){l=!0;var h=n.nodeAt(f),p=t.findCell(f),d=p.top,m=p.left;e.setNodeMarkup(e.mapping.slice(s).map(f+r),null,nt(h.attrs,"rowspan",a-d)),e.insert(e.mapping.slice(s).map(t.positionAt(a,m,n)),h.type.createAndFill(nt(h.attrs,"rowspan",d+h.attrs.rowspan-a))),u+=h.attrs.colspan-1}}return l}function Ou(e,t,n,r,i,o,a,s){if(a==0||a==t.width)return!1;for(var l=!1,u=i;u<o;u++){var c=u*t.width+a,f=t.map[c];if(t.map[c-1]==f){l=!0;var h=n.nodeAt(f),p=t.colCount(f),d=e.mapping.slice(s).map(f+r);e.setNodeMarkup(d,null,wn(h.attrs,a-p,h.attrs.colspan-(a-p))),e.insert(d+h.nodeSize,h.type.createAndFill(wn(h.attrs,0,a-p))),u+=h.attrs.rowspan-1}}return l}function Au(e,t,n,r,i){var o=n?e.doc.nodeAt(n-1):e.doc,a=q.get(o),s=r.top,l=r.left,u=l+i.width,c=s+i.height,f=e.tr,h=0;function p(){o=n?f.doc.nodeAt(n-1):f.doc,a=q.get(o),h=f.mapping.maps.length}ay(f,a,o,n,u,c,h)&&p(),Mu(f,a,o,n,l,u,s,h)&&p(),Mu(f,a,o,n,l,u,c,h)&&p(),Ou(f,a,o,n,s,c,l,h)&&p(),Ou(f,a,o,n,s,c,u,h)&&p();for(var d=s;d<c;d++){var m=a.positionAt(d,l,o),v=a.positionAt(d,u,o);f.replace(f.mapping.slice(h).map(m+n),f.mapping.slice(h).map(v+n),new I(i.rows[d-s],0,0))}p(),f.setSelection(new fe(f.doc.resolve(n+a.positionAt(s,l,o)),f.doc.resolve(n+a.positionAt(c-1,u-1,o)))),t(f)}var sy=zs({ArrowLeft:ni("horiz",-1),ArrowRight:ni("horiz",1),ArrowUp:ni("vert",-1),ArrowDown:ni("vert",1),"Shift-ArrowLeft":ri("horiz",-1),"Shift-ArrowRight":ri("horiz",1),"Shift-ArrowUp":ri("vert",-1),"Shift-ArrowDown":ri("vert",1),Backspace:ii,"Mod-Backspace":ii,Delete:ii,"Mod-Delete":ii});function gi(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function ni(e,t){return function(n,r,i){var o=n.selection;if(o instanceof fe)return gi(n,r,B.near(o.$headCell,t));if(e!="horiz"&&!o.empty)return!1;var a=Qh(i,e,t);if(a==null)return!1;if(e=="horiz")return gi(n,r,B.near(n.doc.resolve(o.head+t),t));var s=n.doc.resolve(a),l=Gh(s,e,t),u;return l?u=B.near(l,1):t<0?u=B.near(n.doc.resolve(s.before(-1)),-1):u=B.near(n.doc.resolve(s.after(-1)),1),gi(n,r,u)}}function ri(e,t){return function(n,r,i){var o=n.selection;if(!(o instanceof fe)){var a=Qh(i,e,t);if(a==null)return!1;o=new fe(n.doc.resolve(a))}var s=Gh(o.$headCell,e,t);return s?gi(n,r,new fe(o.$anchorCell,s)):!1}}function ii(e,t){var n=e.selection;if(!(n instanceof fe))return!1;if(t){var r=e.tr,i=Je(e.schema).cell.createAndFill().content;n.forEachCell(function(o,a){o.content.eq(i)||r.replace(r.mapping.map(a+1),r.mapping.map(a+o.nodeSize-1),new I(i,0,0))}),r.docChanged&&t(r)}return!0}function ly(e,t){var n=e.state.doc,r=qr(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new fe(r))),!0):!1}function uy(e,t,n){if(!ht(e.state))return!1;var r=ry(n),i=e.state.selection;if(i instanceof fe){r||(r={width:1,height:1,rows:[A.from(Da(Je(e.state.schema).cell,n))]});var o=i.$anchorCell.node(-1),a=i.$anchorCell.start(-1),s=q.get(o).rectBetween(i.$anchorCell.pos-a,i.$headCell.pos-a);return r=oy(r,s.right-s.left,s.bottom-s.top),Au(e.state,e.dispatch,a,s,r),!0}else if(r){var l=uo(e.state),u=l.start(-1);return Au(e.state,e.dispatch,u,q.get(l.node(-1)).findCell(l.pos-u),r),!0}else return!1}function cy(e,t){if(t.ctrlKey||t.metaKey)return;var n=Eu(e,t.target),r;if(t.shiftKey&&e.state.selection instanceof fe)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&n&&(r=qr(e.state.selection.$anchor))!=null&&jo(e,t).pos!=r.pos)i(r,t),t.preventDefault();else if(!n)return;function i(s,l){var u=jo(e,l),c=Gt.getState(e.state)==null;if(!u||!Ys(s,u))if(c)u=s;else return;var f=new fe(s,u);if(c||!e.state.selection.eq(f)){var h=e.state.tr.setSelection(f);c&&h.setMeta(Gt,s.pos),e.dispatch(h)}}function o(){e.root.removeEventListener("mouseup",o),e.root.removeEventListener("dragstart",o),e.root.removeEventListener("mousemove",a),Gt.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(Gt,-1))}function a(s){var l=Gt.getState(e.state),u;if(l!=null)u=e.state.doc.resolve(l);else if(Eu(e,s.target)!=n&&(u=jo(e,t),!u))return o();u&&i(u,s)}e.root.addEventListener("mouseup",o),e.root.addEventListener("dragstart",o),e.root.addEventListener("mousemove",a)}function Qh(e,t,n){if(!(e.state.selection instanceof U))return null;for(var r=e.state.selection,i=r.$head,o=i.depth-1;o>=0;o--){var a=i.node(o),s=n<0?i.index(o):i.indexAfter(o);if(s!=(n<0?0:a.childCount))return null;if(a.type.spec.tableRole=="cell"||a.type.spec.tableRole=="header_cell"){var l=i.before(o),u=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(u)?l:null}}return null}function Eu(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t}function jo(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?qr(e.state.doc.resolve(n.pos)):null}var fy=new Pt("fix-tables");function Zh(e,t,n,r){var i=e.childCount,o=t.childCount;e:for(var a=0,s=0;a<o;a++){for(var l=t.child(a),u=s,c=Math.min(i,a+3);u<c;u++)if(e.child(u)==l){s=u+1,n+=l.nodeSize;continue e}r(l,n),s<i&&e.child(s).sameMarkup(l)?Zh(e.child(s),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function hy(e,t){var n,r=function(i,o){i.type.spec.tableRole=="table"&&(n=py(e,i,o,n))};return t?t.doc!=e.doc&&Zh(t.doc,e.doc,0,r):e.doc.descendants(r),n}function py(e,t,n,r){var i=q.get(t);if(!i.problems)return r;r||(r=e.tr);for(var o=[],a=0;a<i.height;a++)o.push(0);for(var s=0;s<i.problems.length;s++){var l=i.problems[s];if(l.type=="collision"){for(var u=t.nodeAt(l.pos),c=0;c<u.attrs.rowspan;c++)o[l.row+c]+=l.n;r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,wn(u.attrs,u.attrs.colspan-l.n,l.n))}else if(l.type=="missing")o[l.row]+=l.n;else if(l.type=="overlong_rowspan"){var f=t.nodeAt(l.pos);r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,nt(f.attrs,"rowspan",f.attrs.rowspan-l.n))}else if(l.type=="colwidth mismatch"){var h=t.nodeAt(l.pos);r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,nt(h.attrs,"colwidth",l.colwidth))}}for(var p,d,m=0;m<o.length;m++)o[m]&&(p==null&&(p=m),d=m);for(var v=0,g=n+1;v<i.height;v++){var y=t.child(v),C=g+y.nodeSize,S=o[v];if(S>0){var O="cell";y.firstChild&&(O=y.firstChild.type.spec.tableRole);for(var w=[],E=0;E<S;E++)w.push(Je(e.schema)[O].createAndFill());var R=(v==0||p==v-1)&&d==v?g+1:C-1;r.insert(r.mapping.map(R),w)}g=C}return r.setMeta(fy,{fixTables:!0})}function nn(e){var t=e.selection,n=uo(e),r=n.node(-1),i=n.start(-1),o=q.get(r),a;return t instanceof fe?a=o.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):a=o.findCell(n.pos-i),a.tableStart=i,a.map=o,a.table=r,a}function Yh(e,t,n){var r=t.map,i=t.tableStart,o=t.table,a=n>0?-1:0;Yv(r,o,n+a)&&(a=n==0||n==r.width?null:0);for(var s=0;s<r.height;s++){var l=s*r.width+n;if(n>0&&n<r.width&&r.map[l-1]==r.map[l]){var u=r.map[l],c=o.nodeAt(u);e.setNodeMarkup(e.mapping.map(i+u),null,Zv(c.attrs,n-r.colCount(u))),s+=c.attrs.rowspan-1}else{var f=a==null?Je(o.type.schema).cell:o.nodeAt(r.map[l+a]).type,h=r.positionAt(s,n,o);e.insert(e.mapping.map(i+h),f.createAndFill())}}return e}function dy(e,t){if(!ht(e))return!1;if(t){var n=nn(e);t(Yh(e.tr,n,n.left))}return!0}function my(e,t){if(!ht(e))return!1;if(t){var n=nn(e);t(Yh(e.tr,n,n.right))}return!0}function gy(e,t,n){for(var r=t.map,i=t.table,o=t.tableStart,a=e.mapping.maps.length,s=0;s<r.height;){var l=s*r.width+n,u=r.map[l],c=i.nodeAt(u);if(n>0&&r.map[l-1]==u||n<r.width-1&&r.map[l+1]==u)e.setNodeMarkup(e.mapping.slice(a).map(o+u),null,wn(c.attrs,n-r.colCount(u)));else{var f=e.mapping.slice(a).map(o+u);e.delete(f,f+c.nodeSize)}s+=c.attrs.rowspan}}function vy(e,t){if(!ht(e))return!1;if(t){var n=nn(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(var i=n.right-1;gy(r,n,i),i!=n.left;i--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=q.get(n.table);t(r)}return!0}function yy(e,t,n){for(var r=t.map,i=t.table,o=t.tableStart,a=0,s=0;s<n;s++)a+=i.child(s).nodeSize;var l=a+i.child(n).nodeSize,u=e.mapping.maps.length;e.delete(a+o,l+o);for(var c=0,f=n*r.width;c<r.width;c++,f++){var h=r.map[f];if(n>0&&h==r.map[f-r.width]){var p=i.nodeAt(h).attrs;e.setNodeMarkup(e.mapping.slice(u).map(h+o),null,nt(p,"rowspan",p.rowspan-1)),c+=p.colspan-1}else if(n<r.width&&h==r.map[f+r.width]){var d=i.nodeAt(h),m=d.type.create(nt(d.attrs,"rowspan",d.attrs.rowspan-1),d.content),v=r.positionAt(n+1,c,i);e.insert(e.mapping.slice(u).map(o+v),m),c+=d.attrs.colspan-1}}}function ky(e,t){if(!ht(e))return!1;if(t){var n=nn(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(var i=n.bottom-1;yy(r,n,i),i!=n.top;i--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=q.get(n.table);t(r)}return!0}function qo(e,t){return function(n,r){if(!ht(n))return!1;var i=uo(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){var o=n.tr;n.selection instanceof fe?n.selection.forEachCell(function(a,s){a.attrs[e]!==t&&o.setNodeMarkup(s,null,nt(a.attrs,e,t))}):o.setNodeMarkup(i.pos,null,nt(i.nodeAfter.attrs,e,t)),r(o)}return!0}}function by(e){return function(t,n){if(!ht(t))return!1;if(n){for(var r=Je(t.schema),i=nn(t),o=t.tr,a=i.map.cellsInRect(e=="column"?new Jn(i.left,0,i.right,i.map.height):e=="row"?new Jn(0,i.top,i.map.width,i.bottom):i),s=a.map(function(c){return i.table.nodeAt(c)}),l=0;l<a.length;l++)s[l].type==r.header_cell&&o.setNodeMarkup(i.tableStart+a[l],r.cell,s[l].attrs);if(o.steps.length==0)for(var u=0;u<a.length;u++)o.setNodeMarkup(i.tableStart+a[u],r.header_cell,s[u].attrs);n(o)}return!0}}function Tu(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1}),i=0;i<r.length;i++){var o=t.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function Xs(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?by(e):function(n,r){if(!ht(n))return!1;if(r){var i=Je(n.schema),o=nn(n),a=n.tr,s=Tu("row",o,i),l=Tu("column",o,i),u=e==="column"?s:e==="row"?l:!1,c=u?1:0,f=e=="column"?new Jn(0,c,1,o.map.height):e=="row"?new Jn(c,0,o.map.width,1):o,h=e=="column"?l?i.cell:i.header_cell:e=="row"?s?i.cell:i.header_cell:i.cell;o.map.cellsInRect(f).forEach(function(p){var d=p+o.tableStart,m=a.doc.nodeAt(d);m&&a.setNodeMarkup(d,h,m.attrs)}),r(a)}return!0}}Xs("row",{useDeprecatedLogic:!0});Xs("column",{useDeprecatedLogic:!0});Xs("cell",{useDeprecatedLogic:!0});function wy(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,i=e.before();r>=0;r--){var o=e.node(-1).child(r);if(o.childCount)return i-1-o.lastChild.nodeSize;i-=o.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var a=e.node(-1),s=e.indexAfter(-1),l=e.after();s<a.childCount;s++){var u=a.child(s);if(u.childCount)return l+1;l+=u.nodeSize}}}function Nu(e){return function(t,n){if(!ht(t))return!1;var r=wy(uo(t),e);if(r!=null){if(n){var i=t.doc.resolve(r);n(t.tr.setSelection(U.between(i,Qv(i))).scrollIntoView())}return!0}}}function Cy(e,t){for(var n=e.selection.$anchor,r=n.depth;r>0;r--){var i=n.node(r);if(i.type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var el=function(t,n){this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),tl(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};el.prototype.update=function(t){return t.type!=this.node.type?!1:(this.node=t,tl(t,this.colgroup,this.table,this.cellMinWidth),!0)};el.prototype.ignoreMutation=function(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))};function tl(e,t,n,r,i,o){for(var a=0,s=!0,l=t.firstChild,u=e.firstChild,c=0,f=0;c<u.childCount;c++)for(var h=u.child(c).attrs,p=h.colspan,d=h.colwidth,m=0;m<p;m++,f++){var v=i==f?o:d&&d[m],g=v?v+"px":"";a+=v||r,v||(s=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=g}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}s?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}var st=new Pt("tableColumnResizing");function xy(e){e===void 0&&(e={});var t=e.handleWidth;t===void 0&&(t=5);var n=e.cellMinWidth;n===void 0&&(n=25);var r=e.View;r===void 0&&(r=el);var i=e.lastColumnResizable;i===void 0&&(i=!0);var o=new _t({key:st,state:{init:function(s,l){return this.spec.props.nodeViews[Je(l.schema).table.name]=function(u,c){return new r(u,n,c)},new hr(-1,!1)},apply:function(s,l){return l.apply(s)}},props:{attributes:function(s){var l=st.getState(s);return l.activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(s,l){Sy(s,l,t,n,i)},mouseleave:function(s){My(s)},mousedown:function(s,l){Oy(s,l,n)}},decorations:function(s){var l=st.getState(s);if(l.activeHandle>-1)return Dy(s,l.activeHandle)},nodeViews:{}}});return o}var hr=function(t,n){this.activeHandle=t,this.dragging=n};hr.prototype.apply=function(t){var n=this,r=t.getMeta(st);if(r&&r.setHandle!=null)return new hr(r.setHandle,null);if(r&&r.setDragging!==void 0)return new hr(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){var i=t.mapping.map(n.activeHandle,-1);Ia(t.doc.resolve(i))||(i=null),n=new hr(i,n.dragging)}return n};function Sy(e,t,n,r,i){var o=st.getState(e.state);if(!o.dragging){var a=Ey(t.target),s=-1;if(a){var l=a.getBoundingClientRect(),u=l.left,c=l.right;t.clientX-u<=n?s=Iu(e,t,"left"):c-t.clientX<=n&&(s=Iu(e,t,"right"))}if(s!=o.activeHandle){if(!i&&s!==-1){var f=e.state.doc.resolve(s),h=f.node(-1),p=q.get(h),d=f.start(-1),m=p.colCount(f.pos-d)+f.nodeAfter.attrs.colspan-1;if(m==p.width-1)return}Xh(e,s)}}}function My(e){var t=st.getState(e.state);t.activeHandle>-1&&!t.dragging&&Xh(e,-1)}function Oy(e,t,n){var r=st.getState(e.state);if(r.activeHandle==-1||r.dragging)return!1;var i=e.state.doc.nodeAt(r.activeHandle),o=Ay(e,r.activeHandle,i.attrs);e.dispatch(e.state.tr.setMeta(st,{setDragging:{startX:t.clientX,startWidth:o}}));function a(l){window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",s);var u=st.getState(e.state);u.dragging&&(Ty(e,u.activeHandle,Du(u.dragging,l,n)),e.dispatch(e.state.tr.setMeta(st,{setDragging:null})))}function s(l){if(!l.which)return a(l);var u=st.getState(e.state),c=Du(u.dragging,l,n);Ny(e,u.activeHandle,c,n)}return window.addEventListener("mouseup",a),window.addEventListener("mousemove",s),t.preventDefault(),!0}function Ay(e,t,n){var r=n.colspan,i=n.colwidth,o=i&&i[i.length-1];if(o)return o;var a=e.domAtPos(t),s=a.node.childNodes[a.offset],l=s.offsetWidth,u=r;if(i)for(var c=0;c<r;c++)i[c]&&(l-=i[c],u--);return l/u}function Ey(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}function Iu(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return-1;var i=r.pos,o=qr(e.state.doc.resolve(i));if(!o)return-1;if(n=="right")return o.pos;var a=q.get(o.node(-1)),s=o.start(-1),l=a.map.indexOf(o.pos-s);return l%a.width==0?-1:s+a.map[l-1]}function Du(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function Xh(e,t){e.dispatch(e.state.tr.setMeta(st,{setHandle:t}))}function Ty(e,t,n){for(var r=e.state.doc.resolve(t),i=r.node(-1),o=q.get(i),a=r.start(-1),s=o.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,l=e.state.tr,u=0;u<o.height;u++){var c=u*o.width+s;if(!(u&&o.map[c]==o.map[c-o.width])){var f=o.map[c],h=i.nodeAt(f),p=h.attrs,d=p.colspan==1?0:s-o.colCount(f);if(!(p.colwidth&&p.colwidth[d]==n)){var m=p.colwidth?p.colwidth.slice():Iy(p.colspan);m[d]=n,l.setNodeMarkup(a+f,null,nt(p,"colwidth",m))}}}l.docChanged&&e.dispatch(l)}function Ny(e,t,n,r){for(var i=e.state.doc.resolve(t),o=i.node(-1),a=i.start(-1),s=q.get(o).colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1,l=e.domAtPos(i.start(-1)).node;l.nodeName!="TABLE";)l=l.parentNode;tl(o,l.firstChild,l,r,s,n)}function Iy(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function Dy(e,t){for(var n=[],r=e.doc.resolve(t),i=r.node(-1),o=q.get(i),a=r.start(-1),s=o.colCount(r.pos-a)+r.nodeAfter.attrs.colspan,l=0;l<o.height;l++){var u=s+l*o.width-1;if((s==o.width||o.map[u]!=o.map[u+1])&&(l==0||o.map[u-1]!=o.map[u-1-o.width])){var c=o.map[u],f=a+c+i.nodeAt(c).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(ye.widget(f,h))}}return Z.create(e.doc,n)}function _y(e){e===void 0&&(e={});var t=e.allowTableNodeSelection;return t===void 0&&(t=!1),new _t({key:Gt,state:{init:function(){return null},apply:function(r,i){var o=r.getMeta(Gt);if(o!=null)return o==-1?null:o;if(i==null||!r.docChanged)return i;var a=r.mapping.mapResult(i),s=a.deleted,l=a.pos;return s?null:l}},props:{decorations:Xv,handleDOMEvents:{mousedown:cy},createSelectionBetween:function(r){if(Gt.getState(r.state)!=null)return r.state.selection},handleTripleClick:ly,handleKeyDown:sy,handlePaste:uy},appendTransaction:function(r,i,o){return ny(o,hy(o,i),t)}})}function Jo(e,t,n,r,i,o){if(e.composing)return!1;const a=e.state,s=a.doc.resolve(t);if(s.parent.type.spec.code)return!1;const l=s.parent.textBetween(Math.max(0,s.parentOffset-500),s.parentOffset,void 0,"\uFFFC")+r;for(let u=0;u<i.length;u++){const c=i[u].match.exec(l),f=c&&i[u].handler(a,c,t-(c[0].length-r.length),n);if(!!f)return e.dispatch(f.setMeta(o,{transform:f,from:t,to:n,text:r})),!0}return!1}const Py=new Pt("customInputRules"),Ry=({rules:e})=>{const t=new _t({key:Py,isInputRules:!0,state:{init(){return null},apply(n,r){const i=n.getMeta(this);return i||(n.selectionSet||n.docChanged?null:r)}},props:{handleTextInput(n,r,i,o){return Jo(n,r,i,o,e,t)},handleDOMEvents:{compositionend:n=>(setTimeout(()=>{const{$cursor:r}=n.state.selection;r&&Jo(n,r.pos,r.pos,"",e,t)}),!1)},handleKeyDown(n,r){if(r.key!=="Enter")return!1;const{$cursor:i}=n.state.selection;return i?Jo(n,i.pos,i.pos,`
`,e,t):!1}}});return t};function Cn(e,t){return new Ue(e,(n,r,i,o)=>{const{tr:a}=n,s=r.length;let l=i,u=o;if(r[s-1]){const c=r[0],f=r[s-1],h=r[s-2],p=i+c.indexOf(h),d=p+h.length-1,m=p+h.lastIndexOf(f),v=m+f.length;if(Fy(i,o,n).filter(y=>y.mark.type.excludes(t)).filter(y=>y.end>p).length)return null;v<d&&a.delete(v,d),m>p&&a.delete(p,m),l=p,u=l+f.length}return a.addMark(l,u,t.create()),a.removeStoredMark(t),a})}function Fy(e,t,n){let r=[];return n.doc.nodesBetween(e,t,(i,o)=>{r=[...r,...i.marks.map(a=>({start:o,end:o+i.nodeSize,mark:a}))]}),r}const zy=(e,t,n)=>{var r;const i=e.state,{from:o}=i.selection,{node:a}=e.domAtPos(o),s=a instanceof Text?a.parentElement:a;if(!(s instanceof HTMLElement))throw new Error;const l=s.getBoundingClientRect(),u=t.getBoundingClientRect(),c=(r=t.parentElement)==null?void 0:r.getBoundingClientRect();if(!c)throw new Error;const[f,h]=n(l,u,c);t.style.top=f+"px",t.style.left=h+"px"},QS=(e,t,n)=>{const r=e.state,{from:i,to:o}=r.selection,a=e.coordsAtPos(i),s=e.coordsAtPos(o),l=t.getBoundingClientRect(),u=t.parentElement;if(!u)throw new Error;const c=u.getBoundingClientRect(),[f,h]=n(a,s,l,c);t.style.top=f+"px",t.style.left=h+"px"},ep=e=>Object.assign(Object.create(e),e).setTime(Date.now()),Ly=(e,t)=>Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e,By=e=>t=>{for(let n=t.depth;n>0;n--){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},Vy=e=>t=>By(e)(t.$from),$y=(e,t)=>{if(!(e instanceof $))return;const{node:n,$from:r}=e;if(Ly(t,n))return{node:n,pos:r.pos,start:r.start(r.depth),depth:r.depth}};function _u(e){if(e)throw e}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var tp=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)},vi=Object.prototype.hasOwnProperty,np=Object.prototype.toString,Pu=Object.defineProperty,Ru=Object.getOwnPropertyDescriptor,Fu=function(t){return typeof Array.isArray=="function"?Array.isArray(t):np.call(t)==="[object Array]"},zu=function(t){if(!t||np.call(t)!=="[object Object]")return!1;var n=vi.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&vi.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i=="undefined"||vi.call(t,i)},Lu=function(t,n){Pu&&n.name==="__proto__"?Pu(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Bu=function(t,n){if(n==="__proto__")if(vi.call(t,n)){if(Ru)return Ru(t,n).value}else return;return t[n]},Vu=function e(){var t,n,r,i,o,a,s=arguments[0],l=1,u=arguments.length,c=!1;for(typeof s=="boolean"&&(c=s,s=arguments[1]||{},l=2),(s==null||typeof s!="object"&&typeof s!="function")&&(s={});l<u;++l)if(t=arguments[l],t!=null)for(n in t)r=Bu(s,n),i=Bu(t,n),s!==i&&(c&&i&&(zu(i)||(o=Fu(i)))?(o?(o=!1,a=r&&Fu(r)?r:[]):a=r&&zu(r)?r:{},Lu(s,{name:n,newValue:e(c,a,i)})):typeof i!="undefined"&&Lu(s,{name:n,newValue:i}));return s};function _a(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Hy(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);s(null,...i);function s(l,...u){const c=e[++o];let f=-1;if(l){a(l);return}for(;++f<i.length;)(u[f]===null||u[f]===void 0)&&(u[f]=i[f]);i=u,c?Wy(c,s)(...u):a(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Wy(e,t){let n;return r;function r(...a){const s=e.length>a.length;let l;s&&a.push(i);try{l=e.apply(this,a)}catch(u){const c=u;if(s&&n)throw c;return i(c)}s||(l instanceof Promise?l.then(o,i):l instanceof Error?i(l):o(l))}function i(a,...s){n||(n=!0,t(a,...s))}function o(a){i(null,a)}}var In={}.hasOwnProperty;function xr(e){return!e||typeof e!="object"?"":In.call(e,"position")||In.call(e,"type")?$u(e.position):In.call(e,"start")||In.call(e,"end")?$u(e):In.call(e,"line")||In.call(e,"column")?Pa(e):""}function Pa(e){return Hu(e&&e.line)+":"+Hu(e&&e.column)}function $u(e){return Pa(e&&e.start)+"-"+Pa(e&&e.end)}function Hu(e){return e&&typeof e=="number"?e:1}class mt extends Error{constructor(t,n,r){var i=[null,null],o={start:{line:null,column:null},end:{line:null,column:null}},a;super();typeof n=="string"&&(r=n,n=null),typeof r=="string"&&(a=r.indexOf(":"),a===-1?i[1]=r:(i[0]=r.slice(0,a),i[1]=r.slice(a+1))),n&&("type"in n||"position"in n?n.position&&(o=n.position):"start"in n||"end"in n?o=n:("line"in n||"column"in n)&&(o.start=n)),this.name=xr(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack=typeof t=="object"?t.stack:"",this.reason=this.message,this.fatal,this.line=o.start.line,this.column=o.start.column,this.source=i[0],this.ruleId=i[1],this.position=o,this.actual,this.expected,this.file,this.url,this.note}}mt.prototype.file="";mt.prototype.name="";mt.prototype.reason="";mt.prototype.message="";mt.prototype.stack="";mt.prototype.fatal=null;mt.prototype.column=null;mt.prototype.line=null;mt.prototype.source=null;mt.prototype.ruleId=null;mt.prototype.position=null;const Mt={basename:jy,dirname:qy,extname:Jy,join:Ky,sep:"/"};function jy(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Jr(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,s=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(o){n=i+1;break}}else a<0&&(o=!0,a=i+1),s>-1&&(e.charCodeAt(i)===t.charCodeAt(s--)?s<0&&(r=i):(s=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function qy(e){if(Jr(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Jy(e){Jr(e);let t=e.length,n=-1,r=0,i=-1,o=0,a;for(;t--;){const s=e.charCodeAt(t);if(s===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),s===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Ky(...e){let t=-1,n;for(;++t<e.length;)Jr(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Uy(n)}function Uy(e){Jr(e);const t=e.charCodeAt(0)===47;let n=Gy(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Gy(e,t){let n="",r=0,i=-1,o=0,a=-1,s,l;for(;++a<=e.length;){if(a<e.length)s=e.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,o=0;continue}}else if(n.length>0){n="",r=0,i=a,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,o=0}else s===46&&o>-1?o++:o=-1}return n}function Jr(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Qy={cwd:Zy};function Zy(){return"/"}function Ra(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function Yy(e){if(typeof e=="string")e=new URL(e);else if(!Ra(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Xy(e)}function Xy(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Ko=["history","path","basename","stem","extname","dirname"];class e1{constructor(t){let n;t?typeof t=="string"||tp(t)?n={value:t}:Ra(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=Qy.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<Ko.length;){const o=Ko[r];o in n&&n[o]!==void 0&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)Ko.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){Ra(t)&&(t=Yy(t)),Go(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Mt.dirname(this.path):void 0}set dirname(t){Wu(this.basename,"dirname"),this.path=Mt.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Mt.basename(this.path):void 0}set basename(t){Go(t,"basename"),Uo(t,"basename"),this.path=Mt.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Mt.extname(this.path):void 0}set extname(t){if(Uo(t,"extname"),Wu(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Mt.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Mt.basename(this.path,this.extname):void 0}set stem(t){Go(t,"stem"),Uo(t,"stem"),this.path=Mt.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new mt(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function Uo(e,t){if(e&&e.includes(Mt.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Mt.sep+"`")}function Go(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Wu(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const t1=ip().freeze(),rp={}.hasOwnProperty;function ip(){const e=Hy(),t=[];let n={},r,i=-1;return o.data=a,o.Parser=void 0,o.Compiler=void 0,o.freeze=s,o.attachers=t,o.use=l,o.parse=u,o.stringify=c,o.run=f,o.runSync=h,o.process=p,o.processSync=d,o;function o(){const m=ip();let v=-1;for(;++v<t.length;)m.use(...t[v]);return m.data(Vu(!0,{},n)),m}function a(m,v){return typeof m=="string"?arguments.length===2?(Yo("data",r),n[m]=v,o):rp.call(n,m)&&n[m]||null:m?(Yo("data",r),n=m,o):n}function s(){if(r)return o;for(;++i<t.length;){const[m,...v]=t[i];if(v[0]===!1)continue;v[0]===!0&&(v[1]=void 0);const g=m.call(o,...v);typeof g=="function"&&e.use(g)}return r=!0,i=Number.POSITIVE_INFINITY,o}function l(m,...v){let g;if(Yo("use",r),m!=null)if(typeof m=="function")O(m,...v);else if(typeof m=="object")Array.isArray(m)?S(m):C(m);else throw new TypeError("Expected usable value, not `"+m+"`");return g&&(n.settings=Object.assign(n.settings||{},g)),o;function y(w){if(typeof w=="function")O(w);else if(typeof w=="object")if(Array.isArray(w)){const[E,...R]=w;O(E,...R)}else C(w);else throw new TypeError("Expected usable value, not `"+w+"`")}function C(w){S(w.plugins),w.settings&&(g=Object.assign(g||{},w.settings))}function S(w){let E=-1;if(w!=null)if(Array.isArray(w))for(;++E<w.length;){const R=w[E];y(R)}else throw new TypeError("Expected a list of plugins, not `"+w+"`")}function O(w,E){let R=-1,P;for(;++R<t.length;)if(t[R][0]===w){P=t[R];break}P?(_a(P[1])&&_a(E)&&(E=Vu(!0,P[1],E)),P[1]=E):t.push([...arguments])}}function u(m){o.freeze();const v=lr(m),g=o.Parser;return Qo("parse",g),ju(g,"parse")?new g(String(v),v).parse():g(String(v),v)}function c(m,v){o.freeze();const g=lr(v),y=o.Compiler;return Zo("stringify",y),qu(m),ju(y,"compile")?new y(m,g).compile():y(m,g)}function f(m,v,g){if(qu(m),o.freeze(),!g&&typeof v=="function"&&(g=v,v=void 0),!g)return new Promise(y);y(null,g);function y(C,S){e.run(m,lr(v),O);function O(w,E,R){E=E||m,w?S(w):C?C(E):g(null,E,R)}}}function h(m,v){let g,y;return o.run(m,v,C),Ju("runSync","run",y),g;function C(S,O){_u(S),g=O,y=!0}}function p(m,v){if(o.freeze(),Qo("process",o.Parser),Zo("process",o.Compiler),!v)return new Promise(g);g(null,v);function g(y,C){const S=lr(m);o.run(o.parse(S),S,(w,E,R)=>{if(w||!E||!R)O(w);else{const P=o.stringify(E,R);P==null||(i1(P)?R.value=P:R.result=P),O(w,R)}});function O(w,E){w||!E?C(w):y?y(E):v(null,E)}}}function d(m){let v;o.freeze(),Qo("processSync",o.Parser),Zo("processSync",o.Compiler);const g=lr(m);return o.process(g,y),Ju("processSync","process",v),g;function y(C){v=!0,_u(C)}}}function ju(e,t){return typeof e=="function"&&e.prototype&&(n1(e.prototype)||t in e.prototype)}function n1(e){let t;for(t in e)if(rp.call(e,t))return!0;return!1}function Qo(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function Zo(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Yo(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function qu(e){if(!_a(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Ju(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function lr(e){return r1(e)?e:new e1(e)}function r1(e){return Boolean(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function i1(e){return typeof e=="string"||tp(e)}function nl(e,t){var{includeImageAlt:n=!0}=t||{};return op(e,n)}function op(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&Ku(e.children,t)||Array.isArray(e)&&Ku(e,t))||""}function Ku(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=op(e[r],t);return n.join("")}function Ye(e,t,n,r){const i=e.length;let o=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),[].splice.apply(e,a);else for(n&&[].splice.apply(e,[t,n]);o<r.length;)a=r.slice(o,o+1e4),a.unshift(t,0),[].splice.apply(e,a),o+=1e4,t+=1e4}function at(e,t){return e.length>0?(Ye(e,e.length,0,t),e):t}const Uu={}.hasOwnProperty;function ap(e){const t={};let n=-1;for(;++n<e.length;)o1(t,e[n]);return t}function o1(e,t){let n;for(n in t){const i=(Uu.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let a;for(a in o){Uu.call(i,a)||(i[a]=[]);const s=o[a];a1(i[a],Array.isArray(s)?s:s?[s]:[])}}}function a1(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ye(e,0,0,r)}const s1=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,lt=un(/[A-Za-z]/),Wi=un(/\d/),l1=un(/[\dA-Fa-f]/),Ze=un(/[\dA-Za-z]/),u1=un(/[!-/:-@[-`{-~]/),Gu=un(/[#-'*+\--9=?A-Z^-~]/);function _r(e){return e!==null&&(e<32||e===127)}function ve(e){return e!==null&&(e<0||e===32)}function z(e){return e!==null&&e<-2}function te(e){return e===-2||e===-1||e===32}const co=un(/\s/),fo=un(s1);function un(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function K(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(l){return te(l)?(e.enter(n),s(l)):t(l)}function s(l){return te(l)&&o++<i?(e.consume(l),s):(e.exit(n),t(l))}}const c1={tokenize:f1};function f1(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),K(e,t,"linePrefix")}function i(s){return e.enter("paragraph"),o(s)}function o(s){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,a(s)}function a(s){if(s===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(s);return}return z(s)?(e.consume(s),e.exit("chunkText"),o):(e.consume(s),a)}}const h1={tokenize:p1},Qu={tokenize:d1};function p1(e){const t=this,n=[];let r=0,i,o,a;return s;function s(C){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,l,u)(C)}return u(C)}function l(C){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&y();const S=t.events.length;let O=S,w;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){w=t.events[O][1].end;break}g(r);let E=S;for(;E<t.events.length;)t.events[E][1].end=Object.assign({},w),E++;return Ye(t.events,O+1,0,t.events.slice(S)),t.events.length=E,u(C)}return s(C)}function u(C){if(r===n.length){if(!i)return h(C);if(i.currentConstruct&&i.currentConstruct.concrete)return d(C);t.interrupt=Boolean(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Qu,c,f)(C)}function c(C){return i&&y(),g(r),h(C)}function f(C){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,d(C)}function h(C){return t.containerState={},e.attempt(Qu,p,d)(C)}function p(C){return r++,n.push([t.currentConstruct,t.containerState]),h(C)}function d(C){if(C===null){i&&y(),g(0),e.consume(C);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:i}),m(C)}function m(C){if(C===null){v(e.exit("chunkFlow"),!0),g(0),e.consume(C);return}return z(C)?(e.consume(C),v(e.exit("chunkFlow")),r=0,t.interrupt=void 0,s):(e.consume(C),m)}function v(C,S){const O=t.sliceStream(C);if(S&&O.push(null),C.previous=o,o&&(o.next=C),o=C,i.defineSkip(C.start),i.write(O),t.parser.lazy[C.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<a&&(!i.events[w][1].end||i.events[w][1].end.offset>a))return;const E=t.events.length;let R=E,P,F;for(;R--;)if(t.events[R][0]==="exit"&&t.events[R][1].type==="chunkFlow"){if(P){F=t.events[R][1].end;break}P=!0}for(g(r),w=E;w<t.events.length;)t.events[w][1].end=Object.assign({},F),w++;Ye(t.events,R+1,0,t.events.slice(E)),t.events.length=w}}function g(C){let S=n.length;for(;S-- >C;){const O=n[S];t.containerState=O[1],O[0].exit.call(t,e)}n.length=C}function y(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function d1(e,t,n){return K(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ji(e){if(e===null||ve(e)||co(e))return 1;if(fo(e))return 2}function ho(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const Fa={name:"attention",tokenize:g1,resolveAll:m1};function m1(e,t){let n=-1,r,i,o,a,s,l,u,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),h=Object.assign({},e[n][1].start);Zu(f,-l),Zu(h,l),a={type:l>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},s={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:h},o={type:l>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},s.end)},e[r][1].end=Object.assign({},a.start),e[n][1].start=Object.assign({},s.end),u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=at(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=at(u,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",o,t]]),u=at(u,ho(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=at(u,[["exit",o,t],["enter",s,t],["exit",s,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,u=at(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Ye(e,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function g1(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=ji(r);let o;return a;function a(l){return e.enter("attentionSequence"),o=l,s(l)}function s(l){if(l===o)return e.consume(l),s;const u=e.exit("attentionSequence"),c=ji(l),f=!c||c===2&&i||n.includes(l),h=!i||i===2&&c||n.includes(r);return u._open=Boolean(o===42?f:f&&(i||!h)),u._close=Boolean(o===42?h:h&&(c||!f)),t(l)}}function Zu(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const v1={name:"autolink",tokenize:y1};function y1(e,t,n){let r=1;return i;function i(d){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(d){return lt(d)?(e.consume(d),a):Gu(d)?u(d):n(d)}function a(d){return d===43||d===45||d===46||Ze(d)?s(d):u(d)}function s(d){return d===58?(e.consume(d),l):(d===43||d===45||d===46||Ze(d))&&r++<32?(e.consume(d),s):u(d)}function l(d){return d===62?(e.exit("autolinkProtocol"),p(d)):d===null||d===32||d===60||_r(d)?n(d):(e.consume(d),l)}function u(d){return d===64?(e.consume(d),r=0,c):Gu(d)?(e.consume(d),u):n(d)}function c(d){return Ze(d)?f(d):n(d)}function f(d){return d===46?(e.consume(d),r=0,c):d===62?(e.exit("autolinkProtocol").type="autolinkEmail",p(d)):h(d)}function h(d){return(d===45||Ze(d))&&r++<63?(e.consume(d),d===45?h:f):n(d)}function p(d){return e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t}}const Kr={tokenize:k1,partial:!0};function k1(e,t,n){return K(e,r,"linePrefix");function r(i){return i===null||z(i)?t(i):n(i)}}const sp={name:"blockQuote",tokenize:b1,continuation:{tokenize:w1},exit:C1};function b1(e,t,n){const r=this;return i;function i(a){if(a===62){const s=r.containerState;return s.open||(e.enter("blockQuote",{_container:!0}),s.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),o}return n(a)}function o(a){return te(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function w1(e,t,n){return K(e,e.attempt(sp,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function C1(e){e.exit("blockQuote")}const lp={name:"characterEscape",tokenize:x1};function x1(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return u1(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Yu=document.createElement("i");function rl(e){const t="&"+e+";";Yu.innerHTML=t;const n=Yu.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const up={name:"characterReference",tokenize:S1};function S1(e,t,n){const r=this;let i=0,o,a;return s;function s(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),l}function l(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),o=31,a=Ze,c(f))}function u(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,a=l1,c):(e.enter("characterReferenceValue"),o=7,a=Wi,c(f))}function c(f){let h;return f===59&&i?(h=e.exit("characterReferenceValue"),a===Ze&&!rl(r.sliceSerialize(h))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):a(f)&&i++<o?(e.consume(f),c):n(f)}}const Xu={name:"codeFenced",tokenize:M1,concrete:!0};function M1(e,t,n){const r=this,i={tokenize:O,partial:!0},o={tokenize:S,partial:!0},a=this.events[this.events.length-1],s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0;let l=0,u;return c;function c(w){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u=w,f(w)}function f(w){return w===u?(e.consume(w),l++,f):(e.exit("codeFencedFenceSequence"),l<3?n(w):K(e,h,"whitespace")(w))}function h(w){return w===null||z(w)?v(w):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===null||ve(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),K(e,d,"whitespace")(w)):w===96&&w===u?n(w):(e.consume(w),p)}function d(w){return w===null||z(w)?v(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||z(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),v(w)):w===96&&w===u?n(w):(e.consume(w),m)}function v(w){return e.exit("codeFencedFence"),r.interrupt?t(w):g(w)}function g(w){return w===null?C(w):z(w)?e.attempt(o,e.attempt(i,C,s?K(e,g,"linePrefix",s+1):g),C)(w):(e.enter("codeFlowValue"),y(w))}function y(w){return w===null||z(w)?(e.exit("codeFlowValue"),g(w)):(e.consume(w),y)}function C(w){return e.exit("codeFenced"),t(w)}function S(w,E,R){const P=this;return F;function F(_){return w.enter("lineEnding"),w.consume(_),w.exit("lineEnding"),N}function N(_){return P.parser.lazy[P.now().line]?R(_):E(_)}}function O(w,E,R){let P=0;return K(w,F,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function F(L){return w.enter("codeFencedFence"),w.enter("codeFencedFenceSequence"),N(L)}function N(L){return L===u?(w.consume(L),P++,N):P<l?R(L):(w.exit("codeFencedFenceSequence"),K(w,_,"whitespace")(L))}function _(L){return L===null||z(L)?(w.exit("codeFencedFence"),E(L)):R(L)}}}const Xo={name:"codeIndented",tokenize:A1},O1={tokenize:E1,partial:!0};function A1(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),K(e,o,"linePrefix",4+1)(u)}function o(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?l(u):z(u)?e.attempt(O1,a,l)(u):(e.enter("codeFlowValue"),s(u))}function s(u){return u===null||z(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),s)}function l(u){return e.exit("codeIndented"),t(u)}}function E1(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):z(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):K(e,o,"linePrefix",4+1)(a)}function o(a){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(a):z(a)?i(a):n(a)}}const T1={name:"codeText",tokenize:D1,resolve:N1,previous:I1};function N1(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function I1(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function D1(e,t,n){let r=0,i,o;return a;function a(f){return e.enter("codeText"),e.enter("codeTextSequence"),s(f)}function s(f){return f===96?(e.consume(f),r++,s):(e.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===96?(o=e.enter("codeTextSequence"),i=0,c(f)):f===32?(e.enter("space"),e.consume(f),e.exit("space"),l):z(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||z(f)?(e.exit("codeTextData"),l(f)):(e.consume(f),u)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(o.type="codeTextData",u(f))}}function cp(e){const t={};let n=-1,r,i,o,a,s,l,u;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,o=0,o<l.length&&l[o][1].type==="lineEndingBlank"&&(o+=2),o<l.length&&l[o][1].type==="content"))for(;++o<l.length&&l[o][1].type!=="content";)l[o][1].type==="chunkText"&&(l[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,_1(e,n)),n=t[n],u=!0);else if(r[1]._container){for(o=n,i=void 0;o--&&(a=e[o],a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);i&&(r[1].end=Object.assign({},e[i][1].start),s=e.slice(i,n),s.unshift(r),Ye(e,i,n-i+1,s))}}return!u}function _1(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const o=[],a=n._tokenizer||r.parser[n.contentType](n.start),s=a.events,l=[],u={};let c,f,h=-1,p=n,d=0,m=0;const v=[m];for(;p;){for(;e[++i][1]!==p;);o.push(i),p._tokenizer||(c=r.sliceStream(p),p.next||c.push(null),f&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),f=p,p=p.next}for(p=n;++h<s.length;)s[h][0]==="exit"&&s[h-1][0]==="enter"&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(m=h+1,v.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):v.pop(),h=v.length;h--;){const g=s.slice(v[h],v[h+1]),y=o.pop();l.unshift([y,y+g.length-1]),Ye(e,y,2,g)}for(h=-1;++h<l.length;)u[d+l[h][0]]=d+l[h][1],d+=l[h][1]-l[h][0]-1;return u}const P1={tokenize:z1,resolve:F1},R1={tokenize:L1,partial:!0};function F1(e){return cp(e),e}function z1(e,t){let n;return r;function r(s){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?o(s):z(s)?e.check(R1,a,o)(s):(e.consume(s),i)}function o(s){return e.exit("chunkContent"),e.exit("content"),t(s)}function a(s){return e.consume(s),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function L1(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),K(e,o,"linePrefix")}function o(a){if(a===null||z(a))return n(a);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function fp(e,t,n,r,i,o,a,s,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return f;function f(g){return g===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(g),e.exit(o),h):g===null||g===41||_r(g)?n(g):(e.enter(r),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),m(g))}function h(g){return g===62?(e.enter(o),e.consume(g),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===62?(e.exit("chunkString"),e.exit(s),h(g)):g===null||g===60||z(g)?n(g):(e.consume(g),g===92?d:p)}function d(g){return g===60||g===62||g===92?(e.consume(g),p):p(g)}function m(g){return g===40?++c>u?n(g):(e.consume(g),m):g===41?c--?(e.consume(g),m):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(g)):g===null||ve(g)?c?n(g):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(g)):_r(g)?n(g):(e.consume(g),g===92?v:m)}function v(g){return g===40||g===41||g===92?(e.consume(g),m):m(g)}}function hp(e,t,n,r,i,o){const a=this;let s=0,l;return u;function u(p){return e.enter(r),e.enter(i),e.consume(p),e.exit(i),e.enter(o),c}function c(p){return p===null||p===91||p===93&&!l||p===94&&!s&&"_hiddenFootnoteSupport"in a.parser.constructs||s>999?n(p):p===93?(e.exit(o),e.enter(i),e.consume(p),e.exit(i),e.exit(r),t):z(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===null||p===91||p===93||z(p)||s++>999?(e.exit("chunkString"),c(p)):(e.consume(p),l=l||!te(p),p===92?h:f)}function h(p){return p===91||p===92||p===93?(e.consume(p),s++,f):f(p)}}function pp(e,t,n,r,i,o){let a;return s;function s(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),a=h===40?41:h,l}function l(h){return h===a?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(o),u(h))}function u(h){return h===a?(e.exit(o),l(a)):h===null?n(h):z(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),K(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(h))}function c(h){return h===a||h===null||z(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?f:c)}function f(h){return h===a||h===92?(e.consume(h),c):c(h)}}function Sr(e,t){let n;return r;function r(i){return z(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):te(i)?K(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function kt(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const B1={name:"definition",tokenize:$1},V1={tokenize:H1,partial:!0};function $1(e,t,n){const r=this;let i;return o;function o(l){return e.enter("definition"),hp.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(l)}function a(l){return i=kt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),l===58?(e.enter("definitionMarker"),e.consume(l),e.exit("definitionMarker"),Sr(e,fp(e,e.attempt(V1,K(e,s,"whitespace"),K(e,s,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(l)}function s(l){return l===null||z(l)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(l)):n(l)}}function H1(e,t,n){return r;function r(a){return ve(a)?Sr(e,i)(a):n(a)}function i(a){return a===34||a===39||a===40?pp(e,K(e,o,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a):n(a)}function o(a){return a===null||z(a)?t(a):n(a)}}const W1={name:"hardBreakEscape",tokenize:j1};function j1(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(o),i}function i(o){return z(o)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(o)):n(o)}}const q1={name:"headingAtx",tokenize:K1,resolve:J1};function J1(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ye(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function K1(e,t,n){const r=this;let i=0;return o;function o(c){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),a(c)}function a(c){return c===35&&i++<6?(e.consume(c),a):c===null||ve(c)?(e.exit("atxHeadingSequence"),r.interrupt?t(c):s(c)):n(c)}function s(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||z(c)?(e.exit("atxHeading"),t(c)):te(c)?K(e,s,"whitespace")(c):(e.enter("atxHeadingText"),u(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),s(c))}function u(c){return c===null||c===35||ve(c)?(e.exit("atxHeadingText"),s(c)):(e.consume(c),u)}}const U1=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ec=["pre","script","style","textarea"],G1={name:"htmlFlow",tokenize:Y1,resolveTo:Z1,concrete:!0},Q1={tokenize:X1,partial:!0};function Z1(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Y1(e,t,n){const r=this;let i,o,a,s,l;return u;function u(b){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(b),c}function c(b){return b===33?(e.consume(b),f):b===47?(e.consume(b),d):b===63?(e.consume(b),i=3,r.interrupt?t:Ne):lt(b)?(e.consume(b),a=String.fromCharCode(b),o=!0,m):n(b)}function f(b){return b===45?(e.consume(b),i=2,h):b===91?(e.consume(b),i=5,a="CDATA[",s=0,p):lt(b)?(e.consume(b),i=4,r.interrupt?t:Ne):n(b)}function h(b){return b===45?(e.consume(b),r.interrupt?t:Ne):n(b)}function p(b){return b===a.charCodeAt(s++)?(e.consume(b),s===a.length?r.interrupt?t:N:p):n(b)}function d(b){return lt(b)?(e.consume(b),a=String.fromCharCode(b),m):n(b)}function m(b){return b===null||b===47||b===62||ve(b)?b!==47&&o&&ec.includes(a.toLowerCase())?(i=1,r.interrupt?t(b):N(b)):U1.includes(a.toLowerCase())?(i=6,b===47?(e.consume(b),v):r.interrupt?t(b):N(b)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(b):o?y(b):g(b)):b===45||Ze(b)?(e.consume(b),a+=String.fromCharCode(b),m):n(b)}function v(b){return b===62?(e.consume(b),r.interrupt?t:N):n(b)}function g(b){return te(b)?(e.consume(b),g):P(b)}function y(b){return b===47?(e.consume(b),P):b===58||b===95||lt(b)?(e.consume(b),C):te(b)?(e.consume(b),y):P(b)}function C(b){return b===45||b===46||b===58||b===95||Ze(b)?(e.consume(b),C):S(b)}function S(b){return b===61?(e.consume(b),O):te(b)?(e.consume(b),S):y(b)}function O(b){return b===null||b===60||b===61||b===62||b===96?n(b):b===34||b===39?(e.consume(b),l=b,w):te(b)?(e.consume(b),O):(l=null,E(b))}function w(b){return b===null||z(b)?n(b):b===l?(e.consume(b),R):(e.consume(b),w)}function E(b){return b===null||b===34||b===39||b===60||b===61||b===62||b===96||ve(b)?S(b):(e.consume(b),E)}function R(b){return b===47||b===62||te(b)?y(b):n(b)}function P(b){return b===62?(e.consume(b),F):n(b)}function F(b){return te(b)?(e.consume(b),F):b===null||z(b)?N(b):n(b)}function N(b){return b===45&&i===2?(e.consume(b),j):b===60&&i===1?(e.consume(b),x):b===62&&i===4?(e.consume(b),pe):b===63&&i===3?(e.consume(b),Ne):b===93&&i===5?(e.consume(b),oe):z(b)&&(i===6||i===7)?e.check(Q1,pe,_)(b):b===null||z(b)?_(b):(e.consume(b),N)}function _(b){return e.exit("htmlFlowData"),L(b)}function L(b){return b===null?k(b):z(b)?e.attempt({tokenize:ee,partial:!0},L,k)(b):(e.enter("htmlFlowData"),N(b))}function ee(b,wt,nr){return On;function On(Ct){return b.enter("lineEnding"),b.consume(Ct),b.exit("lineEnding"),be}function be(Ct){return r.parser.lazy[r.now().line]?nr(Ct):wt(Ct)}}function j(b){return b===45?(e.consume(b),Ne):N(b)}function x(b){return b===47?(e.consume(b),a="",me):N(b)}function me(b){return b===62&&ec.includes(a.toLowerCase())?(e.consume(b),pe):lt(b)&&a.length<8?(e.consume(b),a+=String.fromCharCode(b),me):N(b)}function oe(b){return b===93?(e.consume(b),Ne):N(b)}function Ne(b){return b===62?(e.consume(b),pe):b===45&&i===2?(e.consume(b),Ne):N(b)}function pe(b){return b===null||z(b)?(e.exit("htmlFlowData"),k(b)):(e.consume(b),pe)}function k(b){return e.exit("htmlFlow"),t(b)}}function X1(e,t,n){return r;function r(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(Kr,t,n)}}const e0={name:"htmlText",tokenize:t0};function t0(e,t,n){const r=this;let i,o,a,s;return l;function l(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),u}function u(k){return k===33?(e.consume(k),c):k===47?(e.consume(k),E):k===63?(e.consume(k),O):lt(k)?(e.consume(k),F):n(k)}function c(k){return k===45?(e.consume(k),f):k===91?(e.consume(k),o="CDATA[",a=0,v):lt(k)?(e.consume(k),S):n(k)}function f(k){return k===45?(e.consume(k),h):n(k)}function h(k){return k===null||k===62?n(k):k===45?(e.consume(k),p):d(k)}function p(k){return k===null||k===62?n(k):d(k)}function d(k){return k===null?n(k):k===45?(e.consume(k),m):z(k)?(s=d,oe(k)):(e.consume(k),d)}function m(k){return k===45?(e.consume(k),pe):d(k)}function v(k){return k===o.charCodeAt(a++)?(e.consume(k),a===o.length?g:v):n(k)}function g(k){return k===null?n(k):k===93?(e.consume(k),y):z(k)?(s=g,oe(k)):(e.consume(k),g)}function y(k){return k===93?(e.consume(k),C):g(k)}function C(k){return k===62?pe(k):k===93?(e.consume(k),C):g(k)}function S(k){return k===null||k===62?pe(k):z(k)?(s=S,oe(k)):(e.consume(k),S)}function O(k){return k===null?n(k):k===63?(e.consume(k),w):z(k)?(s=O,oe(k)):(e.consume(k),O)}function w(k){return k===62?pe(k):O(k)}function E(k){return lt(k)?(e.consume(k),R):n(k)}function R(k){return k===45||Ze(k)?(e.consume(k),R):P(k)}function P(k){return z(k)?(s=P,oe(k)):te(k)?(e.consume(k),P):pe(k)}function F(k){return k===45||Ze(k)?(e.consume(k),F):k===47||k===62||ve(k)?N(k):n(k)}function N(k){return k===47?(e.consume(k),pe):k===58||k===95||lt(k)?(e.consume(k),_):z(k)?(s=N,oe(k)):te(k)?(e.consume(k),N):pe(k)}function _(k){return k===45||k===46||k===58||k===95||Ze(k)?(e.consume(k),_):L(k)}function L(k){return k===61?(e.consume(k),ee):z(k)?(s=L,oe(k)):te(k)?(e.consume(k),L):N(k)}function ee(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),i=k,j):z(k)?(s=ee,oe(k)):te(k)?(e.consume(k),ee):(e.consume(k),i=void 0,me)}function j(k){return k===i?(e.consume(k),x):k===null?n(k):z(k)?(s=j,oe(k)):(e.consume(k),j)}function x(k){return k===62||k===47||ve(k)?N(k):n(k)}function me(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===62||ve(k)?N(k):(e.consume(k),me)}function oe(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),K(e,Ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ne(k){return e.enter("htmlTextData"),s(k)}function pe(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}}const il={name:"labelEnd",tokenize:s0,resolveTo:a0,resolveAll:o0},n0={tokenize:l0},r0={tokenize:u0},i0={tokenize:c0};function o0(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function a0(e,t){let n=e.length,r=0,i,o,a,s;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const l={type:e[o][1].type==="labelLink"?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[a][1].end)},c={type:"labelText",start:Object.assign({},e[o+r+2][1].end),end:Object.assign({},e[a-2][1].start)};return s=[["enter",l,t],["enter",u,t]],s=at(s,e.slice(o+1,o+r+3)),s=at(s,[["enter",c,t]]),s=at(s,ho(t.parser.constructs.insideSpan.null,e.slice(o+r+4,a-3),t)),s=at(s,[["exit",c,t],e[a-2],e[a-1],["exit",u,t]]),s=at(s,e.slice(a+1)),s=at(s,[["exit",l,t]]),Ye(e,o,e.length,s),e}function s0(e,t,n){const r=this;let i=r.events.length,o,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return s;function s(c){return o?o._inactive?u(c):(a=r.parser.defined.includes(kt(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelEnd"),l):n(c)}function l(c){return c===40?e.attempt(n0,t,a?t:u)(c):c===91?e.attempt(r0,t,a?e.attempt(i0,t,u):u)(c):a?t(c):u(c)}function u(c){return o._balanced=!0,n(c)}}function l0(e,t,n){return r;function r(l){return e.enter("resource"),e.enter("resourceMarker"),e.consume(l),e.exit("resourceMarker"),Sr(e,i)}function i(l){return l===41?s(l):fp(e,o,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(l)}function o(l){return ve(l)?Sr(e,a)(l):s(l)}function a(l){return l===34||l===39||l===40?pp(e,Sr(e,s),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(l):s(l)}function s(l){return l===41?(e.enter("resourceMarker"),e.consume(l),e.exit("resourceMarker"),e.exit("resource"),t):n(l)}}function u0(e,t,n){const r=this;return i;function i(a){return hp.call(r,e,o,n,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(kt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}}function c0(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const f0={name:"labelStartImage",tokenize:h0,resolveAll:il.resolveAll};function h0(e,t,n){const r=this;return i;function i(s){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(s),e.exit("labelImageMarker"),o}function o(s){return s===91?(e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelImage"),a):n(s)}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const p0={name:"labelStartLink",tokenize:d0,resolveAll:il.resolveAll};function d0(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const ea={name:"lineEnding",tokenize:m0};function m0(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),K(e,t,"linePrefix")}}const yi={name:"thematicBreak",tokenize:g0};function g0(e,t,n){let r=0,i;return o;function o(l){return e.enter("thematicBreak"),i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),s(l)):te(l)?K(e,a,"whitespace")(l):r<3||l!==null&&!z(l)?n(l):(e.exit("thematicBreak"),t(l))}function s(l){return l===i?(e.consume(l),r++,s):(e.exit("thematicBreakSequence"),a(l))}}const He={name:"list",tokenize:k0,continuation:{tokenize:b0},exit:C0},v0={tokenize:x0,partial:!0},y0={tokenize:w0,partial:!0};function k0(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return s;function s(p){const d=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(d==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Wi(p)){if(r.containerState.type||(r.containerState.type=d,e.enter(d,{_container:!0})),d==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(yi,n,u)(p):u(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(p)}return n(p)}function l(p){return Wi(p)&&++a<10?(e.consume(p),l):(!r.interrupt||a<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),u(p)):n(p)}function u(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(Kr,r.interrupt?n:c,e.attempt(v0,h,f))}function c(p){return r.containerState.initialBlankLine=!0,o++,h(p)}function f(p){return te(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),h):n(p)}function h(p){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function b0(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Kr,i,o);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,K(e,t,"listItemIndent",r.containerState.size+1)(s)}function o(s){return r.containerState.furtherBlankLines||!te(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(y0,t,a)(s))}function a(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,K(e,e.attempt(He,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function w0(e,t,n){const r=this;return K(e,i,"listItemIndent",r.containerState.size+1);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(o):n(o)}}function C0(e){e.exit(this.containerState.type)}function x0(e,t,n){const r=this;return K(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(o){const a=r.events[r.events.length-1];return!te(o)&&a&&a[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const tc={name:"setextUnderline",tokenize:M0,resolveTo:S0};function S0(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const a={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",a,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[o][1].end)):e[r][1]=a,e.push(["exit",a,t]),e}function M0(e,t,n){const r=this;let i=r.events.length,o,a;for(;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){a=r.events[i][1].type==="paragraph";break}return s;function s(c){return!r.parser.lazy[r.now().line]&&(r.interrupt||a)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),o=c,l(c)):n(c)}function l(c){return c===o?(e.consume(c),l):(e.exit("setextHeadingLineSequence"),K(e,u,"lineSuffix")(c))}function u(c){return c===null||z(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const O0={tokenize:A0};function A0(e){const t=this,n=e.attempt(Kr,r,e.attempt(this.parser.constructs.flowInitial,i,K(e,e.attempt(this.parser.constructs.flow,i,e.attempt(P1,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const E0={resolveAll:mp()},T0=dp("string"),N0=dp("text");function dp(e){return{tokenize:t,resolveAll:mp(e==="text"?I0:void 0)};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,a,s);return a;function a(c){return u(c)?o(c):s(c)}function s(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),o(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const f=i[c];let h=-1;if(f)for(;++h<f.length;){const p=f[h];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function mp(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function I0(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,a=-1,s=0,l;for(;o--;){const u=i[o];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)s++,a--;if(a)break;a=-1}else if(u===-2)l=!0,s++;else if(u!==-1){o++;break}}if(s){const u={type:n===e.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-s,offset:r.end.offset-s,_index:r.start._index+o,_bufferIndex:o?a:r.start._bufferIndex+a},end:Object.assign({},r.end)};r.end=Object.assign({},u.start),r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}function D0(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},o=[];let a=[],s=[];const l={consume:y,enter:C,exit:S,attempt:E(O),check:E(w),interrupt:E(w,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:p,sliceSerialize:h,now:d,defineSkip:m,write:f};let c=t.tokenize.call(u,l);return t.resolveAll&&o.push(t),u;function f(N){return a=at(a,N),v(),a[a.length-1]!==null?[]:(R(t,0),u.events=ho(o,u.events,u),u.events)}function h(N,_){return P0(p(N),_)}function p(N){return _0(a,N)}function d(){return Object.assign({},r)}function m(N){i[N.line]=N.column,F()}function v(){let N;for(;r._index<a.length;){const _=a[r._index];if(typeof _=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<_.length;)g(_.charCodeAt(r._bufferIndex));else g(_)}}function g(N){c=c(N)}function y(N){z(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,F()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=N}function C(N,_){const L=_||{};return L.type=N,L.start=d(),u.events.push(["enter",L,u]),s.push(L),L}function S(N){const _=s.pop();return _.end=d(),u.events.push(["exit",_,u]),_}function O(N,_){R(N,_.from)}function w(N,_){_.restore()}function E(N,_){return L;function L(ee,j,x){let me,oe,Ne,pe;return Array.isArray(ee)?b(ee):"tokenize"in ee?b([ee]):k(ee);function k(be){return Ct;function Ct(zt){const An=zt!==null&&be[zt],En=zt!==null&&be.null,So=[...Array.isArray(An)?An:An?[An]:[],...Array.isArray(En)?En:En?[En]:[]];return b(So)(zt)}}function b(be){return me=be,oe=0,be.length===0?x:wt(be[oe])}function wt(be){return Ct;function Ct(zt){return pe=P(),Ne=be,be.partial||(u.currentConstruct=be),be.name&&u.parser.constructs.disable.null.includes(be.name)?On():be.tokenize.call(_?Object.assign(Object.create(u),_):u,l,nr,On)(zt)}}function nr(be){return N(Ne,pe),j}function On(be){return pe.restore(),++oe<me.length?wt(me[oe]):x}}}function R(N,_){N.resolveAll&&!o.includes(N)&&o.push(N),N.resolve&&Ye(u.events,_,u.events.length-_,N.resolve(u.events.slice(_),u)),N.resolveTo&&(u.events=N.resolveTo(u.events,u))}function P(){const N=d(),_=u.previous,L=u.currentConstruct,ee=u.events.length,j=Array.from(s);return{restore:x,from:ee};function x(){r=N,u.previous=_,u.currentConstruct=L,u.events.length=ee,s=j,F()}}function F(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function _0(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let a;return n===i?a=[e[n].slice(r,o)]:(a=e.slice(n,i),r>-1&&(a[0]=a[0].slice(r)),o>0&&a.push(e[i].slice(0,o))),a}function P0(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,r.push(a)}return r.join("")}const R0={[42]:He,[43]:He,[45]:He,[48]:He,[49]:He,[50]:He,[51]:He,[52]:He,[53]:He,[54]:He,[55]:He,[56]:He,[57]:He,[62]:sp},F0={[91]:B1},z0={[-2]:Xo,[-1]:Xo,[32]:Xo},L0={[35]:q1,[42]:yi,[45]:[tc,yi],[60]:G1,[61]:tc,[95]:yi,[96]:Xu,[126]:Xu},B0={[38]:up,[92]:lp},V0={[-5]:ea,[-4]:ea,[-3]:ea,[33]:f0,[38]:up,[42]:Fa,[60]:[v1,e0],[91]:p0,[92]:[W1,lp],[93]:il,[95]:Fa,[96]:T1},$0={null:[Fa,E0]},H0={null:[42,95]},W0={null:[]};var j0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",document:R0,contentInitial:F0,flowInitial:z0,flow:L0,string:B0,text:V0,insideSpan:$0,attentionMarkers:H0,disable:W0});function q0(e={}){const t=ap([j0].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(c1),document:r(h1),flow:r(O0),string:r(T0),text:r(N0)};return n;function r(i){return o;function o(a){return D0(n,i,a)}}}const nc=/[\0\t\n\r]/g;function J0(){let e=1,t="",n=!0,r;return i;function i(o,a,s){const l=[];let u,c,f,h,p;for(o=t+o.toString(a),f=0,t="",n&&(o.charCodeAt(0)===65279&&f++,n=void 0);f<o.length;){if(nc.lastIndex=f,u=nc.exec(o),h=u&&u.index!==void 0?u.index:o.length,p=o.charCodeAt(h),!u){t=o.slice(f);break}if(p===10&&f===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<h&&(l.push(o.slice(f,h)),e+=h-f),p){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}f=h+1}return s&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}function K0(e){for(;!cp(e););return e}function gp(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"\uFFFD":String.fromCharCode(n)}const U0=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function vp(e){return e.replace(U0,G0)}function G0(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return gp(n.slice(o?2:1),o?16:10)}return rl(n)||e}const za={}.hasOwnProperty,Q0=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Z0(n)(K0(q0(n).document().write(J0()(e,t,!0))))};function Z0(e={}){const t=yp({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(Il),autolinkProtocol:_,autolinkEmail:_,atxHeading:l(El),blockQuote:l(Sd),characterEscape:_,characterReference:_,codeFenced:l(Al),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:l(Al,u),codeText:l(Md,u),codeTextData:_,data:_,codeFlowValue:_,definition:l(Od),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:l(Ad),hardBreakEscape:l(Tl),hardBreakTrailing:l(Tl),htmlFlow:l(Nl,u),htmlFlowData:_,htmlText:l(Nl,u),htmlTextData:_,image:l(Ed),label:u,link:l(Il),listItem:l(Td),listItemValue:m,listOrdered:l(Dl,d),listUnordered:l(Dl),paragraph:l(Nd),reference:be,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:l(El),strong:l(Id),thematicBreak:l(_d)},exit:{atxHeading:f(),atxHeadingSequence:R,autolink:f(),autolinkEmail:So,autolinkProtocol:En,blockQuote:f(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:zt,characterReferenceMarkerNumeric:zt,characterReferenceValue:An,codeFenced:f(C),codeFencedFence:y,codeFencedFenceInfo:v,codeFencedFenceMeta:g,codeFlowValue:L,codeIndented:f(S),codeText:f(oe),codeTextData:L,data:L,definition:f(),definitionDestinationString:E,definitionLabelString:O,definitionTitleString:w,emphasis:f(),hardBreakEscape:f(j),hardBreakTrailing:f(j),htmlFlow:f(x),htmlFlowData:L,htmlText:f(me),htmlTextData:L,image:f(pe),label:b,labelText:k,lineEnding:ee,link:f(Ne),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:Ct,resourceDestinationString:wt,resourceTitleString:nr,resource:On,setextHeading:f(N),setextHeadingLineSequence:F,setextHeadingText:P,strong:f(),thematicBreak:f()}},e.mdastExtensions||[]),n={};return r;function r(M){let D={type:"root",children:[]};const V=[D],Y=[],ot=[],rr={stack:V,tokenStack:Y,config:t,enter:c,exit:h,buffer:u,resume:p,setData:o,getData:a};let le=-1;for(;++le<M.length;)if(M[le][1].type==="listOrdered"||M[le][1].type==="listUnordered")if(M[le][0]==="enter")ot.push(le);else{const Se=ot.pop();le=i(M,Se,le)}for(le=-1;++le<M.length;){const Se=t[M[le][0]];za.call(Se,M[le][1].type)&&Se[M[le][1].type].call(Object.assign({sliceSerialize:M[le][2].sliceSerialize},rr),M[le][1])}if(Y.length>0){const Se=Y[Y.length-1];(Se[1]||rc).call(rr,void 0,Se[0])}for(D.position={start:s(M.length>0?M[0][1].start:{line:1,column:1,offset:0}),end:s(M.length>0?M[M.length-2][1].end:{line:1,column:1,offset:0})},le=-1;++le<t.transforms.length;)D=t.transforms[le](D)||D;return D}function i(M,D,V){let Y=D-1,ot=-1,rr=!1,le,Se,Tn,ir;for(;++Y<=V;){const de=M[Y];if(de[1].type==="listUnordered"||de[1].type==="listOrdered"||de[1].type==="blockQuote"?(de[0]==="enter"?ot++:ot--,ir=void 0):de[1].type==="lineEndingBlank"?de[0]==="enter"&&(le&&!ir&&!ot&&!Tn&&(Tn=Y),ir=void 0):de[1].type==="linePrefix"||de[1].type==="listItemValue"||de[1].type==="listItemMarker"||de[1].type==="listItemPrefix"||de[1].type==="listItemPrefixWhitespace"||(ir=void 0),!ot&&de[0]==="enter"&&de[1].type==="listItemPrefix"||ot===-1&&de[0]==="exit"&&(de[1].type==="listUnordered"||de[1].type==="listOrdered")){if(le){let Mo=Y;for(Se=void 0;Mo--;){const Lt=M[Mo];if(Lt[1].type==="lineEnding"||Lt[1].type==="lineEndingBlank"){if(Lt[0]==="exit")continue;Se&&(M[Se][1].type="lineEndingBlank",rr=!0),Lt[1].type="lineEnding",Se=Mo}else if(!(Lt[1].type==="linePrefix"||Lt[1].type==="blockQuotePrefix"||Lt[1].type==="blockQuotePrefixWhitespace"||Lt[1].type==="blockQuoteMarker"||Lt[1].type==="listItemIndent"))break}Tn&&(!Se||Tn<Se)&&(le._spread=!0),le.end=Object.assign({},Se?M[Se][1].start:de[1].end),M.splice(Se||Y,0,["exit",le,de[2]]),Y++,V++}de[1].type==="listItemPrefix"&&(le={type:"listItem",_spread:!1,start:Object.assign({},de[1].start)},M.splice(Y,0,["enter",le,de[2]]),Y++,V++,Tn=void 0,ir=!0)}}return M[D][1]._spread=rr,V}function o(M,D){n[M]=D}function a(M){return n[M]}function s(M){return{line:M.line,column:M.column,offset:M.offset}}function l(M,D){return V;function V(Y){c.call(this,M(Y),Y),D&&D.call(this,Y)}}function u(){this.stack.push({type:"fragment",children:[]})}function c(M,D,V){return this.stack[this.stack.length-1].children.push(M),this.stack.push(M),this.tokenStack.push([D,V]),M.position={start:s(D.start)},M}function f(M){return D;function D(V){M&&M.call(this,V),h.call(this,V)}}function h(M,D){const V=this.stack.pop(),Y=this.tokenStack.pop();if(Y)Y[0].type!==M.type&&(D?D.call(this,M,Y[0]):(Y[1]||rc).call(this,M,Y[0]));else throw new Error("Cannot close `"+M.type+"` ("+xr({start:M.start,end:M.end})+"): it\u2019s not open");return V.position.end=s(M.end),V}function p(){return nl(this.stack.pop())}function d(){o("expectingFirstListItemValue",!0)}function m(M){if(a("expectingFirstListItemValue")){const D=this.stack[this.stack.length-2];D.start=Number.parseInt(this.sliceSerialize(M),10),o("expectingFirstListItemValue")}}function v(){const M=this.resume(),D=this.stack[this.stack.length-1];D.lang=M}function g(){const M=this.resume(),D=this.stack[this.stack.length-1];D.meta=M}function y(){a("flowCodeInside")||(this.buffer(),o("flowCodeInside",!0))}function C(){const M=this.resume(),D=this.stack[this.stack.length-1];D.value=M.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),o("flowCodeInside")}function S(){const M=this.resume(),D=this.stack[this.stack.length-1];D.value=M.replace(/(\r?\n|\r)$/g,"")}function O(M){const D=this.resume(),V=this.stack[this.stack.length-1];V.label=D,V.identifier=kt(this.sliceSerialize(M)).toLowerCase()}function w(){const M=this.resume(),D=this.stack[this.stack.length-1];D.title=M}function E(){const M=this.resume(),D=this.stack[this.stack.length-1];D.url=M}function R(M){const D=this.stack[this.stack.length-1];if(!D.depth){const V=this.sliceSerialize(M).length;D.depth=V}}function P(){o("setextHeadingSlurpLineEnding",!0)}function F(M){const D=this.stack[this.stack.length-1];D.depth=this.sliceSerialize(M).charCodeAt(0)===61?1:2}function N(){o("setextHeadingSlurpLineEnding")}function _(M){const D=this.stack[this.stack.length-1];let V=D.children[D.children.length-1];(!V||V.type!=="text")&&(V=Dd(),V.position={start:s(M.start)},D.children.push(V)),this.stack.push(V)}function L(M){const D=this.stack.pop();D.value+=this.sliceSerialize(M),D.position.end=s(M.end)}function ee(M){const D=this.stack[this.stack.length-1];if(a("atHardBreak")){const V=D.children[D.children.length-1];V.position.end=s(M.end),o("atHardBreak");return}!a("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(D.type)&&(_.call(this,M),L.call(this,M))}function j(){o("atHardBreak",!0)}function x(){const M=this.resume(),D=this.stack[this.stack.length-1];D.value=M}function me(){const M=this.resume(),D=this.stack[this.stack.length-1];D.value=M}function oe(){const M=this.resume(),D=this.stack[this.stack.length-1];D.value=M}function Ne(){const M=this.stack[this.stack.length-1];a("inReference")?(M.type+="Reference",M.referenceType=a("referenceType")||"shortcut",delete M.url,delete M.title):(delete M.identifier,delete M.label),o("referenceType")}function pe(){const M=this.stack[this.stack.length-1];a("inReference")?(M.type+="Reference",M.referenceType=a("referenceType")||"shortcut",delete M.url,delete M.title):(delete M.identifier,delete M.label),o("referenceType")}function k(M){const D=this.stack[this.stack.length-2],V=this.sliceSerialize(M);D.label=vp(V),D.identifier=kt(V).toLowerCase()}function b(){const M=this.stack[this.stack.length-1],D=this.resume(),V=this.stack[this.stack.length-1];o("inReference",!0),V.type==="link"?V.children=M.children:V.alt=D}function wt(){const M=this.resume(),D=this.stack[this.stack.length-1];D.url=M}function nr(){const M=this.resume(),D=this.stack[this.stack.length-1];D.title=M}function On(){o("inReference")}function be(){o("referenceType","collapsed")}function Ct(M){const D=this.resume(),V=this.stack[this.stack.length-1];V.label=D,V.identifier=kt(this.sliceSerialize(M)).toLowerCase(),o("referenceType","full")}function zt(M){o("characterReferenceType",M.type)}function An(M){const D=this.sliceSerialize(M),V=a("characterReferenceType");let Y;V?(Y=gp(D,V==="characterReferenceMarkerNumeric"?10:16),o("characterReferenceType")):Y=rl(D);const ot=this.stack.pop();ot.value+=Y,ot.position.end=s(M.end)}function En(M){L.call(this,M);const D=this.stack[this.stack.length-1];D.url=this.sliceSerialize(M)}function So(M){L.call(this,M);const D=this.stack[this.stack.length-1];D.url="mailto:"+this.sliceSerialize(M)}function Sd(){return{type:"blockquote",children:[]}}function Al(){return{type:"code",lang:null,meta:null,value:""}}function Md(){return{type:"inlineCode",value:""}}function Od(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ad(){return{type:"emphasis",children:[]}}function El(){return{type:"heading",depth:void 0,children:[]}}function Tl(){return{type:"break"}}function Nl(){return{type:"html",value:""}}function Ed(){return{type:"image",title:null,url:"",alt:null}}function Il(){return{type:"link",title:null,url:"",children:[]}}function Dl(M){return{type:"list",ordered:M.type==="listOrdered",start:null,spread:M._spread,children:[]}}function Td(M){return{type:"listItem",spread:M._spread,checked:null,children:[]}}function Nd(){return{type:"paragraph",children:[]}}function Id(){return{type:"strong",children:[]}}function Dd(){return{type:"text",value:""}}function _d(){return{type:"thematicBreak"}}}function yp(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?yp(e,r):Y0(e,r)}return e}function Y0(e,t){let n;for(n in t)if(za.call(t,n)){const r=n==="canContainEols"||n==="transforms",o=(za.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),a=t[n];a&&(r?e[n]=[...o,...a]:Object.assign(o,a))}}function rc(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+xr({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+xr({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+xr({start:t.start,end:t.end})+") is still open")}function X0(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return Q0(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var ic={}.hasOwnProperty;function ek(e,t){var n=t||{};function r(i){var o=r.invalid,a=r.handlers;if(i&&ic.call(i,e)&&(o=ic.call(a,i[e])?a[i[e]]:r.unknown),o)return o.apply(this,arguments)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function ki(e,t){let n=-1,r;if(t.extensions)for(;++n<t.extensions.length;)ki(e,t.extensions[n]);for(r in t)r==="extensions"||(r==="unsafe"||r==="join"?e[r]=[...e[r]||[],...t[r]||[]]:r==="handlers"?e[r]=Object.assign(e[r],t[r]||{}):e.options[r]=t[r]);return e}function xe(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,i=n.line||1,o=n.column||1;return{move:l,current:a,shift:s};function a(){return{now:{line:i,column:o},lineShift:r}}function s(u){r+=u}function l(u=""){const c=u.split(/\r?\n|\r/g),f=c[c.length-1];return i+=c.length-1,o=c.length===1?o+f.length:1+f.length+r,u}}function Ur(e,t,n){const r=t.indexStack,i=e.children||[],o=xe(n),a=[];let s=-1;for(r.push(-1);++s<i.length;){const u=i[s];r[r.length-1]=s,a.push(o.move(t.handle(u,e,t,J({before:`
`,after:`
`},o.current())))),u.type!=="list"&&(t.bulletLastUsed=void 0),s<i.length-1&&a.push(o.move(l(u,i[s+1])))}return r.pop(),a.join("");function l(u,c){let f=t.join.length;for(;f--;){const h=t.join[f](u,c,e,t);if(h===!0||h===1)break;if(typeof h=="number")return`
`.repeat(1+h);if(h===!1)return`

<!---->

`}return`

`}}const tk=/\r?\n|\r/g;function po(e,t){const n=[];let r=0,i=0,o;for(;o=tk.exec(e);)a(e.slice(r,o.index)),n.push(o[0]),r=o.index+o[0].length,i++;return a(e.slice(r)),n.join("");function a(s){n.push(t(s,i,!s))}}function nk(e,t,n,r){const i=n.enter("blockquote"),o=xe(r);o.move("> "),o.shift(2);const a=po(Ur(e,n,o.current()),rk);return i(),a}function rk(e,t,n){return">"+(n?"":" ")+e}function kp(e,t){return oc(e,t.inConstruct,!0)&&!oc(e,t.notInConstruct,!1)}function oc(e,t,n){if(!t)return n;typeof t=="string"&&(t=[t]);let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function ac(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&kp(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function ik(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,a=0;if(typeof t!="string"||t.length!==1)throw new Error("Expected character");for(;r!==-1;)r===i?++o>a&&(a=o):o=1,i=r+1,r=n.indexOf(t,i);return a}function La(e,t){return Boolean(!t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function ok(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function bp(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function Ce(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),i=[],o=[],a={};let s=-1;for(;++s<e.unsafe.length;){const c=e.unsafe[s];if(!kp(e.stack,c))continue;const f=bp(c);let h;for(;h=f.exec(r);){const p="before"in c||Boolean(c.atBreak),d="after"in c,m=h.index+(p?h[1].length:0);i.includes(m)?(a[m].before&&!p&&(a[m].before=!1),a[m].after&&!d&&(a[m].after=!1)):(i.push(m),a[m]={before:p,after:d})}}i.sort(ak);let l=n.before?n.before.length:0;const u=r.length-(n.after?n.after.length:0);for(s=-1;++s<i.length;){const c=i[s];c<l||c>=u||c+1<u&&i[s+1]===c+1&&a[c].after&&!a[c+1].before&&!a[c+1].after||i[s-1]===c-1&&a[c].before&&!a[c-1].before&&!a[c-1].after||(l!==c&&o.push(sc(r.slice(l,c),"\\")),l=c,/[!-/:-@[-`{-~]/.test(r.charAt(c))&&(!n.encode||!n.encode.includes(r.charAt(c)))?o.push("\\"):(o.push("&#x"+r.charCodeAt(c).toString(16).toUpperCase()+";"),l++))}return o.push(sc(r.slice(l,u),n.after)),o.join("")}function ak(e,t){return e-t}function sc(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],o=e+t;let a=-1,s=0,l;for(;l=n.exec(o);)r.push(l.index);for(;++a<r.length;)s!==r[a]&&i.push(e.slice(s,r[a])),i.push("\\"),s=r[a];return i.push(e.slice(s)),i.join("")}function sk(e,t,n,r){const i=ok(n),o=e.value||"",a=i==="`"?"GraveAccent":"Tilde";if(La(e,n)){const f=n.enter("codeIndented"),h=po(o,lk);return f(),h}const s=xe(r),l=i.repeat(Math.max(ik(o,i)+1,3)),u=n.enter("codeFenced");let c=s.move(l);if(e.lang){const f=n.enter("codeFencedLang"+a);c+=s.move(Ce(n,e.lang,J({before:c,after:" ",encode:["`"]},s.current()))),f()}if(e.lang&&e.meta){const f=n.enter("codeFencedMeta"+a);c+=s.move(" "),c+=s.move(Ce(n,e.meta,J({before:c,after:`
`,encode:["`"]},s.current()))),f()}return c+=s.move(`
`),o&&(c+=s.move(o+`
`)),c+=s.move(l),u(),c}function lk(e,t,n){return(n?"":"    ")+e}function Pr(e){return e.label||!e.identifier?e.label||"":vp(e.identifier)}function ol(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function uk(e,t,n,r){const i=ol(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let s=n.enter("label");const l=xe(r);let u=l.move("[");return u+=l.move(Ce(n,Pr(e),J({before:u,after:"]"},l.current()))),u+=l.move("]: "),s(),!e.url||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(Ce(n,e.url,J({before:u,after:">"},l.current()))),u+=l.move(">")):(s=n.enter("destinationRaw"),u+=l.move(Ce(n,e.url,J({before:u,after:e.title?" ":`
`},l.current())))),s(),e.title&&(s=n.enter("title"+o),u+=l.move(" "+i),u+=l.move(Ce(n,e.title,J({before:u,after:i},l.current()))),u+=l.move(i),s()),a(),u}function ck(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Dt(e,t,n){const r=t.indexStack,i=e.children||[],o=[];let a=-1,s=n.before;r.push(-1);let l=xe(n);for(;++a<i.length;){const u=i[a];let c;if(r[r.length-1]=a,a+1<i.length){let f=t.handle.handlers[i[a+1].type];f&&f.peek&&(f=f.peek),c=f?f(i[a+1],e,t,J({before:"",after:""},l.current())).charAt(0):""}else c=n.after;o.length>0&&(s==="\r"||s===`
`)&&u.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),s=" ",l=xe(n),l.move(o.join(""))),o.push(l.move(t.handle(u,e,t,cn(J({},l.current()),{before:s,after:c})))),s=o[o.length-1].slice(-1)}return r.pop(),o.join("")}wp.peek=fk;function wp(e,t,n,r){const i=ck(n),o=n.enter("emphasis"),a=xe(r);let s=a.move(i);return s+=a.move(Dt(e,n,J({before:s,after:i},a.current()))),s+=a.move(i),o(),s}function fk(e,t,n){return n.options.emphasis||"*"}const mo=function(e){if(e==null)return mk;if(typeof e=="string")return dk(e);if(typeof e=="object")return Array.isArray(e)?hk(e):pk(e);if(typeof e=="function")return go(e);throw new Error("Expected function, string, or object as test")};function hk(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=mo(e[n]);return go(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].call(this,...i))return!0;return!1}}function pk(e){return go(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function dk(e){return go(t);function t(n){return n&&n.type===e}}function go(e){return t;function t(...n){return Boolean(e.call(this,...n))}}function mk(){return!0}const gk=!0,Ba="skip",Va=!1,vk=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=mo(t),o=r?-1:1;a(e,null,[])();function a(s,l,u){const c=typeof s=="object"&&s!==null?s:{};let f;return typeof c.type=="string"&&(f=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(h,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})),h;function h(){let p=[],d,m,v;if((!t||i(s,l,u[u.length-1]||null))&&(p=yk(n(s,u)),p[0]===Va))return p;if(s.children&&p[0]!==Ba)for(m=(r?s.children.length:-1)+o,v=u.concat(s);m>-1&&m<s.children.length;){if(d=a(s.children[m],m,v)(),d[0]===Va)return d;m=typeof d[1]=="number"?d[1]:m+o}return p}}};function yk(e){return Array.isArray(e)?e:typeof e=="number"?[gk,e]:[e]}const Cp=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),vk(e,t,i,r);function i(o,a){const s=a[a.length-1];return n(o,s?s.children.indexOf(o):null,s)}};function xp(e,t){let n=!1;return Cp(e,r=>{if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Va}),Boolean((!e.depth||e.depth<3)&&nl(e)&&(t.options.setext||n))}function kk(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=xe(r);if(xp(e,n)){const c=n.enter("headingSetext"),f=n.enter("phrasing"),h=Dt(e,n,cn(J({},o.current()),{before:`
`,after:`
`}));return f(),c(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const a="#".repeat(i),s=n.enter("headingAtx"),l=n.enter("phrasing");o.move(a+" ");let u=Dt(e,n,J({before:"# ",after:`
`},o.current()));return/^[\t ]/.test(u)&&(u="&#x"+u.charCodeAt(0).toString(16).toUpperCase()+";"+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),l(),s(),u}Sp.peek=bk;function Sp(e){return e.value||""}function bk(){return"<"}Mp.peek=wk;function Mp(e,t,n,r){const i=ol(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let s=n.enter("label");const l=xe(r);let u=l.move("![");return u+=l.move(Ce(n,e.alt,J({before:u,after:"]"},l.current()))),u+=l.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(Ce(n,e.url,J({before:u,after:">"},l.current()))),u+=l.move(">")):(s=n.enter("destinationRaw"),u+=l.move(Ce(n,e.url,J({before:u,after:e.title?" ":")"},l.current())))),s(),e.title&&(s=n.enter("title"+o),u+=l.move(" "+i),u+=l.move(Ce(n,e.title,J({before:u,after:i},l.current()))),u+=l.move(i),s()),u+=l.move(")"),a(),u}function wk(){return"!"}Op.peek=Ck;function Op(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let a=n.enter("label");const s=xe(r);let l=s.move("![");const u=Ce(n,e.alt,J({before:l,after:"]"},s.current()));l+=s.move(u+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const f=Ce(n,Pr(e),J({before:l,after:"]"},s.current()));return a(),n.stack=c,o(),i==="full"||!u||u!==f?l+=s.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=s.move("]"),l}function Ck(){return"!"}al.peek=xk;function al(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const a=n.unsafe[o],s=bp(a);let l;if(!!a.atBreak)for(;l=s.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function xk(){return"`"}function Ap(e,t){const n=nl(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Ep.peek=Sk;function Ep(e,t,n,r){const i=ol(n),o=i==='"'?"Quote":"Apostrophe",a=xe(r);let s,l;if(Ap(e,n)){const c=n.stack;n.stack=[],s=n.enter("autolink");let f=a.move("<");return f+=a.move(Dt(e,n,J({before:f,after:">"},a.current()))),f+=a.move(">"),s(),n.stack=c,f}s=n.enter("link"),l=n.enter("label");let u=a.move("[");return u+=a.move(Dt(e,n,J({before:u,after:"]("},a.current()))),u+=a.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(Ce(n,e.url,J({before:u,after:">"},a.current()))),u+=a.move(">")):(l=n.enter("destinationRaw"),u+=a.move(Ce(n,e.url,J({before:u,after:e.title?" ":")"},a.current())))),l(),e.title&&(l=n.enter("title"+o),u+=a.move(" "+i),u+=a.move(Ce(n,e.title,J({before:u,after:i},a.current()))),u+=a.move(i),l()),u+=a.move(")"),s(),u}function Sk(e,t,n){return Ap(e,n)?"<":"["}Tp.peek=Mk;function Tp(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let a=n.enter("label");const s=xe(r);let l=s.move("[");const u=Dt(e,n,J({before:l,after:"]"},s.current()));l+=s.move(u+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const f=Ce(n,Pr(e),J({before:l,after:"]"},s.current()));return a(),n.stack=c,o(),i==="full"||!u||u!==f?l+=s.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=s.move("]"),l}function Mk(){return"["}function sl(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Ok(e){const t=sl(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Np(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Ak(e){const t=Np(e),n=e.options.bulletOrderedOther;if(!n)return t==="."?")":".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrderedOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bulletOrdered` (`"+t+"`) and `bulletOrderedOther` (`"+n+"`) to be different");return n}function Ip(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Ek(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let a=e.ordered?Np(n):sl(n);const s=e.ordered?Ak(n):Ok(n),l=n.bulletLastUsed;let u=!1;if(t&&(e.ordered?n.options.bulletOrderedOther:n.options.bulletOther)&&l&&a===l&&(u=!0),!e.ordered){const f=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),Ip(n)===a&&f){let h=-1;for(;++h<e.children.length;){const p=e.children[h];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=s),n.bulletCurrent=a;const c=Ur(e,n,r);return n.bulletLastUsed=a,n.bulletCurrent=o,i(),c}function Tk(e){const t=e.options.listItemIndent||"tab";if(t===1||t==="1")return"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Dp(e,t,n,r){const i=Tk(n);let o=n.bulletCurrent||sl(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let a=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const s=xe(r);s.move(o+" ".repeat(a-o.length)),s.shift(a);const l=n.enter("listItem"),u=po(Ur(e,n,s.current()),c);return l(),u;function c(f,h,p){return h?(p?"":" ".repeat(a))+f:(p?o:o+" ".repeat(a-o.length))+f}}function Nk(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),a=Dt(e,n,r);return o(),i(),a}function Ik(e,t,n,r){return Ur(e,n,r)}function Dk(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}_p.peek=_k;function _p(e,t,n,r){const i=Dk(n),o=n.enter("strong"),a=xe(r);let s=a.move(i+i);return s+=a.move(Dt(e,n,J({before:s,after:i},a.current()))),s+=a.move(i+i),o(),s}function _k(e,t,n){return n.options.strong||"*"}function Pk(e,t,n,r){return Ce(n,e.value,r)}function Rk(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Fk(e,t,n){const r=(Ip(n)+(n.options.ruleSpaces?" ":"")).repeat(Rk(n));return n.options.ruleSpaces?r.slice(0,-1):r}const zk={blockquote:nk,break:ac,code:sk,definition:uk,emphasis:wp,hardBreak:ac,heading:kk,html:Sp,image:Mp,imageReference:Op,inlineCode:al,link:Ep,linkReference:Tp,list:Ek,listItem:Dp,paragraph:Nk,root:Ik,strong:_p,text:Pk,thematicBreak:Fk},Lk=[Bk];function Bk(e,t,n,r){if(t.type==="code"&&La(t,r)&&(e.type==="list"||e.type===t.type&&La(e,r))||e.type==="list"&&e.type===t.type&&Boolean(e.ordered)===Boolean(t.ordered)&&!(e.ordered?r.options.bulletOrderedOther:r.options.bulletOther))return!1;if("spread"in n&&typeof n.spread=="boolean")return e.type==="paragraph"&&(e.type===t.type||t.type==="definition"||t.type==="heading"&&xp(t,r))?void 0:n.spread?1:0}const fn=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Vk=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:fn},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:fn},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*"},{character:"*",inConstruct:"phrasing",notInConstruct:fn},{atBreak:!0,character:"+"},{atBreak:!0,character:"-"},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:fn},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:fn},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:fn},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:fn},{atBreak:!0,character:"~"}];function $k(e,t={}){const n={enter:i,stack:[],unsafe:[],join:[],handlers:{},options:{},indexStack:[]};ki(n,{unsafe:Vk,join:Lk,handlers:zk}),ki(n,t),n.options.tightDefinitions&&ki(n,{join:[jk]}),n.handle=ek("type",{invalid:Hk,unknown:Wk,handlers:n.handlers});let r=n.handle(e,null,n,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return r&&r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r;function i(o){return n.stack.push(o),a;function a(){n.stack.pop()}}}function Hk(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function Wk(e){throw new Error("Cannot handle unknown node `"+e.type+"`")}function jk(e,t){if(e.type==="definition"&&e.type===t.type)return 0}function qk(e){Object.assign(this,{Compiler:n=>{const r=this.data("settings");return $k(n,Object.assign({},r,e,{extensions:this.data("toMarkdownExtensions")||[]}))}})}const Pp=t1().use(X0).use(qk).freeze();var Jk=Object.defineProperty,Kk=Object.defineProperties,Uk=Object.getOwnPropertyDescriptors,qi=Object.getOwnPropertySymbols,Rp=Object.prototype.hasOwnProperty,Fp=Object.prototype.propertyIsEnumerable,lc=(e,t,n)=>t in e?Jk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vo=(e,t)=>{for(var n in t||(t={}))Rp.call(t,n)&&lc(e,n,t[n]);if(qi)for(var n of qi(t))Fp.call(t,n)&&lc(e,n,t[n]);return e},ll=(e,t)=>Kk(e,Uk(t)),uc=(e,t)=>{var n={};for(var r in e)Rp.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qi)for(var r of qi(e))t.indexOf(r)<0&&Fp.call(e,r)&&(n[r]=e[r]);return n},Gk=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Fn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},rn=(e,t,n)=>(Gk(e,t,"access private method"),n),ul,zp,$a,Lp,yo,cl,fl,Bp,hl,Vp,bi,Ha;const $p=()=>{const e=o=>o.elements.length,t=o=>o.elements[e(o)-1];return{size:e,top:t,push:o=>a=>{var s;(s=t(o))==null||s.push(a)},open:o=>a=>{o.elements.push(a)},close:o=>{const a=o.elements.pop();if(!a)throw df();return a}}},Qk=(e,t,...n)=>{e.content.push(t,...n)},Zk=e=>e.content.pop(),Yk=(e,t,n)=>{const r={type:e,content:t,attrs:n,push:(...i)=>Qk(r,...i),pop:()=>Zk(r)};return r},{size:Xk,push:eb,top:tb,open:nb,close:rb}=$p(),cc=e=>e.isText,ib=(e,t,n)=>{if(cc(t)&&cc(n)&&H.sameSet(t.marks,n.marks))return e.text(t.text+n.text,t.marks)},ob=e=>(t,n)=>nb(e)(Yk(t,[],n)),Hp=e=>(t,n,r)=>{const i=t.createAndFill(n,r,e.marks);if(!i)throw em(t,n,r);return eb(e)(i),i},Wp=e=>()=>{e.marks=H.none;const t=rb(e);return Hp(e)(t.type,t.attrs,t.content)},ab=e=>(t,n)=>{const r=t.create(n);e.marks=r.addToSet(e.marks)},sb=e=>t=>{e.marks=t.removeFromSet(e.marks)},lb=e=>t=>{const n=tb(e);if(!n)throw df();const r=n.pop(),i=e.schema.text(t,e.marks);if(!r){n.push(i);return}const o=ib(e.schema,r,i);if(o){n.push(o);return}n.push(r,i)},ub=e=>()=>{let t=null;do t=Wp(e)();while(Xk(e));return t},cb=e=>{const t={marks:[],elements:[],schema:e};return{build:ub(t),openMark:ab(t),closeMark:sb(t),addText:lb(t),openNode:ob(t),addNode:Hp(t),closeNode:Wp(t)}};class fb{constructor(t,n,r){Fn(this,ul),Fn(this,$a),this.stack=t,this.schema=n,this.specMap=r,this.run=(i,o)=>{const a=i.runSync(i.parse(o));return this.next(a),this},this.next=(i=[])=>([i].flat().forEach(o=>rn(this,$a,Lp).call(this,o)),this),this.toDoc=()=>this.stack.build(),this.injectRoot=(i,o,a)=>(this.stack.openNode(o,a),this.next(i.children),this),this.addText=(i="")=>(this.stack.addText(i),this),this.addNode=(...i)=>(this.stack.addNode(...i),this),this.openNode=(...i)=>(this.stack.openNode(...i),this),this.closeNode=(...i)=>(this.stack.closeNode(...i),this),this.openMark=(...i)=>(this.stack.openMark(...i),this),this.closeMark=(...i)=>(this.stack.closeMark(...i),this)}}ul=new WeakSet;zp=function(e){const t=Object.values(this.specMap).find(n=>n.match(e));if(!t)throw tm(e);return t};$a=new WeakSet;Lp=function(e){const{key:t,runner:n,is:r}=rn(this,ul,zp).call(this,e),i=this.schema[r==="node"?"nodes":"marks"][t];n(this,e,i)};const hb=(e,t,n)=>r=>{const i=new fb(cb(e),e,t);return i.run(n,r),i.toDoc()},pb=(e,t,...n)=>{e.children||(e.children=[]),e.children.push(t,...n)},db=e=>{var t;return(t=e.children)==null?void 0:t.pop()},jp=(e,t,n,r={})=>{const i={type:e,children:t,props:r,value:n,push:(...o)=>pb(i,...o),pop:()=>db(i)};return i},{size:mb,push:gb,open:vb,close:yb}=$p(),kb=e=>{const{children:t}=e;return t&&(e.children=t.reduce((n,r,i)=>{if(i===0)return[r];const o=n[n.length-1];if(r.isMark&&r.type===o.type){const a=r,{children:s}=a,l=uc(a,["children"]),u=o,{children:c}=u,f=uc(u,["children"]);if(s&&c&&JSON.stringify(l)===JSON.stringify(f)){const h=ll(vo({},f),{children:[...c,...s]});return n.slice(0,-1).concat(h)}}return n.concat(r)},[])),e},bb=e=>{const t=ll(vo({},e.props),{type:e.type});return e.children&&(t.children=e.children),e.value&&(t.value=e.value),t},qp=e=>(t,n,r)=>vb(e)(jp(t,[],n,r)),Jp=e=>(t,n,r,i)=>{const o=jp(t,n,r,i),a=kb(bb(o));return gb(e)(a),a},pl=e=>()=>{const t=yb(e);return Jp(e)(t.type,t.children,t.value,t.props)},wb=e=>(t,n,r,i)=>{t.isInSet(e.marks)||(e.marks=t.addToSet(e.marks),qp(e)(n,r,ll(vo({},i),{isMark:!0})))},Cb=e=>t=>t.isInSet(e.marks)?(e.marks=t.type.removeFromSet(e.marks),pl(e)()):null,xb=e=>()=>{let t=null;do t=pl(e)();while(mb(e));return t},Sb=()=>{const e={marks:[],elements:[]};return{build:xb(e),openMark:wb(e),closeMark:Cb(e),openNode:qp(e),addNode:Jp(e),closeNode:pl(e)}},Mb=e=>Object.prototype.hasOwnProperty.call(e,"size");class Ob{constructor(t,n,r){Fn(this,yo),Fn(this,fl),Fn(this,hl),Fn(this,bi),this.stack=t,this.schema=n,this.specMap=r,this.toString=i=>i.stringify(this.stack.build()),this.next=i=>Mb(i)?(i.forEach(o=>{rn(this,bi,Ha).call(this,o)}),this):(rn(this,bi,Ha).call(this,i),this),this.addNode=(...i)=>(this.stack.addNode(...i),this),this.openNode=(...i)=>(this.stack.openNode(...i),this),this.closeNode=(...i)=>(this.stack.closeNode(...i),this),this.withMark=(...i)=>(this.stack.openMark(...i),this)}run(t){return this.next(t),this}}yo=new WeakSet;cl=function(e){const t=Object.entries(this.specMap).map(([n,r])=>vo({key:n},r)).find(n=>n.match(e));if(!t)throw nm(e.type);return t};fl=new WeakSet;Bp=function(e){const{runner:t}=rn(this,yo,cl).call(this,e);t(this,e)};hl=new WeakSet;Vp=function(e,t){const{runner:n}=rn(this,yo,cl).call(this,e);return n(this,e,t)};bi=new WeakSet;Ha=function(e){const{marks:t}=e;t.every(r=>!rn(this,hl,Vp).call(this,r,e))&&rn(this,fl,Bp).call(this,e),t.forEach(r=>this.stack.closeMark(r))};const Ab=(e,t,n)=>r=>{const i=new Ob(Sb(),e,t);return i.run(r),i.toString(n)};function Eb(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Tb(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Nb=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Tb(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Eb(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Ie="-ms-",Ji="-moz-",G="-webkit-",Kp="comm",dl="rule",ml="decl",Ib="@import",Up="@keyframes",Db=Math.abs,ko=String.fromCharCode,_b=Object.assign;function Pb(e,t){return(((t<<2^We(e,0))<<2^We(e,1))<<2^We(e,2))<<2^We(e,3)}function Gp(e){return e.trim()}function Rb(e,t){return(e=t.exec(e))?e[0]:e}function Q(e,t,n){return e.replace(t,n)}function Wa(e,t){return e.indexOf(t)}function We(e,t){return e.charCodeAt(t)|0}function Rr(e,t,n){return e.slice(t,n)}function Ot(e){return e.length}function gl(e){return e.length}function oi(e,t){return t.push(e),e}function Fb(e,t){return e.map(t).join("")}var bo=1,Kn=1,Qp=0,Ke=0,ge=0,Xn="";function wo(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:bo,column:Kn,length:a,return:""}}function ur(e,t){return _b(wo("",null,null,"",null,null,0),e,{length:-e.length},t)}function zb(){return ge}function Lb(){return ge=Ke>0?We(Xn,--Ke):0,Kn--,ge===10&&(Kn=1,bo--),ge}function Xe(){return ge=Ke<Qp?We(Xn,Ke++):0,Kn++,ge===10&&(Kn=1,bo++),ge}function Nt(){return We(Xn,Ke)}function wi(){return Ke}function Gr(e,t){return Rr(Xn,e,t)}function Fr(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Zp(e){return bo=Kn=1,Qp=Ot(Xn=e),Ke=0,[]}function Yp(e){return Xn="",e}function Ci(e){return Gp(Gr(Ke-1,ja(e===91?e+2:e===40?e+1:e)))}function Bb(e){for(;(ge=Nt())&&ge<33;)Xe();return Fr(e)>2||Fr(ge)>3?"":" "}function Vb(e,t){for(;--t&&Xe()&&!(ge<48||ge>102||ge>57&&ge<65||ge>70&&ge<97););return Gr(e,wi()+(t<6&&Nt()==32&&Xe()==32))}function ja(e){for(;Xe();)switch(ge){case e:return Ke;case 34:case 39:e!==34&&e!==39&&ja(ge);break;case 40:e===41&&ja(e);break;case 92:Xe();break}return Ke}function $b(e,t){for(;Xe()&&e+ge!==47+10;)if(e+ge===42+42&&Nt()===47)break;return"/*"+Gr(t,Ke-1)+"*"+ko(e===47?e:Xe())}function Hb(e){for(;!Fr(Nt());)Xe();return Gr(e,Ke)}function Wb(e){return Yp(xi("",null,null,null,[""],e=Zp(e),0,[0],e))}function xi(e,t,n,r,i,o,a,s,l){for(var u=0,c=0,f=a,h=0,p=0,d=0,m=1,v=1,g=1,y=0,C="",S=i,O=o,w=r,E=C;v;)switch(d=y,y=Xe()){case 40:if(d!=108&&E.charCodeAt(f-1)==58){Wa(E+=Q(Ci(y),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:E+=Ci(y);break;case 9:case 10:case 13:case 32:E+=Bb(d);break;case 92:E+=Vb(wi()-1,7);continue;case 47:switch(Nt()){case 42:case 47:oi(jb($b(Xe(),wi()),t,n),l);break;default:E+="/"}break;case 123*m:s[u++]=Ot(E)*g;case 125*m:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+c:p>0&&Ot(E)-f&&oi(p>32?hc(E+";",r,n,f-1):hc(Q(E," ","")+";",r,n,f-2),l);break;case 59:E+=";";default:if(oi(w=fc(E,t,n,u,c,i,s,C,S=[],O=[],f),o),y===123)if(c===0)xi(E,t,w,w,S,o,f,s,O);else switch(h){case 100:case 109:case 115:xi(e,w,w,r&&oi(fc(e,w,w,0,0,i,s,C,i,S=[],f),O),i,O,f,s,r?S:O);break;default:xi(E,w,w,w,[""],O,0,s,O)}}u=c=p=0,m=g=1,C=E="",f=a;break;case 58:f=1+Ot(E),p=d;default:if(m<1){if(y==123)--m;else if(y==125&&m++==0&&Lb()==125)continue}switch(E+=ko(y),y*m){case 38:g=c>0?1:(E+="\f",-1);break;case 44:s[u++]=(Ot(E)-1)*g,g=1;break;case 64:Nt()===45&&(E+=Ci(Xe())),h=Nt(),c=f=Ot(C=E+=Hb(wi())),y++;break;case 45:d===45&&Ot(E)==2&&(m=0)}}return o}function fc(e,t,n,r,i,o,a,s,l,u,c){for(var f=i-1,h=i===0?o:[""],p=gl(h),d=0,m=0,v=0;d<r;++d)for(var g=0,y=Rr(e,f+1,f=Db(m=a[d])),C=e;g<p;++g)(C=Gp(m>0?h[g]+" "+y:Q(y,/&\f/g,h[g])))&&(l[v++]=C);return wo(e,t,n,i===0?dl:s,l,u,c)}function jb(e,t,n){return wo(e,t,n,Kp,ko(zb()),Rr(e,2,-2),0)}function hc(e,t,n,r){return wo(e,t,n,ml,Rr(e,0,r),Rr(e,r+1,-1),r)}function Xp(e,t){switch(Pb(e,t)){case 5103:return G+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return G+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return G+e+Ji+e+Ie+e+e;case 6828:case 4268:return G+e+Ie+e+e;case 6165:return G+e+Ie+"flex-"+e+e;case 5187:return G+e+Q(e,/(\w+).+(:[^]+)/,G+"box-$1$2"+Ie+"flex-$1$2")+e;case 5443:return G+e+Ie+"flex-item-"+Q(e,/flex-|-self/,"")+e;case 4675:return G+e+Ie+"flex-line-pack"+Q(e,/align-content|flex-|-self/,"")+e;case 5548:return G+e+Ie+Q(e,"shrink","negative")+e;case 5292:return G+e+Ie+Q(e,"basis","preferred-size")+e;case 6060:return G+"box-"+Q(e,"-grow","")+G+e+Ie+Q(e,"grow","positive")+e;case 4554:return G+Q(e,/([^-])(transform)/g,"$1"+G+"$2")+e;case 6187:return Q(Q(Q(e,/(zoom-|grab)/,G+"$1"),/(image-set)/,G+"$1"),e,"")+e;case 5495:case 3959:return Q(e,/(image-set\([^]*)/,G+"$1$`$1");case 4968:return Q(Q(e,/(.+:)(flex-)?(.*)/,G+"box-pack:$3"+Ie+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+G+e+e;case 4095:case 3583:case 4068:case 2532:return Q(e,/(.+)-inline(.+)/,G+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ot(e)-1-t>6)switch(We(e,t+1)){case 109:if(We(e,t+4)!==45)break;case 102:return Q(e,/(.+:)(.+)-([^]+)/,"$1"+G+"$2-$3$1"+Ji+(We(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Wa(e,"stretch")?Xp(Q(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(We(e,t+1)!==115)break;case 6444:switch(We(e,Ot(e)-3-(~Wa(e,"!important")&&10))){case 107:return Q(e,":",":"+G)+e;case 101:return Q(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+G+(We(e,14)===45?"inline-":"")+"box$3$1"+G+"$2$3$1"+Ie+"$2box$3")+e}break;case 5936:switch(We(e,t+11)){case 114:return G+e+Ie+Q(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return G+e+Ie+Q(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return G+e+Ie+Q(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return G+e+Ie+e+e}return e}function Bn(e,t){for(var n="",r=gl(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function qb(e,t,n,r){switch(e.type){case Ib:case ml:return e.return=e.return||e.value;case Kp:return"";case Up:return e.return=e.value+"{"+Bn(e.children,r)+"}";case dl:e.value=e.props.join(",")}return Ot(n=Bn(e.children,r))?e.return=e.value+"{"+n+"}":""}function Jb(e){var t=gl(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}function Kb(e){return function(t){t.root||(t=t.return)&&e(t)}}function Ub(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ml:e.return=Xp(e.value,e.length);break;case Up:return Bn([ur(e,{value:Q(e.value,"@","@"+G)})],r);case dl:if(e.length)return Fb(e.props,function(i){switch(Rb(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Bn([ur(e,{props:[Q(i,/:(read-\w+)/,":"+Ji+"$1")]})],r);case"::placeholder":return Bn([ur(e,{props:[Q(i,/:(plac\w+)/,":"+G+"input-$1")]}),ur(e,{props:[Q(i,/:(plac\w+)/,":"+Ji+"$1")]}),ur(e,{props:[Q(i,/:(plac\w+)/,Ie+"input-$1")]})],r)}return""})}}function Gb(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Qb=function(t,n,r){for(var i=0,o=0;i=o,o=Nt(),i===38&&o===12&&(n[r]=1),!Fr(o);)Xe();return Gr(t,Ke)},Zb=function(t,n){var r=-1,i=44;do switch(Fr(i)){case 0:i===38&&Nt()===12&&(n[r]=1),t[r]+=Qb(Ke-1,n,r);break;case 2:t[r]+=Ci(i);break;case 4:if(i===44){t[++r]=Nt()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=ko(i)}while(i=Xe());return t},Yb=function(t,n){return Yp(Zb(Zp(t),n))},pc=new WeakMap,Xb=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!pc.get(r))&&!i){pc.set(t,!0);for(var o=[],a=Yb(n,o),s=r.props,l=0,u=0;l<a.length;l++)for(var c=0;c<s.length;c++,u++)t.props[u]=o[l]?a[l].replace(/&\f/g,s[c]):s[c]+" "+a[l]}}},ew=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}},tw=[Ub],nw=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var v=m.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||tw,o={},a,s=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var v=m.getAttribute("data-emotion").split(" "),g=1;g<v.length;g++)o[v[g]]=!0;s.push(m)});var l,u=[Xb,ew];{var c,f=[qb,Kb(function(m){c.insert(m)})],h=Jb(u.concat(i,f)),p=function(v){return Bn(Wb(v),h)};l=function(v,g,y,C){c=y,p(v?v+"{"+g.styles+"}":g.styles),C&&(d.inserted[g.name]=!0)}}var d={key:n,sheet:new Nb({key:n,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return d.sheet.hydrate(s),d};function rw(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var iw={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ow=/[A-Z]|^ms/g,aw=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ed=function(t){return t.charCodeAt(1)===45},dc=function(t){return t!=null&&typeof t!="boolean"},ta=Gb(function(e){return ed(e)?e:e.replace(ow,"-$&").toLowerCase()}),mc=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(aw,function(r,i,o){return At={name:i,styles:o,next:At},i})}return iw[t]!==1&&!ed(t)&&typeof n=="number"&&n!==0?n+"px":n};function zr(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return At={name:n.name,styles:n.styles,next:At},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)At={name:r.name,styles:r.styles,next:At},r=r.next;var i=n.styles+";";return i}return sw(e,t,n)}case"function":{if(e!==void 0){var o=At,a=n(e);return At=o,zr(e,t,a)}break}}if(t==null)return n;var s=t[n];return s!==void 0?s:n}function sw(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=zr(e,t,n[i])+";";else for(var o in n){var a=n[o];if(typeof a!="object")t!=null&&t[a]!==void 0?r+=o+"{"+t[a]+"}":dc(a)&&(r+=ta(o)+":"+mc(o,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var s=0;s<a.length;s++)dc(a[s])&&(r+=ta(o)+":"+mc(o,a[s])+";");else{var l=zr(e,t,a);switch(o){case"animation":case"animationName":{r+=ta(o)+":"+l+";";break}default:r+=o+"{"+l+"}"}}}return r}var gc=/label:\s*([^\s;\n{]+)\s*(;|$)/g,At,na=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,o="";At=void 0;var a=t[0];a==null||a.raw===void 0?(i=!1,o+=zr(r,n,a)):o+=a[0];for(var s=1;s<t.length;s++)o+=zr(r,n,t[s]),i&&(o+=a[s]);gc.lastIndex=0;for(var l="",u;(u=gc.exec(o))!==null;)l+="-"+u[1];var c=rw(o)+l;return{name:c,styles:o,next:At}},lw=!0;function td(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var uw=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||lw===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},cw=function(t,n,r){uw(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function vc(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function yc(e,t,n){var r=[],i=td(e,r,n);return r.length<2?n:i+t(r)}var fw=function(t){var n=nw(t);n.sheet.speedy=function(s){this.isSpeedy=s},n.compat=!0;var r=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var f=na(u,n.registered,void 0);return cw(n,f,!1),n.key+"-"+f.name},i=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var f=na(u,n.registered),h="animation-"+f.name;return vc(n,{name:f.name,styles:"@keyframes "+h+"{"+f.styles+"}"}),h},o=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var f=na(u,n.registered);vc(n,f)},a=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return yc(n.registered,r,hw(u))};return{css:r,cx:a,injectGlobal:o,keyframes:i,hydrate:function(l){l.forEach(function(u){n.inserted[u]=!0})},flush:function(){n.registered={},n.inserted={},n.sheet.flush()},sheet:n.sheet,cache:n,getRegisteredStyles:td.bind(null,n.registered),merge:yc.bind(null,n.registered,r)}},hw=function e(t){for(var n="",r=0;r<t.length;r++){var i=t[r];if(i!=null){var o=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))o=e(i);else{o="";for(var a in i)i[a]&&a&&(o&&(o+=" "),o+=a)}break}default:o=i}o&&(n&&(n+=" "),n+=o)}}return n},nd=fw({key:"css"}),vl=nd.injectGlobal,ue=nd.css,pw=Object.defineProperty,dw=Object.defineProperties,mw=Object.getOwnPropertyDescriptors,kc=Object.getOwnPropertySymbols,gw=Object.prototype.hasOwnProperty,vw=Object.prototype.propertyIsEnumerable,bc=(e,t,n)=>t in e?pw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xt=(e,t)=>{for(var n in t||(t={}))gw.call(t,n)&&bc(e,n,t[n]);if(kc)for(var n of kc(t))vw.call(t,n)&&bc(e,n,t[n]);return e},wc=(e,t)=>dw(e,mw(t));const yw={typography:"",code:""},kw={radius:"0",lineWidth:"1px"},bw={scrollbar:()=>"",shadow:()=>"",border:()=>""},ww={icon:e=>{const t=document.createElement("div");return t.className="milkdown-icon",t.textContent=e,t},label:e=>e},Cw=e=>{if(e.startsWith("rgba"))return e.slice(5,-1).split(",").slice(0,-1).join(",");if(e.startsWith("rgb"))return e.slice(4,-1);const n=(r=>{const i=/^([a-f\d])([a-f\d])([a-f\d])$/i,o=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,a=h=>parseInt(h,16),s=r.slice(1).replace(i,(h,p,d,m)=>p+p+d+d+m+m),[l,u,c,f]=s.match(o)||[];return l?[u,c,f].map(a):null})(e);return n?n.join(", "):(console.warn(`Invalid hex: ${e}`),e)},qa=(e={},t=n=>`${n}`)=>Object.entries(e).map(([n,r])=>`--${n}: ${t(r)};`).join(`
`),xw=(e={})=>qa(e,Cw),Sw=e=>{const{color:t={},font:n,size:r={}}=e;vl`
        :root {
            ${xw(t)};
            ${qa(n,o=>o.join(", "))};
            ${qa(r)};
        }
    `},Mw=e=>{const{font:t,size:n={},mixin:r,slots:i,global:o}=e,a=(p,d=1)=>`rgba(var(--${p}), ${d})`,s=(p={})=>Object.fromEntries(Object.keys(p).map(d=>[d,`var(--${d})`])),l={palette:a,size:xt(xt({},kw),s(n)),font:xt(xt({},yw),s(t))},u=xt(xt({},bw),r==null?void 0:r(l)),c=wc(xt({},l),{mixin:u}),f=xt(xt({},ww),i==null?void 0:i(c)),h=wc(xt({},c),{slots:f});return o==null||o(h),h};var Ow=Object.defineProperty,Aw=Object.defineProperties,Ew=Object.getOwnPropertyDescriptors,Cc=Object.getOwnPropertySymbols,Tw=Object.prototype.hasOwnProperty,Nw=Object.prototype.propertyIsEnumerable,xc=(e,t,n)=>t in e?Ow(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qt=(e,t)=>{for(var n in t||(t={}))Tw.call(t,n)&&xc(e,n,t[n]);if(Cc)for(var n of Cc(t))Nw.call(t,n)&&xc(e,n,t[n]);return e},Si=(e,t)=>Aw(e,Ew(t)),rd=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Qe=(e,t,n)=>(rd(e,t,"read from private field"),n?n.call(e):t.get(e)),hn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},pn=(e,t,n,r)=>(rd(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),pr,dr,mr,gr,Pn,Mi,Oi;const Ja=an("ConfigReady"),Iw=e=>t=>(t.record(Ja),async n=>{await e(n),n.done(Ja)}),Ki=an("InitReady"),Sc=X([],"initTimer"),Dw=X({},"editor"),yl=X([],"inputRules"),Lr=X([],"prosePlugins"),kl=X([],"remarkPlugins"),Qr=X([],"nodeView"),Br=X(Pp(),"remark"),_w=e=>t=>(t.inject(Dw,e).inject(Lr).inject(kl).inject(yl).inject(Qr).inject(Br,Pp()).inject(Sc,[Ja]).record(Ki),async n=>{await n.waitTimers(Sc),n.done(Ki)}),on=an("schemaReady"),et=X({},"schema"),Mc=X([],"schemaTimer"),Un=X([],"nodes"),Gn=X([],"marks"),Pw=e=>(e.inject(et).inject(Un).inject(Gn).inject(Mc,[Ki]).record(on),async t=>{await t.waitTimers(Mc);const n=t.get(Br),i=t.get(kl).reduce((s,l)=>s.use(l),n);t.set(Br,i);const o=Object.fromEntries(t.get(Un)),a=Object.fromEntries(t.get(Gn));t.set(et,new xn({nodes:o,marks:a})),t.done(on)}),Ka=X(()=>null,"parser"),Oc=X([],"parserTimer"),Ua=an("ParserReady"),Rw=e=>(e.inject(Ka).inject(Oc,[on]).record(Ua),async t=>{await t.waitTimers(Oc);const n=t.get(Un),r=t.get(Gn),i=t.get(Br),o=t.get(et),a=[...n.map(([l,u])=>Qt({id:l},u)).map(l=>Si(Qt({},l),{is:"node"})),...r.map(([l,u])=>Qt({id:l},u)).map(l=>Si(Qt({},l),{is:"mark"}))],s=Object.fromEntries(a.map(({id:l,parseMarkdown:u,is:c})=>[l,Si(Qt({},u),{is:c,key:l})]));t.set(Ka,hb(o,s,i)),t.done(Ua)}),Ga=X(()=>"","serializer"),Ac=X([],"serializerTimer"),Ui=an("SerializerReady"),Fw=e=>(e.inject(Ga).inject(Ac,[on]).record(Ui),async t=>{await t.waitTimers(Ac);const n=t.get(Un),r=t.get(Gn),i=t.get(Br),o=t.get(et),a=[...n,...r],s=Object.fromEntries(a.map(([l,u])=>[l,u.toMarkdown]));t.set(Ga,Ab(o,s,i)),t.done(Ui)}),Qa=X("","defaultValue"),Za=X({},"editorState"),Ec=X({},"stateOptions"),Tc=X([],"editorStateTimer"),Ya=an("EditorStateReady"),zw=(e,t,n)=>{if(typeof e=="string")return t(e);if(e.type==="html")return vt.fromSchema(n).parse(e.dom);if(e.type==="json")return W.fromJSON(n,e.value);throw Qd(e)},Lw=e=>(e.inject(Qa).inject(Za).inject(Ec).inject(Tc,[Ua,Ui,rs]).record(Ya),async t=>{await t.waitTimers(Tc);const n=t.get(et),r=t.get(Ka),i=t.get(yl),o=t.get(Ec),a=t.get(Lr),s=t.get(Qa),l=zw(s,r,n),u=Fe.create(Qt({schema:n,doc:l,plugins:[...a,Ry({rules:i}),ih(ig)]},o));t.set(Za,u),t.done(Ya)}),Xa=X({},"editorView"),es=X({},"editorViewOptions"),ts=X(document.body,"root"),Nc=X([],"editorViewTimer"),ns=an("EditorViewReady"),Bw=e=>{const t=document.createElement("div");return t.className="milkdown",e.appendChild(t),t},Vw=e=>{e.classList.add("editor"),e.setAttribute("role","textbox")},$w=e=>(e.inject(ts,document.body).inject(Xa).inject(es).inject(Nc,[Ya]).record(ns),async t=>{await t.waitTimers(Nc);const n=t.get(Za),r=t.get(es),i=Object.fromEntries(t.get(Qr)),o=t.get(ts),a=o?Bw(o):void 0,s=new ke(a,Qt({state:n,nodeViews:i},r));Vw(s.dom),t.set(Xa,s),t.done(ns)}),ne=(e,t)=>[e,t],Gi=X({},"commands"),ie=()=>X(()=>()=>!1,"cmdKey"),Ic=X([],"commandsTimer"),rs=an("CommandsReady"),Hw=e=>{const t=gf(),n={create:(r,i)=>r(t.sliceMap,i),get:r=>t.getSlice(r).get(),call:()=>{throw rm()}};return e.inject(Gi,n).inject(Ic,[on]).record(rs),async r=>{await r.waitTimers(Ic),r.done(rs),await r.wait(ns),r.update(Gi,i=>Si(Qt({},i),{call:(o,a)=>{const l=n.get(o)(a),u=r.get(Xa);return l(u.state,u.dispatch,u)}}))}},Le=X({mixin:{},font:{},size:{},slots:{},palette:()=>""},"ThemeTool"),Ww=e=>t=>(t.inject(Le),n=>{Sw(e);const r=Mw(e);n.set(Le,r)}),id=class{constructor(){hn(this,pr,void 0),hn(this,dr,void 0),hn(this,mr,void 0),hn(this,gr,void 0),hn(this,Pn,void 0),hn(this,Mi,void 0),hn(this,Oi,void 0),pn(this,pr,gf()),pn(this,dr,hm()),pn(this,mr,new Set),pn(this,gr,[]),pn(this,Pn,new cm(Qe(this,pr),Qe(this,dr))),pn(this,Mi,new fm(Qe(this,pr),Qe(this,dr))),pn(this,Oi,()=>{const e=[Pw,Rw,Fw,Hw,Lw,$w],t=Iw(async n=>{await Promise.all(Qe(this,gr).map(r=>r(n)))});this.use(e.concat(_w(this)).concat(t))}),this.use=e=>([e].flat().forEach(t=>{Qe(this,mr).add(t(Qe(this,Mi)))}),this),this.config=e=>(Qe(this,gr).push(e),this),this.create=async()=>(Qe(this,Oi).call(this),await Promise.all([...Qe(this,mr)].map(e=>e(Qe(this,Pn)))),this),this.action=e=>e(Qe(this,Pn))}static make(){return new id}get ctx(){return Qe(this,Pn)}};let jw=id;pr=new WeakMap;dr=new WeakMap;mr=new WeakMap;gr=new WeakMap;Pn=new WeakMap;Mi=new WeakMap;Oi=new WeakMap;const Dc=e=>Object.prototype.hasOwnProperty.call(e,"origin");class er extends Array{findThenRun(t,n){const r=this.findIndex(i=>Dc(i)&&i.origin===t);return r<0?this:(n(r),this)}configure(t,n){return this.findThenRun(t,r=>{this.splice(r,1,t(n))})}replace(t,n){return this.findThenRun(t,r=>{this.splice(r,1,n)})}remove(t){return this.findThenRun(t,n=>{this.splice(n,1)})}headless(){return this.filter(Dc).forEach(t=>{this.configure(t.origin,{headless:!0})}),this}static create(t){return new er(...t)}}const qw=e=>(t,...n)=>{var r;const i=(r=e==null?void 0:e(t))!=null?r:n;return Array.isArray(i)?i.filter(o=>o).join(" "):i},ae=(e,t,n)=>[e,t,n],bl=(e,t)=>{try{const n=e.get(Le);return{getClassName:qw(t==null?void 0:t.className),getStyle:r=>(t==null?void 0:t.headless)?"":r(n),themeTool:n}}catch{throw im()}},wl=async(e,t,n,r)=>{if(await e.wait(Ki),t.remarkPlugins){const o=t.remarkPlugins(e);e.update(kl,a=>[...a,...o])}const i=await n();if(t.commands&&t.commands(i,e).forEach(([a,s])=>{e.get(Gi).create(a,s)}),t.inputRules){const o=t.inputRules(i,e);e.update(yl,a=>[...a,...o])}if(t.shortcuts){const o=(s,l)=>{var u,c;return(c=(u=r==null?void 0:r.keymap)==null?void 0:u[s])!=null?c:l},a=Object.entries(t.shortcuts).flatMap(([s,[l,u,c]])=>{const f=()=>e.get(Gi).call(l,c),h=o(s,u);return Array.isArray(h)?h.map(p=>({key:p,runner:f})):{key:h,runner:f}}).map(s=>[s.key,s.runner]);e.update(Lr,s=>s.concat(ih(Object.fromEntries(a))))}if(t.prosePlugins){const o=t.prosePlugins(i,e);e.update(Lr,a=>[...a,...o])}},Cl=e=>{const t=n=>{const r=e(n);return r.origin=t,r};return t},xl=(e,t,n)=>{const r=t,i=o=>n((...a)=>o(e(...a),...a));return r.extend=i,r},tr=e=>xl(e,Cl(t=>()=>async n=>{var r;const i=bl(n,t),o=e(i,t);if(o.view=(r=t==null?void 0:t.view)!=null?r:o.view,await wl(n,o,async()=>{const a=o.schema(n);return n.update(Gn,l=>[...l,[o.id,a]]),await n.wait(on),n.get(et).marks[o.id]},t),o.view){const a=o.view(n);n.update(Qr,s=>[...s,[o.id,a]])}}),tr),Ge=e=>xl(e,Cl(t=>()=>async n=>{var r;const i=bl(n,t),o=e(i,t);if(o.view=(r=t==null?void 0:t.view)!=null?r:o.view,await wl(n,o,async()=>{const a=o.schema(n);return n.update(Un,l=>[...l,[o.id,a]]),await n.wait(on),n.get(et).nodes[o.id]},t),o.view){const a=o.view(n);n.update(Qr,s=>[...s,[o.id,a]])}}),Ge),Co=e=>xl(e,Cl(t=>()=>async n=>{const r=bl(n,t),i=e(r,t);if(await wl(n,i,async()=>{let o={},a={};if(i.schema){const f=i.schema(n);if(f.node){o=f.node;const h=Object.entries(f.node);n.update(Un,p=>[...p,...h])}if(f.mark){a=f.mark;const h=Object.entries(f.mark);n.update(Gn,p=>[...p,...h])}}await n.wait(on);const s=n.get(et),l=Object.keys(o).map(f=>[f,s.nodes[f]]),u=Object.keys(a).map(f=>[f,s.marks[f]]);return Object.fromEntries([...l,...u])},t),i.view){const o=i.view(n);n.update(Qr,a=>[...a,...Object.entries(o)])}}),Co);const Jw=!0,Kw="skip",_c=!1,od=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);var i=mo(t),o=r?-1:1;a(e,null,[])();function a(s,l,u){var c=typeof s=="object"&&s!==null?s:{},f;return typeof c.type=="string"&&(f=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(h,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})),h;function h(){var p=[],d,m,v;if((!t||i(s,l,u[u.length-1]||null))&&(p=Uw(n(s,u)),p[0]===_c))return p;if(s.children&&p[0]!==Kw)for(m=(r?s.children.length:-1)+o,v=u.concat(s);m>-1&&m<s.children.length;){if(d=a(s.children[m],m,v)(),d[0]===_c)return d;m=typeof d[1]=="number"?d[1]:m+o}return p}}};function Uw(e){return Array.isArray(e)?e:typeof e=="number"?[Jw,e]:[e]}const Gw=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),od(e,t,i,r);function i(o,a){var s=a[a.length-1];return n(o,s?s.children.indexOf(o):null,s)}},Pc={}.hasOwnProperty;function Qw(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return Gw(e,"definition",n),r;function n(i){const o=Rc(i.identifier);o&&!Pc.call(t,o)&&(t[o]=i)}function r(i){const o=Rc(i);return o&&Pc.call(t,o)?t[o]:null}}function Rc(e){return String(e||"").toUpperCase()}function Zw(){return e=>{const t=Qw(e);Cp(e,(n,r,i)=>{if(n.type==="definition"&&i!==null&&typeof r=="number")return i.children.splice(r,1),[Ba,r];if(n.type==="imageReference"||n.type==="linkReference"){const o=t(n.identifier);if(o&&i!==null&&typeof r=="number"){const a=n.type==="imageReference"?{type:"image",url:o.url,title:o.title,alt:n.alt}:{type:"link",url:o.url,title:o.title,children:n.children};return i.children[r]=a,[Ba,r]}}})}}var Yw=Object.defineProperty,Xw=Object.defineProperties,eC=Object.getOwnPropertyDescriptors,Fc=Object.getOwnPropertySymbols,tC=Object.prototype.hasOwnProperty,nC=Object.prototype.propertyIsEnumerable,zc=(e,t,n)=>t in e?Yw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zt=(e,t)=>{for(var n in t||(t={}))tC.call(t,n)&&zc(e,n,t[n]);if(Fc)for(var n of Fc(t))nC.call(t,n)&&zc(e,n,t[n]);return e},vn=(e,t)=>Xw(e,eC(t));const we={HardBreak:"HardBreak",Blockquote:"Blockquote",BulletList:"BulletList",OrderedList:"OrderedList",CodeFence:"CodeFence",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",Text:"Text",CodeInline:"CodeInline",Em:"Em",Bold:"Bold",NextListItem:"NextListItem",SinkListItem:"SinkListItem",LiftListItem:"LiftListItem"},Lc="code_inline",is=ie(),rC=tr(e=>{const t=e.getStyle(({palette:n,size:r,font:i})=>ue`
                background-color: ${n("neutral")};
                color: ${n("background")};
                border-radius: ${r.radius};
                font-weight: 500;
                font-family: ${i.code};
                padding: 0 0.2rem;
            `);return{id:Lc,schema:()=>({excludes:"_",parseDOM:[{tag:"code"}],toDOM:n=>["code",{class:e.getClassName(n.attrs,"code-inline",t)}],parseMarkdown:{match:n=>n.type==="inlineCode",runner:(n,r,i)=>{n.openMark(i),n.addText(r.value),n.closeMark(i)}},toMarkdown:{match:n=>n.type.name===Lc,runner:(n,r,i)=>(n.addNode("inlineCode",void 0,i.text||""),!0)}}),inputRules:n=>[Cn(/(?:^|[^`])(`([^`]+)`)$/,n)],commands:n=>[ne(is,()=>Hr(n))],shortcuts:{[we.CodeInline]:ae(is,"Mod-e")}}}),ra="em",as=ie(),iC=tr(e=>({id:ra,schema:()=>({parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:t=>t==="italic"}],toDOM:t=>["em",{class:e.getClassName(t.attrs,ra)}],parseMarkdown:{match:t=>t.type==="emphasis",runner:(t,n,r)=>{t.openMark(r),t.next(n.children),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name===ra,runner:(t,n)=>{t.withMark(n,"emphasis")}}}),inputRules:t=>[Cn(/(?:^|[^_])(_([^_]+)_)$/,t),Cn(/(?:^|[^*])(\*([^*]+)\*)$/,t)],commands:t=>[ne(as,()=>Hr(t))],shortcuts:{[we.Em]:ae(as,"Mod-i")}})),ad=ie(),sd=ie(),ia="link",oC=tr(e=>{const t=e.getStyle(n=>{const r=n.palette("line");return ue`
            color: ${n.palette("secondary")};
            cursor: pointer;
            transition: all 0.4s ease-in-out;
            font-weight: 500;
            &:hover {
                background-color: ${r};
                box-shadow: 0 0.2rem ${r}, 0 -0.2rem ${r};
            }
        `});return{id:ia,schema:()=>({attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:n=>{if(!(n instanceof HTMLElement))throw new Error;return{href:n.getAttribute("href"),title:n.getAttribute("title")}}}],toDOM:n=>["a",vn(Zt({},n.attrs),{class:e.getClassName(n.attrs,ia,t)})],parseMarkdown:{match:n=>n.type==="link",runner:(n,r,i)=>{const o=r.url,a=r.title;n.openMark(i,{href:o,title:a}),n.next(r.children),n.closeMark(i)}},toMarkdown:{match:n=>n.type.name===ia,runner:(n,r)=>{n.withMark(r,"link",void 0,{title:r.attrs.title,url:r.attrs.href})}}}),commands:n=>[ne(ad,(r="")=>Hr(n,{href:r})),ne(sd,(r="")=>(i,o)=>{if(!o)return!1;const{marks:a}=i.schema;let s,l=-1;const{selection:u}=i;if(i.doc.nodesBetween(u.from,u.to,(m,v)=>{if(a.link.isInSet(m.marks))return s=m,l=v,!1}),!s)return!1;const c=s.marks.find(({type:m})=>m===n);if(!c)return!1;const f=l,h=l+s.nodeSize,{tr:p}=i,d=a.link.create(vn(Zt({},c.attrs),{href:r}));return o(p.removeMark(f,h,c).addMark(f,h,d).setSelection(new U(p.selection.$anchor)).scrollIntoView()),!0})],inputRules:(n,r)=>[new Ue(/\[(?<text>.*?)]\((?<href>.*?)(?=“|\))"?(?<title>[^"]+)?"?\)/,(i,o,a,s)=>{const[l,u="",c,f]=o,{tr:h}=i;if(l){const p=u||"link";h.replaceWith(a,s,r.get(et).text(p)).addMark(a,p.length+a,n.create({title:f,href:c}))}return h})]}}),oa="strong",ss=ie(),aC=tr(e=>{const t=e.getStyle(()=>ue`
                font-weight: 600;
            `);return{id:oa,schema:()=>({parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-style",getAttrs:n=>n==="bold"}],toDOM:n=>["strong",{class:e.getClassName(n.attrs,oa,t)}],parseMarkdown:{match:n=>n.type==="strong",runner:(n,r,i)=>{n.openMark(i),n.next(r.children),n.closeMark(i)}},toMarkdown:{match:n=>n.type.name===oa,runner:(n,r)=>{n.withMark(r,"strong")}}}),inputRules:n=>[Cn(/(?:__)([^_]+)(?:__)$/,n),Cn(/(?:\*\*)([^*]+)(?:\*\*)$/,n)],commands:n=>[ne(ss,()=>Hr(n))],shortcuts:{[we.Bold]:ae(ss,"Mod-b")}}}),sC=[rC(),iC(),aC(),oC()],ai="blockquote",ls=ie(),lC=Ge(e=>{const t=e.getStyle(n=>ue`
                padding-left: 1.875rem;
                line-height: 1.75rem;
                border-left: 4px solid ${n.palette("primary")};
                * {
                    font-size: 1rem;
                    line-height: 1.5rem;
                }
            `);return{id:ai,schema:()=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:n=>["blockquote",{class:e.getClassName(n.attrs,ai,t)},0],parseMarkdown:{match:({type:n})=>n===ai,runner:(n,r,i)=>{n.openNode(i).next(r.children).closeNode()}},toMarkdown:{match:n=>n.type.name===ai,runner:(n,r)=>{n.openNode("blockquote").next(r.content).closeNode()}}}),inputRules:n=>[jr(/^\s*>\s$/,n)],commands:n=>[ne(ls,()=>ro(n))],shortcuts:{[we.Blockquote]:ae(ls,"Mod-Shift-b")}}}),us=ie(),uC=Ge(e=>{const t="bullet_list";return{id:t,schema:()=>({content:"listItem+",group:"block",parseDOM:[{tag:"ul"}],toDOM:n=>["ul",{class:e.getClassName(n.attrs,"bullet-list")},0],parseMarkdown:{match:({type:n,ordered:r})=>n==="list"&&!r,runner:(n,r,i)=>{n.openNode(i).next(r.children).closeNode()}},toMarkdown:{match:n=>n.type.name===t,runner:(n,r)=>{n.openNode("list",void 0,{ordered:!1}).next(r.content).closeNode()}}}),inputRules:n=>[jr(/^\s*([-+*])\s$/,n)],commands:n=>[ne(us,()=>ro(n))],shortcuts:{[we.BulletList]:ae(us,"Mod-Shift-8")}}}),cC=["","javascript","typescript","bash","sql","json","html","css","c","cpp","java","ruby","python","go","rust","markdown"],fC=/^```(?<language>[a-z]*)?[\s\n]$/,hC=/^~~~(?<language>[a-z]*)?[\s\n]$/,cs=ie(),aa="fence",pC=Ge((e,t)=>{const n=e.getStyle(({palette:r,mixin:i,size:o,font:a})=>{const{shadow:s,scrollbar:l,border:u}=i,{lineWidth:c,radius:f}=o;return ue`
            background-color: ${r("background")};
            color: ${r("neutral")};
            font-size: 0.85rem;
            padding: 1.2rem 0.4rem 1.4rem;
            border-radius: ${f};
            font-family: ${a.typography};

            * {
                margin: 0;
            }

            .code-fence_select-wrapper {
                position: relative;
            }

            .code-fence_value {
                width: 10.25rem;
                box-sizing: border-box;
                border-radius: ${o.radius};
                margin: 0 1.2rem 1.2rem;
                ${u()};
                ${s()};
                cursor: pointer;
                background-color: ${r("surface")};
                position: relative;
                display: flex;
                color: ${r("neutral",.87)};
                letter-spacing: 0.5px;
                height: 2.625rem;
                align-items: center;

                & > .icon {
                    width: 2.625rem;
                    height: 100%;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    color: ${r("solid",.87)};
                    border-left: ${c} solid ${r("line")};

                    text-align: center;
                    transition: all 0.2s ease-in-out;
                    &:hover {
                        background: ${r("background")};
                        color: ${r("primary")};
                    }
                }

                > span:first-child {
                    padding-left: 1rem;
                    flex: 1;
                    font-weight: 500;
                }
            }

            .code-fence_select-option {
                list-style: none;
                line-height: 2rem;
                padding-left: 1rem;
                cursor: pointer;
                :hover {
                    background: ${r("secondary",.12)};
                    color: ${r("primary")};
                }
            }

            .code-fence_select {
                &[data-fold='true'] {
                    display: none;
                }

                font-weight: 500;
                position: absolute;
                z-index: 1;
                top: 2.625rem;
                box-sizing: border-box;
                left: 1.2rem;
                padding: 0.5rem 0;
                max-height: 16.75rem;
                width: 10.25rem;
                ${u()};
                ${s()};
                background-color: ${r("surface")};
                border-top: none;
                overflow-y: auto;
                display: flex;
                flex-direction: column;

                ${l("y")}
            }

            code {
                line-height: 1.5;
                font-family: ${a.code};
            }

            pre {
                font-family: ${a.code};
                margin: 0 1.2rem !important;
            }
        `});return{id:aa,schema:()=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:""},fold:{default:!0}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:r=>{if(!(r instanceof HTMLElement))throw new Error("Parse DOM error.");return{language:r.dataset.language}}}],toDOM:r=>["div",{"data-language":r.attrs.language,class:e.getClassName(r.attrs,"code-fence",n)},["pre",["code",{spellCheck:"false"},0]]],parseMarkdown:{match:({type:r})=>r==="code",runner:(r,i,o)=>{const a=i.lang,s=i.value;r.openNode(o,{language:a}),s&&r.addText(s),r.closeNode()}},toMarkdown:{match:r=>r.type.name===aa,runner:(r,i)=>{var o;r.addNode("code",void 0,((o=i.content.firstChild)==null?void 0:o.text)||"",{lang:i.attrs.language})}}}),inputRules:r=>[Ea(fC,r,i=>{const[o,a]=i;if(!!o)return{language:a}}),Ea(hC,r,i=>{const[o,a]=i;if(!!o)return{language:a}})],commands:r=>[ne(cs,()=>Rs(r))],shortcuts:{[we.CodeFence]:ae(cs,"Mod-Alt-c")},view:r=>(i,o,a)=>{const s=document.createElement("div"),l=document.createElement("div"),u=document.createElement("ul"),c=document.createElement("pre"),f=document.createElement("code"),h=document.createElement("div");h.className="code-fence_value";const p=document.createElement("span");h.appendChild(p),o.editable&&h.appendChild(r.get(Le).slots.icon("downArrow")),u.className="code-fence_select",u.addEventListener("mousedown",m=>{if(m.preventDefault(),m.stopPropagation(),!o.editable)return;const v=m.target;if(!(v instanceof HTMLLIElement))return;const{tr:g}=o.state;o.dispatch(g.setNodeMarkup(a(),void 0,{fold:!0,language:v.dataset.value}))}),h.addEventListener("mousedown",m=>{if(m.preventDefault(),m.stopPropagation(),!o.editable)return;const{tr:v}=o.state;o.dispatch(v.setNodeMarkup(a(),void 0,{fold:!1,language:s.dataset.language}))}),document.addEventListener("mousedown",()=>{if(!o.editable||u.dataset.fold==="true")return;const{tr:m}=o.state;o.dispatch(m.setNodeMarkup(a(),void 0,{fold:!0,language:s.dataset.language}))}),((t==null?void 0:t.languageList)||cC).forEach(m=>{const v=document.createElement("li");v.className="code-fence_select-option",v.innerText=m||"--",u.appendChild(v),v.setAttribute("data-value",m)}),f.spellcheck=!1,l.className="code-fence_select-wrapper",l.contentEditable="false",l.append(h),l.append(u),c.append(f);const d=document.createElement("div");return f.append(d),d.style.whiteSpace="inherit",s.append(l,c),s.setAttribute("class",e.getClassName(i.attrs,"code-fence",n)),s.setAttribute("data-language",i.attrs.language),p.innerText=i.attrs.language||"--",u.setAttribute("data-fold",i.attrs.fold?"true":"false"),{dom:s,contentDOM:d,update:m=>{if(m.type.name!==aa)return!1;const v=m.attrs.language;return s.dataset.language=v,p.innerText=v||"--",u.setAttribute("data-fold",m.attrs.fold?"true":"false"),!0}}}}}),dC=Ge(()=>({id:"doc",schema:()=>({content:"block+",parseMarkdown:{match:({type:e})=>e==="root",runner:(e,t,n)=>{e.injectRoot(t,n)}},toMarkdown:{match:e=>e.type.name==="doc",runner:(e,t)=>{e.openNode("root"),e.next(t.content)}}})})),fs=ie(),mC=Ge(e=>({id:"hardbreak",schema:()=>({inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:t=>["br",{class:e.getClassName(t.attrs,"hardbreak")}],parseMarkdown:{match:({type:t})=>t==="break",runner:(t,n,r)=>{t.addNode(r)}},toMarkdown:{match:t=>t.type.name==="hardbreak",runner:t=>{t.addNode("break")}}}),commands:t=>[ne(fs,()=>(n,r)=>(r==null||r(n.tr.setMeta("hardbreak",!0).replaceSelectionWith(t.create()).scrollIntoView()),!0))],shortcuts:{[we.HardBreak]:ae(fs,"Shift-Enter")},prosePlugins:t=>[new _t({key:new Pt("hardbreak-marks"),appendTransaction:(n,r,i)=>{if(!n.length)return;const[o]=n,[a]=o.steps;if(o.getMeta("hardbreak")){if(!(a instanceof Ht))return;const{from:u}=a;return i.tr.setNodeMarkup(u,t,void 0,[])}if(a instanceof to){let u=i.tr;const{from:c,to:f}=a;return i.doc.nodesBetween(c,f,(h,p)=>{h.type===t&&(u=u.setNodeMarkup(p,t,void 0,[]))}),u}}})]})),Bc=Array(6).fill(0).map((e,t)=>t+1),Kt=ie(),gC=Ge((e,t)=>{const n="heading",r={1:ue`
            font-size: 3rem;
            line-height: 3.5rem;
        `,2:ue`
            font-size: 2.125rem;
            line-height: 2.25rem;
        `,3:ue`
            font-size: 1.5rem;
            line-height: 1.5rem;
        `},i=o=>(t==null?void 0:t.headless)?null:ue`
                  ${r[o]||""}
                  margin: 2.5rem 0 !important;
                  font-weight: 400;
              `;return{id:n,schema:()=>({content:"inline*",group:"block",defining:!0,attrs:{level:{default:1}},parseDOM:Bc.map(o=>({tag:`h${o}`,attrs:{level:o}})),toDOM:o=>[`h${o.attrs.level}`,{class:e.getClassName(o.attrs,`heading h${o.attrs.level}`,i(o.attrs.level))},0],parseMarkdown:{match:({type:o})=>o===n,runner:(o,a,s)=>{const l=a.depth;o.openNode(s,{level:l}),o.next(a.children),o.closeNode()}},toMarkdown:{match:o=>o.type.name===n,runner:(o,a)=>{o.openNode("heading",void 0,{depth:a.attrs.level}),o.next(a.content),o.closeNode()}}}),inputRules:o=>Bc.map(a=>Ea(new RegExp(`^(#{1,${a}})\\s$`),o,()=>({level:a}))),commands:o=>[ne(Kt,(a=1)=>Rs(o,{level:a}))],shortcuts:{[we.H1]:ae(Kt,"Mod-Alt-1",1),[we.H2]:ae(Kt,"Mod-Alt-2",2),[we.H3]:ae(Kt,"Mod-Alt-3",3),[we.H4]:ae(Kt,"Mod-Alt-4",4),[we.H5]:ae(Kt,"Mod-Alt-5",5),[we.H6]:ae(Kt,"Mod-Alt-6",6)}}}),sa="hr",ld=ie(),vC=Ge(e=>{const t=e.getStyle(n=>ue`
            height: ${n.size.lineWidth};
            background-color: ${n.palette("line")};
            border-width: 0;
        `);return{id:sa,schema:()=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:n=>["hr",{class:e.getClassName(n.attrs,sa,t)}],parseMarkdown:{match:({type:n})=>n==="thematicBreak",runner:(n,r,i)=>{n.addNode(i)}},toMarkdown:{match:n=>n.type.name===sa,runner:n=>{n.addNode("thematicBreak")}}}),inputRules:n=>[new Ue(/^(?:---|___\s|\*\*\*\s)$/,(r,i,o,a)=>{const{tr:s}=r;return i[0]&&s.replaceWith(o-1,a,n.create()),s})],commands:(n,r)=>[ne(ld,()=>(i,o)=>{if(!o)return!0;const{tr:a,selection:s}=i,l=s.from,u=n.create();if(!u)return!0;const c=a.replaceSelectionWith(u).insert(l,r.get(et).node("paragraph")),f=B.findFrom(c.doc.resolve(l),1,!0);return f&&o(c.setSelection(f).scrollIntoView()),!0})]}}),ud=ie(),cd=ie(),cr="image",yC=Ge((e,t)=>{var n,r;const i=Zt({loading:"Loading...",empty:"Add an Image",failed:"Image loads failed"},(n=t==null?void 0:t.placeholder)!=null?n:{}),o=(r=t==null?void 0:t.isBlock)!=null?r:!1,a=e.getStyle(l=>ue`
                display: inline-block;
                position: relative;
                text-align: center;
                font-size: 0;
                vertical-align: text-bottom;
                line-height: 1;

                ${o?`
                width: 100%;
                margin: 0 auto;
                `:""}

                &.ProseMirror-selectednode::after {
                    content: '';
                    background: ${l.palette("secondary",.38)};
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                }

                img {
                    max-width: 100%;
                    height: auto;
                    object-fit: contain;
                    margin: 0 2px;
                }
                .icon,
                .placeholder {
                    display: none;
                }

                &.system {
                    width: 100%;
                    padding: 0 2rem;

                    img {
                        width: 0;
                        height: 0;
                        display: none;
                    }

                    .icon,
                    .placeholder {
                        display: inline;
                    }

                    box-sizing: border-box;
                    height: 3rem;
                    background-color: ${l.palette("background")};
                    border-radius: ${l.size.radius};
                    display: inline-flex;
                    gap: 2rem;
                    justify-content: flex-start;
                    align-items: center;
                    .placeholder {
                        margin: 0;
                        line-height: 1;
                        &::before {
                            content: '';
                            font-size: 0.875rem;
                            color: ${l.palette("neutral",.6)};
                        }
                    }
                }

                &.loading {
                    .placeholder {
                        &::before {
                            content: '${i.loading}';
                        }
                    }
                }

                &.empty {
                    .placeholder {
                        &::before {
                            content: '${i.empty}';
                        }
                    }
                }

                &.failed {
                    .placeholder {
                        &::before {
                            content: '${i.failed}';
                        }
                    }
                }
            `),s=e.getStyle(()=>ue`
                display: inline-block;
                margin: 0 auto;
                object-fit: contain;
                width: 100%;
                position: relative;
                height: auto;
                text-align: center;
            `);return{id:"image",schema:()=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:""},alt:{default:null},title:{default:null},failed:{default:!1},loading:{default:!0},width:{default:null}},parseDOM:[{tag:"img[src]",getAttrs:l=>{if(!(l instanceof HTMLElement))throw new Error;return{failed:l.classList.contains("failed"),loading:l.classList.contains("loading"),src:l.getAttribute("src")||"",alt:l.getAttribute("alt"),title:l.getAttribute("title")||l.getAttribute("alt"),width:l.getAttribute("width")}}}],toDOM:l=>["img",vn(Zt({},l.attrs),{class:e.getClassName(l.attrs,cr,l.attrs.failed?"failed":"",l.attrs.loading?"loading":"",s)})],parseMarkdown:{match:({type:l})=>l===cr,runner:(l,u,c)=>{const f=u.url,h=u.alt,p=u.title;l.addNode(c,{src:f,alt:h,title:p})}},toMarkdown:{match:l=>l.type.name===cr,runner:(l,u)=>{l.addNode("image",void 0,void 0,{title:u.attrs.title,url:u.attrs.src,alt:u.attrs.alt})}}}),commands:l=>[ne(cd,(u="")=>(c,f)=>{if(!f)return!0;const{tr:h}=c,p=l.create({src:u});if(!p)return!0;const d=h.replaceSelectionWith(p);return f(d.scrollIntoView()),!0}),ne(ud,(u="")=>(c,f)=>{const h=$y(c.selection,l);if(!h)return!1;const{tr:p}=c;return f==null||f(p.setNodeMarkup(h.pos,void 0,vn(Zt({},h.node.attrs),{loading:!0,src:u})).scrollIntoView()),!0})],inputRules:l=>[new Ue(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(u,c,f,h)=>{const[p,d,m="",v]=c,{tr:g}=u;return p&&g.replaceWith(f,h,l.create({src:m,alt:d,title:v})),g})],view:l=>(u,c,f)=>{const h=u.type,p=l.get(Le).slots.icon,d=document.createElement("span");d.className=e.getClassName(u.attrs,cr,a);const m=document.createElement("img");d.append(m);let v=p("image");const g=document.createElement("span");g.classList.add("placeholder"),d.append(v,g);const y=P=>{const F=p(P);d.replaceChild(F,v),v=F},C=P=>{d.classList.add("system","loading"),y("loading");const F=document.createElement("img");F.src=P,F.onerror=()=>{const{tr:N}=c.state,_=N.setNodeMarkup(f(),h,vn(Zt({},u.attrs),{src:P,loading:!1,failed:!0}));c.dispatch(_)},F.onload=()=>{const{tr:N}=c.state,_=N.setNodeMarkup(f(),h,vn(Zt({},u.attrs),{width:F.width,src:P,loading:!1,failed:!1}));c.dispatch(_)}},{src:S,loading:O,title:w,alt:E,width:R}=u.attrs;return m.src=S,m.title=w||E,m.alt=E,R&&(m.width=R),S.length===0?(d.classList.add("system","empty"),y("image")):O&&C(S),{dom:d,update:P=>{if(P.type.name!==cr)return!1;const{src:F,alt:N,title:_,loading:L,failed:ee,width:j}=P.attrs;return m.src=F,m.alt=N,m.title=_||N,j&&(m.width=j),L?(C(F),!0):ee?(d.classList.remove("loading","empty"),d.classList.add("system","failed"),y("brokenImage"),!0):F.length>0?(d.classList.remove("system","empty","loading"),!0):(d.classList.add("system","empty"),y("image"),!0)},selectNode:()=>{d.classList.add("ProseMirror-selectednode")},deselectNode:()=>{d.classList.remove("ProseMirror-selectednode")}}}}}),Vc="list_item",hs=ie(),ps=ie(),ds=ie(),kC=Ge(e=>{const t=e.getStyle(n=>ue`
                &,
                & > * {
                    margin: 0.5rem 0;
                }

                &,
                li {
                    &::marker {
                        color: ${n.palette("primary")};
                    }
                }
            `);return{id:Vc,schema:()=>({group:"listItem",content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:n=>["li",{class:e.getClassName(n.attrs,"list-item",t)},0],parseMarkdown:{match:({type:n,checked:r})=>n==="listItem"&&r===null,runner:(n,r,i)=>{n.openNode(i),n.next(r.children),n.closeNode()}},toMarkdown:{match:n=>n.type.name===Vc,runner:(n,r)=>{n.openNode("listItem"),n.next(r.content),n.closeNode()}}}),inputRules:n=>[jr(/^\s*([-+*])\s$/,n)],commands:n=>[ne(hs,()=>Jh(n)),ne(ps,()=>Uh(n)),ne(ds,()=>Kh(n))],shortcuts:{[we.NextListItem]:ae(hs,"Enter"),[we.SinkListItem]:ae(ps,"Mod-]"),[we.LiftListItem]:ae(ds,"Mod-[")}}}),ms=ie(),$c="ordered_list",bC=Ge(e=>({id:$c,schema:()=>({content:"listItem+",group:"block",attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:t=>{if(!(t instanceof HTMLElement))throw new Error;return{order:t.hasAttribute("start")?Number(t.getAttribute("start")):1}}}],toDOM:t=>["ol",vn(Zt({},t.attrs.order===1?{}:t.attrs.order),{class:e.getClassName(t.attrs,"ordered-list")}),0],parseMarkdown:{match:({type:t,ordered:n})=>t==="list"&&!!n,runner:(t,n,r)=>{t.openNode(r).next(n.children).closeNode()}},toMarkdown:{match:t=>t.type.name===$c,runner:(t,n)=>{t.openNode("list",void 0,{ordered:!0,start:1}),t.next(n.content),t.closeNode()}}}),inputRules:t=>[jr(/^(\d+)\.\s$/,t,n=>({order:Number(n[1])}),(n,r)=>r.childCount+r.attrs.order===Number(n[1]))],commands:t=>[ne(ms,()=>ro(t))],shortcuts:{[we.OrderedList]:ae(ms,"Mod-Shift-7")}})),gs=ie(),Hc="paragraph",wC=Ge((e,t)=>{const n=(t==null?void 0:t.headless)?null:ue`
              font-size: 1rem;
              line-height: 1.5;
              letter-spacing: 0.5px;
          `;return{id:Hc,schema:()=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:r=>["p",{class:e.getClassName(r.attrs,Hc,n)},0],parseMarkdown:{match:r=>r.type==="paragraph",runner:(r,i,o)=>{r.openNode(o),i.children?r.next(i.children):r.addText(i.value),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="paragraph",runner:(r,i)=>{r.openNode("paragraph"),r.next(i.content),r.closeNode()}}}),commands:r=>[ne(gs,()=>Rs(r))],shortcuts:{[we.Text]:ae(gs,"Mod-Alt-0")}}}),CC=Ge(()=>({id:"text",schema:()=>({group:"inline",parseMarkdown:{match:({type:e})=>e==="text",runner:(e,t)=>{e.addText(t.value)}},toMarkdown:{match:e=>e.type.name==="text",runner:(e,t)=>{e.addNode("text",void 0,t.text)}}})})),xC=[dC(),wC(),mC(),lC(),pC(),uC(),bC(),kC(),gC(),vC(),yC(),CC()],SC=e=>!!e.children,MC=e=>e.type==="html";function OC(e,t){return n(e,0,null)[0];function n(r,i,o){if(SC(r)){const a=[];for(let s=0,l=r.children.length;s<l;s++){const u=n(r.children[s],s,r);if(u)for(let c=0,f=u.length;c<f;c++)a.push(u[c])}r.children=a}return t(r,i,o)}}const AC=()=>{function e(t){OC(t,n=>MC(n)?[]:[n])}return e},EC=[Co(()=>({remarkPlugins:()=>[Zw,AC]}))()],TC=er.create([...xC,...sC]),fd=er.create([...EC,...TC]),NC={ToggleInlineCode:is,ToggleItalic:as,ToggleLink:ad,ToggleBold:ss,ModifyLink:sd,ModifyImage:ud,WrapInBlockquote:ls,WrapInBulletList:us,WrapInOrderedList:ms,TurnIntoCodeFence:cs,TurnIntoHeading:Kt,TurnIntoText:gs,InsertHardbreak:fs,InsertHr:ld,InsertImage:cd,SplitListItem:hs,SinkListItem:ps,LiftListItem:ds},vs=X({},"listener"),IC=e=>(e.inject(vs),async t=>{await t.wait(Ui);const n=t.get(vs),r=t.get(Ga),i=new _t({state:{init:()=>{},apply:o=>{var a,s;!o.docChanged||((a=n.markdown)==null||a.forEach(l=>{l(()=>r(o.doc))}),(s=n.doc)==null||s.forEach(l=>{l(o.doc)}))}}});t.update(Lr,o=>o.concat(i))}),DC={tokenize:zC,partial:!0},hd={tokenize:LC,partial:!0},pd={tokenize:BC,partial:!0},Vn={tokenize:$C,partial:!0},dd={tokenize:VC,partial:!0},md={tokenize:RC,previous:yd},gd={tokenize:FC,previous:Ml},jt={tokenize:PC,previous:kd},Ft={},_C={text:Ft};let dn=48;for(;dn<123;)Ft[dn]=jt,dn++,dn===58?dn=65:dn===91&&(dn=97);Ft[43]=jt;Ft[45]=jt;Ft[46]=jt;Ft[95]=jt;Ft[72]=[jt,gd];Ft[104]=[jt,gd];Ft[87]=[jt,md];Ft[119]=[jt,md];function PC(e,t,n){const r=this;let i,o;return a;function a(p){return!Wc(p)||!kd(r.previous)||Ol(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(p))}function s(p){return Wc(p)?(e.consume(p),s):p===64?(e.consume(p),l):n(p)}function l(p){return p===46?e.check(Vn,h,u)(p):p===45||p===95?e.check(Vn,n,c)(p):Ze(p)?(!o&&Wi(p)&&(o=!0),e.consume(p),l):h(p)}function u(p){return e.consume(p),i=!0,o=void 0,l}function c(p){return e.consume(p),f}function f(p){return p===46?e.check(Vn,n,u)(p):l(p)}function h(p){return i&&!o?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function RC(e,t,n){const r=this;return i;function i(a){return a!==87&&a!==119||!yd(r.previous)||Ol(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(DC,e.attempt(hd,e.attempt(pd,o),n),n)(a))}function o(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function FC(e,t,n){const r=this;return i;function i(d){return d!==72&&d!==104||!Ml(r.previous)||Ol(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(d),o)}function o(d){return d===84||d===116?(e.consume(d),a):n(d)}function a(d){return d===84||d===116?(e.consume(d),s):n(d)}function s(d){return d===80||d===112?(e.consume(d),l):n(d)}function l(d){return d===83||d===115?(e.consume(d),u):u(d)}function u(d){return d===58?(e.consume(d),c):n(d)}function c(d){return d===47?(e.consume(d),f):n(d)}function f(d){return d===47?(e.consume(d),h):n(d)}function h(d){return d===null||_r(d)||co(d)||fo(d)?n(d):e.attempt(hd,e.attempt(pd,p),n)(d)}function p(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function zC(e,t,n){return r;function r(l){return e.consume(l),i}function i(l){return l===87||l===119?(e.consume(l),o):n(l)}function o(l){return l===87||l===119?(e.consume(l),a):n(l)}function a(l){return l===46?(e.consume(l),s):n(l)}function s(l){return l===null||z(l)?n(l):t(l)}}function LC(e,t,n){let r,i;return o;function o(l){return l===38?e.check(dd,s,a)(l):l===46||l===95?e.check(Vn,s,a)(l):l===null||_r(l)||co(l)||l!==45&&fo(l)?s(l):(e.consume(l),o)}function a(l){return l===46?(i=r,r=void 0,e.consume(l),o):(l===95&&(r=!0),e.consume(l),o)}function s(l){return!i&&!r?t(l):n(l)}}function BC(e,t){let n=0;return r;function r(a){return a===38?e.check(dd,t,i)(a):(a===40&&n++,a===41?e.check(Vn,o,i)(a):Sl(a)?t(a):vd(a)?e.check(Vn,t,i)(a):(e.consume(a),r))}function i(a){return e.consume(a),r}function o(a){return n--,n<0?t(a):i(a)}}function VC(e,t,n){return r;function r(a){return e.consume(a),i}function i(a){return lt(a)?(e.consume(a),i):a===59?(e.consume(a),o):n(a)}function o(a){return Sl(a)?t(a):n(a)}}function $C(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return vd(o)?(e.consume(o),i):Sl(o)?t(o):n(o)}}function vd(e){return e===33||e===34||e===39||e===41||e===42||e===44||e===46||e===58||e===59||e===60||e===63||e===95||e===126}function Sl(e){return e===null||e===60||ve(e)}function Wc(e){return e===43||e===45||e===46||e===95||Ze(e)}function yd(e){return e===null||e===40||e===42||e===95||e===126||ve(e)}function Ml(e){return e===null||!lt(e)}function kd(e){return e!==47&&Ml(e)}function Ol(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const HC={tokenize:QC,partial:!0};function WC(){return{document:{[91]:{tokenize:KC,continuation:{tokenize:UC},exit:GC}},text:{[91]:{tokenize:JC},[93]:{add:"after",tokenize:jC,resolveTo:qC}}}}function jC(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){a=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return s;function s(l){if(!a||!a._balanced)return n(l);const u=kt(r.sliceSerialize({start:a.end,end:r.now()}));return u.charCodeAt(0)!==94||!o.includes(u.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function qC(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},s=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...s),e}function JC(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,a;return s;function s(h){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(e.enter("gfmFootnoteCallMarker"),e.consume(h),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(h){let p;return h===null||h===91||o++>999?n(h):h===93?a?(e.exit("chunkString"),p=e.exit("gfmFootnoteCallString"),i.includes(kt(r.sliceSerialize(p)))?f(h):n(h)):n(h):(e.consume(h),ve(h)||(a=!0),h===92?c:u)}function c(h){return h===91||h===92||h===93?(e.consume(h),o++,u):u(h)}function f(h){return e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t}}function KC(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,a=0,s;return l;function l(m){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(m){return m===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),c):n(m)}function c(m){let v;return m===null||m===91||a>999?n(m):m===93?s?(v=e.exit("gfmFootnoteDefinitionLabelString"),o=kt(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),p):n(m):z(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),a++,c):(e.enter("chunkString").contentType="string",f(m))}function f(m){return m===null||z(m)||m===91||m===93||a>999?(e.exit("chunkString"),c(m)):(ve(m)||(s=!0),a++,e.consume(m),m===92?h:f)}function h(m){return m===91||m===92||m===93?(e.consume(m),a++,f):f(m)}function p(m){return m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),K(e,d,"gfmFootnoteDefinitionWhitespace")):n(m)}function d(m){return i.includes(o)||i.push(o),t(m)}}function UC(e,t,n){return e.check(Kr,t,e.attempt(HC,t,n))}function GC(e){e.exit("gfmFootnoteDefinition")}function QC(e,t,n){const r=this;return K(e,i,"gfmFootnoteDefinitionIndent",4+1);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(o):n(o)}}function ZC(e={}){let t=e.singleTilde;const n={tokenize:i,resolveAll:r};return t==null&&(t=!0),{text:{[126]:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(o,a){let s=-1;for(;++s<o.length;)if(o[s][0]==="enter"&&o[s][1].type==="strikethroughSequenceTemporary"&&o[s][1]._close){let l=s;for(;l--;)if(o[l][0]==="exit"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._open&&o[s][1].end.offset-o[s][1].start.offset===o[l][1].end.offset-o[l][1].start.offset){o[s][1].type="strikethroughSequence",o[l][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[l][1].start),end:Object.assign({},o[s][1].end)},c={type:"strikethroughText",start:Object.assign({},o[l][1].end),end:Object.assign({},o[s][1].start)},f=[["enter",u,a],["enter",o[l][1],a],["exit",o[l][1],a],["enter",c,a]];Ye(f,f.length,0,ho(a.parser.constructs.insideSpan.null,o.slice(l+1,s),a)),Ye(f,f.length,0,[["exit",c,a],["enter",o[s][1],a],["exit",o[s][1],a],["exit",u,a]]),Ye(o,l-1,s-l+3,f),s=l+f.length-2;break}}for(s=-1;++s<o.length;)o[s][1].type==="strikethroughSequenceTemporary"&&(o[s][1].type="data");return o}function i(o,a,s){const l=this.previous,u=this.events;let c=0;return f;function f(p){return l===126&&u[u.length-1][1].type!=="characterEscape"?s(p):(o.enter("strikethroughSequenceTemporary"),h(p))}function h(p){const d=ji(l);if(p===126)return c>1?s(p):(o.consume(p),c++,h);if(c<2&&!t)return s(p);const m=o.exit("strikethroughSequenceTemporary"),v=ji(p);return m._open=!v||v===2&&Boolean(d),m._close=!d||d===2&&Boolean(v),a(p)}}}const YC={flow:{null:{tokenize:ex,resolve:XC}}},jc={tokenize:tx,partial:!0};function XC(e,t){let n=-1,r,i,o,a,s,l,u;for(;++n<e.length;){const c=e[n][1];if(o&&(c.type==="temporaryTableCellContent"&&(a=a||n,s=n),(c.type==="tableCellDivider"||c.type==="tableRow")&&s)){const f={type:"tableContent",start:e[a][1].start,end:e[s][1].end},h={type:"chunkText",start:f.start,end:f.end,contentType:"text"};e.splice(a,s-a+1,["enter",f,t],["enter",h,t],["exit",h,t],["exit",f,t]),n-=s-a-3,a=void 0,s=void 0}if(e[n][0]==="exit"&&l!==void 0&&l+(u?0:1)<n&&(c.type==="tableCellDivider"||c.type==="tableRow"&&(l+3<n||e[l][1].type!=="whitespace"))){const f={type:i?"tableDelimiter":r?"tableHeader":"tableData",start:e[l][1].start,end:e[n][1].end};e.splice(n+(c.type==="tableCellDivider"?1:0),0,["exit",f,t]),e.splice(l,0,["enter",f,t]),n+=2,l=n+1,u=!0}c.type==="tableRow"&&(o=e[n][0]==="enter",o&&(l=n+1,u=!1)),c.type==="tableDelimiterRow"&&(i=e[n][0]==="enter",i&&(l=n+1,u=!1)),c.type==="tableHead"&&(r=e[n][0]==="enter")}return e}function ex(e,t,n){const r=this,i=[];let o=0,a,s;return l;function l(x){return e.enter("table")._align=i,e.enter("tableHead"),e.enter("tableRow"),x===124?u(x):(o++,e.enter("temporaryTableCellContent"),h(x))}function u(x){return e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),a=!0,c}function c(x){return x===null||z(x)?d(x):te(x)?(e.enter("whitespace"),e.consume(x),f):(a&&(a=void 0,o++),x===124?u(x):(e.enter("temporaryTableCellContent"),h(x)))}function f(x){return te(x)?(e.consume(x),f):(e.exit("whitespace"),c(x))}function h(x){return x===null||x===124||ve(x)?(e.exit("temporaryTableCellContent"),c(x)):(e.consume(x),x===92?p:h)}function p(x){return x===92||x===124?(e.consume(x),h):h(x)}function d(x){if(x===null)return n(x);e.exit("tableRow"),e.exit("tableHead");const me=r.interrupt;return r.interrupt=!0,e.attempt({tokenize:j,partial:!0},function(oe){return r.interrupt=me,e.enter("tableDelimiterRow"),m(oe)},function(oe){return r.interrupt=me,n(oe)})(x)}function m(x){return x===null||z(x)?S(x):te(x)?(e.enter("whitespace"),e.consume(x),v):x===45?(e.enter("tableDelimiterFiller"),e.consume(x),s=!0,i.push("none"),g):x===58?(e.enter("tableDelimiterAlignment"),e.consume(x),e.exit("tableDelimiterAlignment"),i.push("left"),y):x===124?(e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),m):n(x)}function v(x){return te(x)?(e.consume(x),v):(e.exit("whitespace"),m(x))}function g(x){return x===45?(e.consume(x),g):(e.exit("tableDelimiterFiller"),x===58?(e.enter("tableDelimiterAlignment"),e.consume(x),e.exit("tableDelimiterAlignment"),i[i.length-1]=i[i.length-1]==="left"?"center":"right",C):m(x))}function y(x){return x===45?(e.enter("tableDelimiterFiller"),e.consume(x),s=!0,g):n(x)}function C(x){return x===null||z(x)?S(x):te(x)?(e.enter("whitespace"),e.consume(x),v):x===124?(e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),m):n(x)}function S(x){return e.exit("tableDelimiterRow"),!s||o!==i.length?n(x):x===null?O(x):e.check(jc,O,e.attempt({tokenize:j,partial:!0},K(e,w,"linePrefix",4),O))(x)}function O(x){return e.exit("table"),t(x)}function w(x){return e.enter("tableBody"),E(x)}function E(x){return e.enter("tableRow"),x===124?R(x):(e.enter("temporaryTableCellContent"),N(x))}function R(x){return e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),P}function P(x){return x===null||z(x)?L(x):te(x)?(e.enter("whitespace"),e.consume(x),F):x===124?R(x):(e.enter("temporaryTableCellContent"),N(x))}function F(x){return te(x)?(e.consume(x),F):(e.exit("whitespace"),P(x))}function N(x){return x===null||x===124||ve(x)?(e.exit("temporaryTableCellContent"),P(x)):(e.consume(x),x===92?_:N)}function _(x){return x===92||x===124?(e.consume(x),N):N(x)}function L(x){return e.exit("tableRow"),x===null?ee(x):e.check(jc,ee,e.attempt({tokenize:j,partial:!0},K(e,E,"linePrefix",4),ee))(x)}function ee(x){return e.exit("tableBody"),O(x)}function j(x,me,oe){return Ne;function Ne(k){return x.enter("lineEnding"),x.consume(k),x.exit("lineEnding"),K(x,pe,"linePrefix")}function pe(k){if(r.parser.lazy[r.now().line]||k===null||z(k))return oe(k);const b=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&b&&b[1].type==="linePrefix"&&b[2].sliceSerialize(b[1],!0).length>=4?oe(k):(r._gfmTableDynamicInterruptHack=!0,x.check(r.parser.constructs.flow,function(wt){return r._gfmTableDynamicInterruptHack=!1,oe(wt)},function(wt){return r._gfmTableDynamicInterruptHack=!1,me(wt)})(k))}}}function tx(e,t,n){let r=0;return i;function i(a){return e.enter("check"),e.consume(a),o}function o(a){return a===-1||a===32?(e.consume(a),r++,r===4?t:o):a===null||ve(a)?t(a):n(a)}}const nx={tokenize:ix},rx={text:{[91]:nx}};function ix(e,t,n){const r=this;return i;function i(s){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(s):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(s),e.exit("taskListCheckMarker"),o)}function o(s){return ve(s)?(e.enter("taskListCheckValueUnchecked"),e.consume(s),e.exit("taskListCheckValueUnchecked"),a):s===88||s===120?(e.enter("taskListCheckValueChecked"),e.consume(s),e.exit("taskListCheckValueChecked"),a):n(s)}function a(s){return s===93?(e.enter("taskListCheckMarker"),e.consume(s),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:ox},t,n)):n(s)}}function ox(e,t,n){const r=this;return K(e,i,"whitespace");function i(o){const a=r.events[r.events.length-1];return(a&&a[1].type==="whitespace"||z(o))&&o!==null?t(o):n(o)}}function ax(e){return ap([_C,WC(),ZC(e),YC,rx])}function qc(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function sx(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const lx={}.hasOwnProperty,ux=function(e,t,n,r){let i,o;typeof t=="string"||t instanceof RegExp?(o=[[t,n]],i=r):(o=t,i=n),i||(i={});const a=mo(i.ignore||[]),s=cx(o);let l=-1;for(;++l<s.length;)od(e,"text",u);return e;function u(f,h){let p=-1,d;for(;++p<h.length;){const m=h[p];if(a(m,d?d.children.indexOf(m):void 0,d))return;d=m}if(d)return c(f,d)}function c(f,h){const p=s[l][0],d=s[l][1];let m=0,v=h.children.indexOf(f),g=[],y;p.lastIndex=0;let C=p.exec(f.value);for(;C;){y=C.index;let S=d(...C,{index:C.index,input:C.input});if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S!==!1&&(m!==y&&g.push({type:"text",value:f.value.slice(m,y)}),Array.isArray(S)?g.push(...S):S&&g.push(S),m=y+C[0].length),!p.global)break;C=p.exec(f.value)}return y===void 0?(g=[f],v--):(m<f.value.length&&g.push({type:"text",value:f.value.slice(m)}),h.children.splice(v,1,...g)),v+g.length+1}};function cx(e){const t=[];if(typeof e!="object")throw new TypeError("Expected array or object as schema");if(Array.isArray(e)){let n=-1;for(;++n<e.length;)t.push([Jc(e[n][0]),Kc(e[n][1])])}else{let n;for(n in e)lx.call(e,n)&&t.push([Jc(n),Kc(e[n])])}return t}function Jc(e){return typeof e=="string"?new RegExp(sx(e),"g"):e}function Kc(e){return typeof e=="function"?e:()=>e}const la="phrasing",ua=["autolink","link","image","label"],fx={transforms:[yx],enter:{literalAutolink:px,literalAutolinkEmail:ca,literalAutolinkHttp:ca,literalAutolinkWww:ca},exit:{literalAutolink:vx,literalAutolinkEmail:gx,literalAutolinkHttp:dx,literalAutolinkWww:mx}},hx={unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:la,notInConstruct:ua},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:la,notInConstruct:ua},{character:":",before:"[ps]",after:"\\/",inConstruct:la,notInConstruct:ua}]};function px(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function ca(e){this.config.enter.autolinkProtocol.call(this,e)}function dx(e){this.config.exit.autolinkProtocol.call(this,e)}function mx(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.url="http://"+this.sliceSerialize(e)}function gx(e){this.config.exit.autolinkEmail.call(this,e)}function vx(e){this.exit(e)}function yx(e){ux(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,kx],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,bx]],{ignore:["link","linkReference"]})}function kx(e,t,n,r,i){let o="";if(!bd(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!wx(n)))return!1;const a=Cx(n+r);if(!a[0])return!1;const s={type:"link",title:null,url:o+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[s,{type:"text",value:a[1]}]:s}function bx(e,t,n,r){return!bd(r,!0)||/[_-\d]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function wx(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Cx(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);let n,r,i,o;if(t)for(e=e.slice(0,t.index),o=t[0],n=o.indexOf(")"),r=qc(e,"("),i=qc(e,")");n!==-1&&r>i;)e+=o.slice(0,n+1),o=o.slice(n+1),n=o.indexOf(")"),i++;return[e,o]}function bd(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||co(n)||fo(n))&&(!t||n!==47)}function xx(){return{enter:{gfmFootnoteDefinition:e,gfmFootnoteDefinitionLabelString:t,gfmFootnoteCall:i,gfmFootnoteCallString:o},exit:{gfmFootnoteDefinition:r,gfmFootnoteDefinitionLabelString:n,gfmFootnoteCall:s,gfmFootnoteCallString:a}};function e(l){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},l)}function t(){this.buffer()}function n(l){const u=this.resume(),c=this.stack[this.stack.length-1];c.label=u,c.identifier=kt(this.sliceSerialize(l)).toLowerCase()}function r(l){this.exit(l)}function i(l){this.enter({type:"footnoteReference",identifier:"",label:""},l)}function o(){this.buffer()}function a(l){const u=this.resume(),c=this.stack[this.stack.length-1];c.label=u,c.identifier=kt(this.sliceSerialize(l)).toLowerCase()}function s(l){this.exit(l)}}function Sx(){return e.peek=t,{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:n,footnoteReference:e}};function e(r,i,o,a){const s=xe(a);let l=s.move("[^");const u=o.enter("footnoteReference"),c=o.enter("reference");return l+=s.move(Ce(o,Pr(r),cn(J({},s.current()),{before:l,after:"]"}))),c(),u(),l+=s.move("]"),l}function t(){return"["}function n(r,i,o,a){const s=xe(a);let l=s.move("[^");const u=o.enter("footnoteDefinition"),c=o.enter("label");return l+=s.move(Ce(o,Pr(r),cn(J({},s.current()),{before:l,after:"]"}))),c(),l+=s.move("]:"+(r.children&&r.children.length>0?" ":"")),s.shift(4),l+=s.move(po(Ur(r,o,s.current()),f)),u(),l;function f(h,p,d){return p?(d?"":"    ")+h:h}}}const Mx={canContainEols:["delete"],enter:{strikethrough:Ax},exit:{strikethrough:Ex}},Ox={unsafe:[{character:"~",inConstruct:"phrasing"}],handlers:{delete:wd}};wd.peek=Tx;function Ax(e){this.enter({type:"delete",children:[]},e)}function Ex(e){this.exit(e)}function wd(e,t,n,r){const i=xe(r),o=n.enter("emphasis");let a=i.move("~~");return a+=Dt(e,n,cn(J({},i.current()),{before:a,after:"~"})),a+=i.move("~~"),o(),a}function Tx(){return"~"}function Nx(e,t={}){const n=(t.align||[]).concat(),r=t.stringLength||Dx,i=[],o=[],a=[],s=[];let l=0,u=-1;for(;++u<e.length;){const d=[],m=[];let v=-1;for(e[u].length>l&&(l=e[u].length);++v<e[u].length;){const g=Ix(e[u][v]);if(t.alignDelimiters!==!1){const y=r(g);m[v]=y,(s[v]===void 0||y>s[v])&&(s[v]=y)}d.push(g)}o[u]=d,a[u]=m}let c=-1;if(typeof n=="object"&&"length"in n)for(;++c<l;)i[c]=Uc(n[c]);else{const d=Uc(n);for(;++c<l;)i[c]=d}c=-1;const f=[],h=[];for(;++c<l;){const d=i[c];let m="",v="";d===99?(m=":",v=":"):d===108?m=":":d===114&&(v=":");let g=t.alignDelimiters===!1?1:Math.max(1,s[c]-m.length-v.length);const y=m+"-".repeat(g)+v;t.alignDelimiters!==!1&&(g=m.length+g+v.length,g>s[c]&&(s[c]=g),h[c]=g),f[c]=y}o.splice(1,0,f),a.splice(1,0,h),u=-1;const p=[];for(;++u<o.length;){const d=o[u],m=a[u];c=-1;const v=[];for(;++c<l;){const g=d[c]||"";let y="",C="";if(t.alignDelimiters!==!1){const S=s[c]-(m[c]||0),O=i[c];O===114?y=" ".repeat(S):O===99?S%2?(y=" ".repeat(S/2+.5),C=" ".repeat(S/2-.5)):(y=" ".repeat(S/2),C=y):C=" ".repeat(S)}t.delimiterStart!==!1&&!c&&v.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&g==="")&&(t.delimiterStart!==!1||c)&&v.push(" "),t.alignDelimiters!==!1&&v.push(y),v.push(g),t.alignDelimiters!==!1&&v.push(C),t.padding!==!1&&v.push(" "),(t.delimiterEnd!==!1||c!==l-1)&&v.push("|")}p.push(t.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return p.join(`
`)}function Ix(e){return e==null?"":String(e)}function Dx(e){return e.length}function Uc(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const _x={enter:{table:Px,tableData:Gc,tableHeader:Gc,tableRow:Fx},exit:{codeText:zx,table:Rx,tableData:fa,tableHeader:fa,tableRow:fa}};function Px(e){const t=e._align;this.enter({type:"table",align:t.map(n=>n==="none"?null:n),children:[]},e),this.setData("inTable",!0)}function Rx(e){this.exit(e),this.setData("inTable")}function Fx(e){this.enter({type:"tableRow",children:[]},e)}function fa(e){this.exit(e)}function Gc(e){this.enter({type:"tableCell",children:[]},e)}function zx(e){let t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,Lx));const n=this.stack[this.stack.length-1];n.value=t,this.exit(e)}function Lx(e,t){return t==="|"?t:e}function Bx(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:a,tableRow:s,tableCell:l,inlineCode:h}};function a(p,d,m,v){return u(c(p,m,v),p.align)}function s(p,d,m,v){const g=f(p,m,v),y=u([g]);return y.slice(0,y.indexOf(`
`))}function l(p,d,m,v){const g=m.enter("tableCell"),y=m.enter("phrasing"),C=Dt(p,m,cn(J({},v),{before:o,after:o}));return y(),g(),C}function u(p,d){return Nx(p,{align:d,alignDelimiters:r,padding:n,stringLength:i})}function c(p,d,m){const v=p.children;let g=-1;const y=[],C=d.enter("table");for(;++g<v.length;)y[g]=f(v[g],d,m);return C(),y}function f(p,d,m){const v=p.children;let g=-1;const y=[],C=d.enter("tableRow");for(;++g<v.length;)y[g]=l(v[g],p,d,m);return C(),y}function h(p,d,m){let v=al(p,d,m);return m.stack.includes("tableCell")&&(v=v.replace(/\|/g,"\\$&")),v}}const Vx={exit:{taskListCheckValueChecked:Qc,taskListCheckValueUnchecked:Qc,paragraph:Hx}},$x={unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Wx}};function Qc(e){const t=this.stack[this.stack.length-2];t.checked=e.type==="taskListCheckValueChecked"}function Hx(e){const t=this.stack[this.stack.length-2],n=this.stack[this.stack.length-1],r=t.children,i=n.children[0];let o=-1,a;if(t&&t.type==="listItem"&&typeof t.checked=="boolean"&&i&&i.type==="text"){for(;++o<r.length;){const s=r[o];if(s.type==="paragraph"){a=s;break}}a===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}this.exit(e)}function Wx(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",s=xe(r);o&&s.move(a);let l=Dp(e,t,n,J(J({},r),s.current()));return o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+a}}function jx(){return[fx,xx(),Mx,_x,Vx]}function qx(e){return{extensions:[hx,Sx(),Ox,Bx(e),$x]}}function Jx(e={}){const t=this.data();n("micromarkExtensions",ax(e)),n("fromMarkdownExtensions",jx()),n("toMarkdownExtensions",qx(e));function n(r,i){(t[r]?t[r]:t[r]=[]).push(i)}}var Kx=Object.defineProperty,Ux=Object.defineProperties,Gx=Object.getOwnPropertyDescriptors,Zc=Object.getOwnPropertySymbols,Qx=Object.prototype.hasOwnProperty,Zx=Object.prototype.propertyIsEnumerable,Yc=(e,t,n)=>t in e?Kx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dn=(e,t)=>{for(var n in t||(t={}))Qx.call(t,n)&&Yc(e,n,t[n]);if(Zc)for(var n of Zc(t))Zx.call(t,n)&&Yc(e,n,t[n]);return e},_n=(e,t)=>Ux(e,Gx(t));const Yx=e=>(t,n)=>{if(!ht(t))return!1;const{$head:r}=t.selection,i=r.after(),o=t.tr.replaceWith(i,i,e.createAndFill());return o.setSelection(B.near(o.doc.resolve(i),1)),n==null||n(o.scrollIntoView()),!0},xo=e=>Vy(t=>t.type.spec.tableRole==="table")(e),Xx=e=>t=>{const n=xo(t);if(!n)return;const r=q.get(n.node);if(!(e<0||e>=r.width))return r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height}).map(i=>{const o=n.node.nodeAt(i);if(!o)throw new Error;const a=i+n.start;return{pos:a,start:a+1,node:o}})},eS=e=>t=>{const n=xo(t);if(!n)return;const r=q.get(n.node);if(!(e<0||e>=r.height))return r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1}).map(i=>{const o=n.node.nodeAt(i);if(!o)throw new Error;const a=i+n.start;return{pos:a,start:a+1,node:o}})},Xc=(e,t=3,n=3)=>{const{cell:r,header_cell:i,row:o,table:a}=Je(e),s=Array(n).fill(0).map(()=>r.createAndFill(null)),l=Array(n).fill(0).map(()=>i.createAndFill(null)),u=Array(t).fill(0).map((c,f)=>o.create(null,f===0?l:s));return a.create(null,u)},ef=e=>t=>n=>{const r=xo(n.selection),i=e==="row";if(r){const o=q.get(r.node);if(t>=0&&t<(i?o.height:o.width)){const a=o.positionAt(i?t:o.height-1,i?o.width-1:t,r.node),s=n.doc.resolve(r.start+a),l=i?fe.rowSelection:fe.colSelection,u=o.positionAt(i?t:0,i?0:t,r.node),c=n.doc.resolve(r.start+u);return ep(n.setSelection(l(s,c)))}}return n},tS=e=>{const t=xo(e);if(!t)return;const n=q.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map(i=>{const o=t.node.nodeAt(i),a=i+t.start;return{pos:a,start:a+1,node:o}})},nS=e=>{const t=tS(e.selection);if(t){const n=e.doc.resolve(t[0].pos),r=e.doc.resolve(t[t.length-1].pos);return ep(e.setSelection(new fe(r,n)))}return e};function tf(e,{map:t,tableStart:n,table:r},i){const o=Array(i).fill(0).reduce((u,c,f)=>u+r.child(f).nodeSize,n),{cell:a,row:s}=Je(r.type.schema),l=Array(t.width).fill(0).map((u,c)=>{const f=r.nodeAt(t.map[c]);return a.createAndFill({alignment:f==null?void 0:f.attrs.alignment})});return e.insert(o,s.create(null,l)),e}const St=e=>e.state.selection,rS=e=>{const t=q.get(e.$anchorCell.node(-1)),n=e.$anchorCell.start(-1),r=t.cellsInRect({left:0,right:t.width,top:0,bottom:1}),i=t.cellsInRect(t.rectBetween(e.$anchorCell.pos-n,e.$headCell.pos-n));for(let o=0,a=r.length;o<a;o++)if(i.indexOf(r[o])===-1)return!1;return!0},iS=(e,t)=>{Object.values(e).forEach(n=>{var r;if((r=n.disable)==null?void 0:r.call(n,t)){n.$.classList.add("hide");return}n.$.classList.remove("hide")})};var nf;(function(e){e[e.AddColLeft=0]="AddColLeft",e[e.AddColRight=1]="AddColRight",e[e.AddRowTop=2]="AddRowTop",e[e.AddRowBottom=3]="AddRowBottom",e[e.AlignLeft=4]="AlignLeft",e[e.AlignCenter=5]="AlignCenter",e[e.AlignRight=6]="AlignRight",e[e.Delete=7]="Delete"})(nf||(nf={}));const oS=e=>({[0]:{$:e.get(Le).slots.icon("leftArrow"),command:()=>dy,disable:t=>!St(t).isColSelection()},[1]:{$:e.get(Le).slots.icon("rightArrow"),command:()=>my,disable:t=>!St(t).isColSelection()},[2]:{$:e.get(Le).slots.icon("upArrow"),command:()=>(t,n)=>{if(!ht(t))return!1;if(n){const r=nn(t);n(tf(t.tr,r,r.top))}return!0},disable:t=>!St(t).isRowSelection()||St(t).$head.parent.type.name==="table_header"},[3]:{$:e.get(Le).slots.icon("downArrow"),command:()=>(t,n)=>{if(!ht(t))return!1;if(n){const r=nn(t);n(tf(t.tr,r,r.bottom))}return!0},disable:t=>!St(t).isRowSelection()},[4]:{$:e.get(Le).slots.icon("alignLeft"),command:()=>qo("alignment","left"),disable:t=>!St(t).isColSelection()},[5]:{$:e.get(Le).slots.icon("alignCenter"),command:()=>qo("alignment","center"),disable:t=>!St(t).isColSelection()},[6]:{$:e.get(Le).slots.icon("alignRight"),command:()=>qo("alignment","right"),disable:t=>!St(t).isColSelection()},[7]:{$:e.get(Le).slots.icon("delete"),command:(t,n)=>{const r=St(n),i=r.isColSelection(),o=r.isRowSelection();return i&&o?Cy:i?vy:ky},disable:t=>{const n=St(t);return n.isRowSelection()?n.isColSelection()?!1:rS(n):!1}}}),aS=(e,t)=>{const{selection:n}=e.state,r=n.isColSelection(),i=n.isRowSelection();zy(e,t,(o,a,s)=>{const l=t.parentElement;if(!l)throw new Error;let u=i?o.left-s.left-a.width/2-8:o.left-s.left+(o.width-a.width)/2;const c=o.top-s.top-a.height-(r?14:0)-14+l.scrollTop;return u<0&&(u=0),[c,u]})};var ut;(function(e){e.Left="Left",e.Top="Top",e.Point="Point"})(ut||(ut={}));const sS=({size:e,mixin:t,palette:n})=>{var r,i;return ue`
    display: inline-flex;
    cursor: pointer;
    z-index: 2;

    justify-content: space-evenly;

    position: absolute;

    border-radius: ${e.radius};

    ${(r=t.border)==null?void 0:r.call(t)};

    ${(i=t.shadow)==null?void 0:i.call(t)};

    overflow: hidden;
    background: ${n("surface")};

    .icon {
        position: relative;
        color: ${n("solid",.87)};

        width: 3rem;
        line-height: 3rem;
        text-align: center;
        transition: all 0.4s ease-in-out;
        &:hover {
            background-color: ${n("secondary",.12)};
        }
        &.active {
            color: ${n("primary")};
        }
        &:not(:last-child)::after {
            content: '';
            position: absolute;
            right: 0px;
            top: 0;
            width: ${e.lineWidth};
            bottom: 0;
            background: ${n("line")};
        }
    }
    &.hide,
    .hide {
        display: none;
    }
`},lS=e=>{switch(e){case ut.Left:return"milkdown-cell-left";case ut.Top:return"milkdown-cell-top";case ut.Point:default:return"milkdown-cell-point"}};function ha(e,t,n,r=0){return ye.widget(t.pos+1,o=>{const a=document.createElement("div");return a.classList.add(lS(n)),n===ut.Point&&a.appendChild(e.get(Le).slots.icon("select")),a.addEventListener("mousedown",s=>{if(!!o)switch(s.preventDefault(),n){case ut.Point:{o.dispatch(nS(o.state.tr));return}case ut.Left:{o.dispatch(ef("row")(r)(o.state.tr));return}case ut.Top:{o.dispatch(ef("col")(r)(o.state.tr));return}}}),a})}const uS=(e,t)=>{const n=oS(e),r=document.createElement("div"),i=t.getStyle(sS);return i&&r.classList.add(i),r.classList.add("table-tooltip","hide"),new _t({key:new Pt("MILKDOWN_TABLE_OP"),props:{decorations:o=>{const a=[],s=Xx(0)(o.selection);if(!s)return null;const l=eS(0)(o.selection);if(!l)return null;const[u]=s;return a.push(ha(e,u,ut.Point)),s.forEach((c,f)=>{a.push(ha(e,c,ut.Left,f))}),l.forEach((c,f)=>{a.push(ha(e,c,ut.Top,f))}),Z.create(o.doc,a)}},view:o=>{var a;Object.values(n).forEach(({$:u})=>r.appendChild(u)),(a=o.dom.parentNode)==null||a.appendChild(r);const s=u=>{!o||(u.stopPropagation(),u.preventDefault(),Object.values(n).forEach(({$:c,command:f})=>{c.contains(u.target)&&f(u,o)(o.state,o.dispatch,o)}))},l=()=>{r.classList.add("hide")};return r.addEventListener("mousedown",s),{update:(u,c)=>{const f=u.state;if((c==null?void 0:c.doc.eq(f.doc))&&c.selection.eq(f.selection))return;if(!(f.selection instanceof fe)||!u.editable){l();return}if(iS(n,u),Object.values(n).every(({$:p})=>p.classList.contains("hide"))){l();return}r.classList.remove("hide"),aS(u,r)},destroy:()=>{r.removeEventListener("mousedown",s),r.remove()}}}})},si=Uv({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:e=>e.style.textAlign||"left",setDOMAttr:(e,t)=>{t.style=`text-align: ${e||"left"}`}}}}),cS=ue`
    /* copy from https://github.com/ProseMirror/prosemirror-tables/blob/master/style/tables.css */
    .ProseMirror .tableWrapper {
        overflow-x: auto;
    }
    .ProseMirror table {
        border-collapse: collapse;
        table-layout: fixed;
        width: 100%;
        overflow: hidden;
    }
    .ProseMirror td,
    .ProseMirror th {
        vertical-align: top;
        box-sizing: border-box;
        position: relative;
    }
    .ProseMirror .column-resize-handle {
        position: absolute;
        right: -2px;
        top: 0;
        bottom: 0;
        width: 4px;
        z-index: 20;
        background-color: #adf;
        pointer-events: none;
    }
    .ProseMirror.resize-cursor {
        cursor: ew-resize;
        cursor: col-resize;
    }
    /* Give selected cells a blue overlay */
    .ProseMirror .selectedCell:after {
        z-index: 2;
        position: absolute;
        content: '';
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        background: rgba(200, 200, 255, 0.4);
        pointer-events: none;
    }
`,fS=e=>{const t=vl;return e.getStyle(({size:n,palette:r,mixin:i})=>{var o,a,s;t`
            ${cS}

            .tableWrapper {
                margin: 0 !important;

                ${(o=i.scrollbar)==null?void 0:o.call(i,"x")};

                width: 100%;

                table {
                    width: calc(100% - 2rem) !important;
                    border-radius: ${n.radius};
                    box-sizing: border-box;
                    margin: 1rem 0 1rem 1rem !important;
                    overflow: auto !important;
                    * {
                        margin: 0 !important;
                        box-sizing: border-box;
                        font-size: 1rem;
                    }
                    tr {
                        ${(a=i.border)==null?void 0:a.call(i,"bottom")};
                    }

                    th {
                        background: ${r("background",.5)};
                        font-weight: 400;
                    }

                    th,
                    td {
                        min-width: 100px;
                        ${(s=i.border)==null?void 0:s.call(i)};
                        text-align: left;
                        position: relative;
                        line-height: 3rem;
                        box-sizing: border-box;
                        height: 3rem;
                    }

                    .selectedCell {
                        &::after {
                            background: ${r("secondary",.38)};
                        }
                        & ::selection {
                            background: transparent;
                        }
                    }

                    .column-resize-handle {
                        background: ${r("primary")};
                        width: ${n.lineWidth};
                    }

                    th,
                    td {
                        padding: 0 1rem;
                        p {
                            line-height: unset !important;
                        }
                    }

                    .milkdown-cell-left,
                    .milkdown-cell-point,
                    .milkdown-cell-top {
                        position: absolute;

                        &::after {
                            cursor: pointer;
                            position: absolute;
                            top: 0;
                            left: 0;
                            height: 100%;
                            width: 100%;
                            display: block;
                            transition: all 0.2s ease-in-out;
                            background: ${r("secondary",.12)};
                            content: '';
                        }
                        &:hover::after {
                            background: ${r("secondary",.38)};
                        }
                    }

                    .milkdown-cell-left {
                        left: calc(-6px - 0.5rem);
                        top: 0;
                        bottom: 0;
                        width: 0.5rem;
                    }

                    .milkdown-cell-top {
                        left: 0;
                        right: 0;
                        top: calc(-6px - 0.5rem);
                        height: 0.5rem;
                    }

                    .milkdown-cell-point {
                        left: calc(-2px - 1rem);
                        top: calc(-2px - 1rem);
                        width: 1rem;
                        height: 1rem;

                        .icon {
                            position: absolute;
                            top: 0;
                            bottom: 0;
                            left: 0;
                            right: 0;
                        }
                    }
                }
            }
        `})},Ai={NextCell:"NextCell",PrevCell:"PrevCell",ExitTable:"ExitTable"},rf=ie(),of=ie(),af=ie(),hS=ie(),Cd=Co(e=>(fS(e),{schema:()=>({node:{table:_n(Dn({},si.table),{parseMarkdown:{match:t=>t.type==="table",runner:(t,n,r)=>{const i=n.align,o=n.children.map((a,s)=>_n(Dn({},a),{align:i,isHeader:s===0}));t.openNode(r),t.next(o),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table",runner:(t,n)=>{var r;const i=(r=n.content.firstChild)==null?void 0:r.content;if(!i)return;const o=[];i.forEach(a=>{o.push(a.attrs.alignment)}),t.openNode("table",void 0,{align:o}),t.next(n.content),t.closeNode()}}}),table_row:_n(Dn({},si.table_row),{parseMarkdown:{match:t=>t.type==="tableRow",runner:(t,n,r)=>{const i=n.align,o=n.children.map((a,s)=>_n(Dn({},a),{align:i[s],isHeader:n.isHeader}));t.openNode(r),t.next(o),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_row",runner:(t,n)=>{t.openNode("tableRow"),t.next(n.content),t.closeNode()}}}),table_cell:_n(Dn({},si.table_cell),{parseMarkdown:{match:t=>t.type==="tableCell"&&!t.isHeader,runner:(t,n,r)=>{const i=n.align;t.openNode(r,{alignment:i}).openNode(t.schema.nodes.paragraph).next(n.children).closeNode().closeNode()}},toMarkdown:{match:t=>t.type.name==="table_cell",runner:(t,n)=>{t.openNode("tableCell").next(n.content).closeNode()}}}),table_header:_n(Dn({},si.table_header),{parseMarkdown:{match:t=>t.type==="tableCell"&&!!t.isHeader,runner:(t,n,r)=>{const i=n.align;t.openNode(r,{alignment:i}),t.openNode(t.schema.nodes.paragraph),t.next(n.children),t.closeNode(),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_header",runner:(t,n)=>{t.openNode("tableCell"),t.next(n.content),t.closeNode()}}})}}),inputRules:(t,n)=>[new Ue(/^\|\|\s$/,(r,i,o,a)=>{const s=r.doc.resolve(o);if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.table))return null;const l=Xc(n.get(et)),u=r.tr.replaceRangeWith(o,a,l).scrollIntoView();return u.setSelection(U.create(u.doc,o+3))})],commands:(t,n)=>[ne(rf,()=>Nu(-1)),ne(of,()=>Nu(1)),ne(af,()=>Yx(n.get(et).nodes.paragraph)),ne(hS,()=>(r,i)=>{const{selection:o,tr:a}=r,{from:s}=o,l=Xc(n.get(et)),u=a.replaceSelectionWith(l),c=B.findFrom(u.doc.resolve(s),1,!0);return c&&(i==null||i(u.setSelection(c))),!0})],shortcuts:{[Ai.NextCell]:ae(of,"Mod-]"),[Ai.PrevCell]:ae(rf,"Mod-["),[Ai.ExitTable]:ae(af,"Mod-Enter")},prosePlugins:(t,n)=>[uS(n,e),xy({}),_y()],remarkPlugins:()=>[Jx]}));er.create([Cd()]);var pS=Object.defineProperty,dS=Object.defineProperties,mS=Object.getOwnPropertyDescriptors,sf=Object.getOwnPropertySymbols,gS=Object.prototype.hasOwnProperty,vS=Object.prototype.propertyIsEnumerable,lf=(e,t,n)=>t in e?pS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ys=(e,t)=>{for(var n in t||(t={}))gS.call(t,n)&&lf(e,n,t[n]);if(sf)for(var n of sf(t))vS.call(t,n)&&lf(e,n,t[n]);return e},xd=(e,t)=>dS(e,mS(t));const yS=/(https?:\/\/)?www\.[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)$/,kS=()=>Vv({rules:[new Ue(yS,(e,t,n,r)=>{const{schema:i}=e,[o]=t;return o?e.tr.replaceWith(n,r,i.text(o)).addMark(n,o.length+n,i.marks.link.create({href:o.startsWith("www")?`https://${o}`:o})):null})]}),bS=Co(()=>({prosePlugins:()=>[kS()]})),vr=xd(ys(ys({},we),Ai),{StrikeThrough:"StrikeThrough",TaskList:"TaskList"}),ks=ie(),wS=tr(e=>{const t="strike_through",n=e.getStyle(r=>ue`
                text-decoration-color: ${r.palette("secondary")};
            `);return{id:t,schema:()=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:r=>r==="line-through"}],toDOM:r=>["del",{class:e.getClassName(r.attrs,"strike-through",n)}],parseMarkdown:{match:r=>r.type==="delete",runner:(r,i,o)=>{r.openMark(o),r.next(i.children),r.closeMark(o)}},toMarkdown:{match:r=>r.type.name===t,runner:(r,i)=>{r.withMark(i,"delete")}}}),inputRules:r=>[Cn(/(?:~~)([^~]+)(?:~~)$/,r),Cn(/(?:^|[^~])(~([^~]+)~)$/,r)],commands:r=>[ne(ks,()=>Hr(r))],shortcuts:{[vr.StrikeThrough]:ae(ks,"Mod-Alt-x")}}}),bs=ie(),ws=ie(),Cs=ie(),xs=ie(),CS=Ge(e=>{const t="task_list_item",n=e.getStyle(({palette:r,size:i})=>ue`
                list-style-type: none;
                position: relative;

                & > div {
                    overflow: hidden;
                    padding: 0 2px;
                }

                label {
                    position: absolute;
                    top: 0;
                    left: -2rem;
                    display: inline-block;
                    width: 1.5rem;
                    height: 1.5rem;
                    margin: 0.5rem 0;
                    input {
                        visibility: hidden;
                    }
                }
                label:before {
                    position: absolute;
                    top: 0;
                    right: 0;
                    bottom: 0;
                    left: 0;
                    border-radius: ${i.radius};
                }
                label:hover:before {
                    background: ${r("background")};
                }
                &[data-checked='true'] {
                    label {
                        color: ${r("primary")};
                    }
                }
                &[data-checked='false'] {
                    label {
                        color: ${r("solid",.87)};
                    }
                }
                .paragraph {
                    margin: 0.5rem 0;
                }
            `);return{id:t,schema:()=>({group:"listItem",content:"paragraph block*",defining:!0,attrs:{checked:{default:!1}},parseDOM:[{tag:'li[data-type="task-list-item"]',getAttrs:r=>{if(!(r instanceof HTMLElement))throw new Error;return{checked:r.dataset.checked==="true"}}}],toDOM:r=>["li",{"data-type":"task-item","data-checked":r.attrs.checked?"true":"false",class:e.getClassName(r.attrs,"task-list-item",n)},0],parseMarkdown:{match:({type:r,checked:i})=>r==="listItem"&&i!==null,runner:(r,i,o)=>{r.openNode(o,{checked:i.checked}),r.next(i.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name===t,runner:(r,i)=>{r.openNode("listItem",void 0,{checked:i.attrs.checked}),r.next(i.content),r.closeNode()}}}),inputRules:r=>[jr(/^\s*(\[([ |x])\])\s$/,r,i=>({checked:i[i.length-1]==="x"}))],commands:r=>[ne(bs,()=>Jh(r)),ne(ws,()=>Uh(r)),ne(Cs,()=>Kh(r)),ne(xs,()=>ro(r))],shortcuts:{[vr.NextListItem]:ae(bs,"Enter"),[vr.SinkListItem]:ae(ws,"Mod-]"),[vr.LiftListItem]:ae(Cs,"Mod-["),[vr.TaskList]:ae(xs,"Mod-Alt-9")},view:r=>(i,o,a)=>{const s=r.get(Le).slots.icon,l=document.createElement("li"),u=document.createElement("label"),c=document.createElement("span"),f=document.createElement("input"),h=document.createElement("div");let p=s("unchecked");u.appendChild(p);const d=g=>{const y=s(g);u.replaceChild(y,p),p=y};u.contentEditable="false",f.type="checkbox";const m=g=>{const y=g.target;if(!(y instanceof HTMLInputElement))return;if(!o.editable){f.checked=!f.checked;return}const{tr:C}=o.state;o.dispatch(C.setNodeMarkup(a(),void 0,{checked:y.checked}))};f.addEventListener("change",m),l.dataset.checked=i.attrs.checked,i.attrs.checked&&f.setAttribute("checked","checked"),u.append(f,c),l.append(u,h);const v={"data-type":"task-item","data-checked":i.attrs.checked?"true":"false",class:e.getClassName(i.attrs,"task-list-item",n)};return Object.entries(v).forEach(([g,y])=>{l.setAttribute(g,y)}),d(i.attrs.checked?"checked":"unchecked"),{dom:l,contentDOM:h,update:g=>g.type.name!==t?!1:(l.dataset.checked=g.attrs.checked,g.attrs.checked?f.setAttribute("checked","checked"):f.removeAttribute("checked"),d(g.attrs.checked?"checked":"unchecked"),!0),destroy:()=>{f.removeEventListener("change",m)}}}}}),xS=er.create([...fd,Cd(),bS(),wS(),CS()]);xd(ys({},NC),{ToggleStrikeThrough:ks,TurnIntoTaskList:xs,SinkTaskListItem:ws,LiftTaskListItem:Cs,SplitTaskListItem:bs});var uf;const SS=["Roboto","HelveticaNeue-Light","Helvetica Neue Light","Helvetica Neue","Helvetica","Arial","Lucida Grande","sans-serif"],MS=["Consolas","Monaco","Andale Mono","Ubuntu Mono","monospace"],OS=({palette:e,size:t})=>({scrollbar:(n="y")=>ue`
        scrollbar-width: thin;
        scrollbar-color: ${e("secondary",.38)} ${e("secondary",.12)};
        -webkit-overflow-scrolling: touch;

        &::-webkit-scrollbar {
            ${n==="y"?"width":"height"}: 12px;
            background-color: ${e("surface")};
        }

        &::-webkit-scrollbar-track {
            border-radius: 999px;
            background: ${e("secondary",.12)};
            border: 4px solid ${e("surface")};
        }

        &::-webkit-scrollbar-thumb {
            border-radius: 999px;
            background-color: ${e("secondary",.38)};
            border: 4px solid ${e("surface")};
            background-clip: content-box;
        }

        &::-webkit-scrollbar-thumb:hover {
            background-color: ${e("secondary")};
        }
    `,shadow:()=>{const{lineWidth:n}=t;return ue`
            box-shadow: 0px ${n} ${n} ${e("shadow",.14)},
                0px 2px ${n} ${e("shadow",.12)}, 0px ${n} 3px ${e("shadow",.2)};
        `},border:n=>n?ue`
            ${`border-${n}`}: ${t.lineWidth} solid ${e("line")};
        `:ue`
                border: ${t.lineWidth} solid ${e("line")};
            `}),je={nord0:"#2e3440",nord1:"#3b4252",nord2:"#434c5e",nord3:"#4c566a",nord4:"#d8dee9",nord5:"#e5e9f0",nord6:"#eceff4",nord7:"#8fbcbb",nord8:"#88c0d0",nord9:"#81a1c1",nord10:"#5e81ac",nord11:"#bf616a",nord12:"#d08770",nord13:"#ebcb8b",nord14:"#a3be8c",nord15:"#b48ead"},AS={shadow:je.nord1,primary:je.nord10,secondary:je.nord9,neutral:je.nord0,solid:je.nord3,line:je.nord4,background:je.nord6,surface:"#fff"},ES={shadow:je.nord1,primary:je.nord10,secondary:je.nord9,neutral:je.nord6,solid:je.nord4,line:je.nord2,background:"#252932",surface:je.nord0},TS={lightColor:AS,darkColor:ES},NS=({palette:e,mixin:t,size:n,font:r})=>{var i,o,a;return ue`
    .milkdown {
        color: ${e("neutral",.87)};
        background: ${e("surface")};

        position: relative;
        font-family: ${r.typography};
        margin-left: auto;
        margin-right: auto;
        ${(i=t.shadow)==null?void 0:i.call(t)};
        box-sizing: border-box;
        ${(o=t.scrollbar)==null?void 0:o.call(t)};

        .editor {
            padding: 3.125rem 1.25rem;
            outline: none;
            & > * {
                margin: 1.875rem 0;
            }

            @media only screen and (min-width: 72rem) {
                max-width: 57.375rem;
                padding: 3.125rem 7.25rem;
            }
        }

        .ProseMirror-selectednode {
            outline: ${n.lineWidth} solid ${e("line")};
        }

        li.ProseMirror-selectednode {
            outline: none;
        }

        li.ProseMirror-selectednode::after {
            ${(a=t.border)==null?void 0:a.call(t)};
        }

        & ::selection {
            background: ${e("secondary",.38)};
        }
    }
`},IS=ue`
    /* copy from https://github.com/ProseMirror/@milkdown/prose/blob/master/style/prosemirror.css */
    .ProseMirror {
        position: relative;
    }

    .ProseMirror {
        word-wrap: break-word;
        white-space: pre-wrap;
        white-space: break-spaces;
        -webkit-font-variant-ligatures: none;
        font-variant-ligatures: none;
        font-feature-settings: 'liga' 0; /* the above doesn't seem to work in Edge */
    }

    .ProseMirror pre {
        white-space: pre-wrap;
    }

    .ProseMirror li {
        position: relative;
    }

    .ProseMirror-hideselection *::selection {
        background: transparent;
    }
    .ProseMirror-hideselection *::-moz-selection {
        background: transparent;
    }
    .ProseMirror-hideselection {
        caret-color: transparent;
    }

    .ProseMirror-selectednode {
        outline: 2px solid #8cf;
    }

    /* Make sure li selections wrap around markers */

    li.ProseMirror-selectednode {
        outline: none;
    }

    li.ProseMirror-selectednode:after {
        content: '';
        position: absolute;
        left: -32px;
        right: -2px;
        top: -2px;
        bottom: -2px;
        border: 2px solid #8cf;
        pointer-events: none;
    }
`,DS={typography:SS,code:MS},_S={radius:"4px",lineWidth:"1px"};Boolean((uf=window.matchMedia)==null?void 0:uf.call(window,"(prefers-color-scheme: dark)").matches);const PS={h1:"h1",h2:"h2",h3:"h3",loading:"loading",quote:"quote",code:"code",table:"table",divider:"line",image:"image",brokenImage:"image",bulletList:"unorder-list",orderedList:"order-list",taskList:"checklist",bold:"bold",italic:"italic",inlineCode:"code",strikeThrough:"text-delete",link:"link",leftArrow:"arrow-left",rightArrow:"arrow-right",upArrow:"arrow-up",downArrow:"arrow-down",alignLeft:"align-left",alignRight:"align-right",alignCenter:"align-center",delete:"delete",select:"select-all",unchecked:"unchecked",checked:"checked"};var RS=Ww({font:DS,size:_S,color:TS.lightColor,mixin:OS,slots:()=>({icon:e=>{const t=document.createElement("span");return t.className=`icon ed-icon icon-${PS[e]}`,t}}),global:e=>{vl`
          ${IS};
          ${NS(e)}
      `}});const FS=cf({props:{enableTooltip:{type:Boolean,default:!1},enableSlash:{type:Boolean,default:!1},enableHistory:{type:Boolean,default:!1},enablePrism:{type:Boolean,default:!1},enableClipboard:{type:Boolean,default:!1},markdown:{type:String,default:""},textColor:{type:String,default:"#494e59"},fontSize:{type:Number,default:16}},emits:["change"],setup(e,{expose:t,emit:n}){const r=e;Bd(c=>({"73257fa1":e.textColor,"2417bc76":pf(i)}));const i=ff(()=>Ud(r.textColor,50)),o=pa(),a=pa(!0);Vd(()=>{l()});let s="";const l=async()=>{const c=jw.make().config(f=>{f.set(ts,o.value),f.set(Qa,r.markdown),f.set(es,{editable:()=>!0}),f.set(vs,{markdown:[h=>{s=h(),n("change",s)}]})}).use(RS).use(fd).use(xS).use(IC);if(r.enableTooltip){const{tooltip:f}=await Zr(()=>import("./index.es.e36a41b3.js"),["assets/index.es.e36a41b3.js","assets/vendor.f6148a0a.js","assets/index.3c0b9368.js","assets/index.fd1d73bc.css","assets/color.556e4bcb.js"]);c.use(f)}if(r.enableSlash){const{slash:f}=await Zr(()=>import("./index.es.ff5851c3.js"),["assets/index.es.ff5851c3.js","assets/vendor.f6148a0a.js","assets/index.3c0b9368.js","assets/index.fd1d73bc.css","assets/color.556e4bcb.js"]);c.use(f)}if(r.enableHistory){const{history:f}=await Zr(()=>import("./index.es.d477b8c5.js"),["assets/index.es.d477b8c5.js","assets/vendor.f6148a0a.js","assets/index.3c0b9368.js","assets/index.fd1d73bc.css","assets/color.556e4bcb.js"]);c.use(f)}if(r.enableClipboard){const{clipboard:f}=await Zr(()=>import("./index.es.2cfd26bc.js"),["assets/index.es.2cfd26bc.js","assets/vendor.f6148a0a.js","assets/index.3c0b9368.js","assets/index.fd1d73bc.css","assets/color.556e4bcb.js"]);c.use(f)}c.create()};return t({update:async()=>{a.value=!1,await Rl(),a.value=!0,await Rl(),l()}}),(c,f)=>a.value?(li(),ui("div",{key:0,ref_key:"editorRef",ref:o,class:"milkdown-wrapper",style:ci({width:"100%",height:"100%",fontSize:e.fontSize+"px"})},null,4)):hf("",!0)}});const zS=e=>(jd("data-v-25d036d0"),e=e(),qd(),e),LS={key:0,class:"logo"},BS=["width","height"],VS=zS(()=>da("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"105",height:"140"},[da("path",{d:"M0.183563 0H104.816V139.978H0.183563V0Z",fill:"white"})],-1)),$S=Jd('<g mask="url(#mask0)" data-v-25d036d0><path fill-rule="evenodd" clip-rule="evenodd" d="M2.75348 119.219H64.0647V49.2188H2.75348V119.219Z" fill="#D8DEE9" data-v-25d036d0></path><path fill-rule="evenodd" clip-rule="evenodd" d="M101.887 39.4917L91.0489 15.8138V8.20313C91.0489 3.6801 87.3431 0 82.7885 0H22.2115C17.6569 0 13.951 3.6801 13.951 8.20313V15.8138L3.11328 39.4917C0.547759 45.0957 0.183563 47.4742 0.183563 53.3203V131.797C0.183563 136.32 3.8894 140 8.44405 140H96.5559C101.111 140 104.816 136.32 104.816 131.797V53.3203C104.816 47.4742 104.452 45.0957 101.887 39.4917ZM22.2115 5.46875H74.9997C74.6943 6.32479 74.528 7.24464 74.528 8.20313V13.6719H19.458V8.20313C19.458 6.69484 20.6927 5.46875 22.2115 5.46875ZM5.69056 131.797V53.3203C5.69056 47.8928 6.00886 46.3805 8.12722 41.7546L18.4771 19.1406H73.0051L63.6902 39.4917C61.1247 45.0957 60.7605 47.4742 60.7605 53.3203V131.797C60.7605 132.755 60.9268 133.675 61.2323 134.531H8.44405C6.92522 134.531 5.69056 133.305 5.69056 131.797ZM99.3094 131.797C99.3094 133.305 98.0748 134.531 96.5559 134.531H69.021C67.5021 134.531 66.2675 133.305 66.2675 131.797V53.3203C66.2675 47.8928 66.5858 46.3805 68.7041 41.7546L79.7625 17.5926C79.9259 17.2565 80.0221 16.882 80.0335 16.4861C80.0335 16.4832 80.0335 16.4817 80.0335 16.4788C80.035 16.4547 80.035 16.4303 80.035 16.4063V8.20313C80.187 4.57443 85.3914 4.57734 85.542 8.20313V16.4063C85.542 16.7964 85.6264 17.1824 85.7887 17.5372L96.8728 41.7546C98.9911 46.3805 99.3094 47.8928 99.3094 53.3203V131.797Z" fill="#5E81AC" data-v-25d036d0></path></g><path fill-rule="evenodd" clip-rule="evenodd" d="M41.6839 55.3754C40.7877 54.8996 39.7021 54.9525 38.8573 55.5121L32.1241 59.968L25.3909 55.5106C24.5461 54.9525 23.4605 54.8996 22.5644 55.3754C21.6693 55.8508 21.1101 56.7779 21.1101 57.7864V68.7239C21.2563 72.3511 26.4721 72.3497 26.6171 68.7239V62.8964L30.5969 65.5309C31.5217 66.1434 32.7266 66.1434 33.6514 65.5309L37.6311 62.8964V68.7239C37.7772 72.3511 42.9931 72.3497 43.1381 68.7239V57.7864C43.1381 56.7779 42.579 55.8508 41.6839 55.3754Z" fill="#434C5E" data-v-25d036d0></path><path d="M50.9397 82.4869H13.6757C12.2057 82.4869 11.014 83.6703 11.014 85.1301C11.014 86.5899 12.2057 87.7734 13.6757 87.7734H50.9397C52.4097 87.7734 53.6014 86.5899 53.6014 85.1301C53.6014 83.6703 52.4097 82.4869 50.9397 82.4869Z" fill="#434C5E" data-v-25d036d0></path><path d="M50.9397 95.2473H13.6757C12.2057 95.2473 11.014 96.4307 11.014 97.8906C11.014 99.3504 12.2057 100.534 13.6757 100.534H50.9397C52.4097 100.534 53.6014 99.3504 53.6014 97.8906C53.6014 96.4307 52.4097 95.2473 50.9397 95.2473Z" fill="#434C5E" data-v-25d036d0></path><path d="M50.9397 108.008H13.6757C12.2057 108.008 11.014 109.191 11.014 110.651C11.014 112.111 12.2057 113.294 13.6757 113.294H50.9397C52.4097 113.294 53.6014 112.111 53.6014 110.651C53.6014 109.191 52.4097 108.008 50.9397 108.008Z" fill="#434C5E" data-v-25d036d0></path>',5),HS=[VS,$S],WS=cf({props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0},isAction:{type:Boolean,default:!1}},setup(e){const t=e,n=$d(),r=ff(()=>n.state.isLock),i=pa();or(()=>t.componentSetting.enableTooltip,()=>i.value.update()),or(()=>t.componentSetting.enableSlash,()=>i.value.update()),or(()=>t.componentSetting.enablePrism,()=>i.value.update()),or(()=>t.componentSetting.enableHistory,()=>i.value.update()),or(()=>t.componentSetting.enableClipboard,()=>i.value.update());const o=s=>{const l=JSON.parse(JSON.stringify(Wd(t.element)));t.isAction?(l.actionSetting.actionClickValue.componentSetting.markdown=s,n.dispatch("updateActionElement",l)):l.componentSetting.markdown=s,n.dispatch("editComponent",l)},a=s=>{r.value&&s.stopPropagation()};return(s,l)=>(li(),ui("div",{class:"wrapper",style:ci({padding:e.componentSetting.padding+"px"}),onContextmenu:a},[e.componentSetting.showTitle!==!1?(li(),ui("div",LS,[(li(),ui("svg",{width:e.componentSetting.textFontSize/96*105,height:e.componentSetting.textFontSize/96*140,viewBox:"0 0 105 140",fill:"none"},HS,8,BS)),da("div",{class:"title",style:ci({fontSize:e.componentSetting.textFontSize*1.3+"px",color:e.componentSetting.textColor})}," Milkdown Editor ",4)])):hf("",!0),Hd(FS,{ref_key:"milkdown",ref:i,style:ci({fontFamily:e.componentSetting.fontFamily,pointerEvents:pf(r)?"auto":"none",flex:1}),textColor:e.componentSetting.textColor,fontSize:e.componentSetting.textFontSize,enableTooltip:e.componentSetting.enableTooltip,enableSlash:e.componentSetting.enableSlash,enableHistory:e.componentSetting.enableHistory,enablePrism:e.componentSetting.enablePrism,enableClipboard:e.componentSetting.enableClipboard,markdown:e.componentSetting.markdown,onChange:o},null,8,["style","textColor","fontSize","enableTooltip","enableSlash","enableHistory","enablePrism","enableClipboard","markdown"])],36))}});var jS=Kd(WS,[["__scopeId","data-v-25d036d0"]]),ZS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:jS});export{Ga as $,er as A,QS as B,Kt as C,ms as D,ke as E,xs as F,cd as G,ls as H,Ue as I,hS as J,cs as K,ld as L,sd as M,$ as N,Z as O,Pt as P,ye as Q,zy as R,Oe as S,U as T,zv as U,GS as V,us as W,Fv as X,es as Y,Ka as Z,I as _,ie as a,ZS as a0,Co as b,Ge as c,Ea as d,ue as e,K as f,ne as g,$y as h,Fe as i,et as j,ih as k,ik as l,z as m,Gm as n,Gi as o,ud as p,ss as q,Le as r,Ce as s,xe as t,Vy as u,as as v,ks as w,is as x,ad as y,_t as z};
