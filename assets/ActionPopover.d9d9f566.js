import{h as A,r as s,o as E,b as X,K as Y,x as D,s as w,t as V,ab as L,ac as N,m as J,d as f,e as O,J as K,D as P,z as M,A as U}from"./vendor.f6148a0a.js";import{g as S}from"./direction.8b21c0ae.js";import{_ as j}from"./index.3c0b9368.js";const q=A({props:{popoverCustomClass:{type:String},closeOnClickOutside:{type:Boolean,default:!0}},emits:["opend","closed"],setup(m,{expose:T,emit:h}){const b=m,t=s(!1),l=s(!1),p=s(""),_=s();E(()=>{document.addEventListener("click",g)}),X(()=>{document.removeEventListener("click",g)});const g=e=>{!b.closeOnClickOutside||t.value&&!_.value.contains(e.target)&&(t.value=!1)},a=s({width:200,height:200,top:0,left:0}),C=async(e,o)=>{setTimeout(()=>{if(!e.actionSetting)return;const{actionSetting:n}=e,{actionType:d,actionClickType:i,actionClickValue:c}=n;if(d===1&&i===1){const{w:r,h:u,direction:k}=c,[y,x,$,z]=S(o,{width:r||200,height:u||200},k);a.value={width:r||200,height:u||200,left:y,top:x},p.value=`${$-y}px ${z-x}px`,t.value=!0,l.value=k===0}})},v=()=>{t.value=!1,l.value=!1},B=(e,o)=>{t.value?v():C(e,o)},I=({w:e,h:o,direction:n},d)=>{setTimeout(()=>{const[i,c,r,u]=S(d,{width:e||200,height:o||200},n);a.value={width:e||200,height:o||200,left:i,top:c},p.value=`${r-i}px ${u-c}px`,t.value=!0,l.value=n===0})};return Y(()=>t.value,e=>{h(e?"opend":"closed")}),T({open:C,close:v,toggle:B,defaultOpen:I}),(e,o)=>{const n=J("Icon");return f(),D(N,{to:"body"},[w(L,{name:"zoomIn"},{default:V(()=>[t.value?(f(),O("div",{key:0,ref_key:"actionPopover",ref:_,class:M(["action-popover",m.popoverCustomClass]),style:U({width:a.value.width+"px",height:a.value.height+"px",top:a.value.top+"px",left:a.value.left+"px",transformOrigin:p.value})},[K(e.$slots,"default",{},void 0,!0),l.value?(f(),O("div",{key:0,class:"close",onClick:v},[w(n,{name:"close"})])):P("",!0)],6)):P("",!0)]),_:3})])}}});var Q=j(q,[["__scopeId","data-v-8065b1ea"]]);export{Q as default};
